var tm=Object.defineProperty;var Sl=s=>{throw TypeError(s)};var sm=(s,e,t)=>e in s?tm(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var D=(s,e,t)=>sm(s,typeof e!="symbol"?e+"":e,t),im=(s,e,t)=>e.has(s)||Sl("Cannot "+t);var Tl=(s,e,t)=>e.has(s)?Sl("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,t);var rn=(s,e,t)=>(im(s,e,"access private method"),t);import{r as S,a as nm,R as Gn,c as am}from"./vendor-DXY7kvCo.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=t(n);fetch(n.href,a)}})();var id={exports:{}},qn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rm=S,om=Symbol.for("react.element"),lm=Symbol.for("react.fragment"),cm=Object.prototype.hasOwnProperty,dm=rm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hm={key:!0,ref:!0,__self:!0,__source:!0};function nd(s,e,t){var i,n={},a=null,r=null;t!==void 0&&(a=""+t),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(r=e.ref);for(i in e)cm.call(e,i)&&!hm.hasOwnProperty(i)&&(n[i]=e[i]);if(s&&s.defaultProps)for(i in e=s.defaultProps,e)n[i]===void 0&&(n[i]=e[i]);return{$$typeof:om,type:s,key:a,ref:r,props:n,_owner:dm.current}}qn.Fragment=lm;qn.jsx=nd;qn.jsxs=nd;id.exports=qn;var o=id.exports,ad,Al=nm;ad=Al.createRoot,Al.hydrateRoot;/**
 * react-router v7.9.4
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ml="popstate";function um(s={}){function e(n,a){let{pathname:r="/",search:l="",hash:c=""}=bs(n.location.hash.substring(1));return!r.startsWith("/")&&!r.startsWith(".")&&(r="/"+r),tr("",{pathname:r,search:l,hash:c},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(n,a){let r=n.document.querySelector("base"),l="";if(r&&r.getAttribute("href")){let c=n.location.href,h=c.indexOf("#");l=h===-1?c:c.slice(0,h)}return l+"#"+(typeof a=="string"?a:ki(a))}function i(n,a){ht(n.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return mm(e,t,i,s)}function ve(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function ht(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fm(){return Math.random().toString(36).substring(2,10)}function El(s,e){return{usr:s.state,key:s.key,idx:e}}function tr(s,e,t=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?bs(e):e,state:t,key:e&&e.key||i||fm()}}function ki({pathname:s="/",search:e="",hash:t=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(s+=t.charAt(0)==="#"?t:"#"+t),s}function bs(s){let e={};if(s){let t=s.indexOf("#");t>=0&&(e.hash=s.substring(t),s=s.substring(0,t));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function mm(s,e,t,i={}){let{window:n=document.defaultView,v5Compat:a=!1}=i,r=n.history,l="POP",c=null,h=u();h==null&&(h=0,r.replaceState({...r.state,idx:h},""));function u(){return(r.state||{idx:null}).idx}function m(){l="POP";let _=u(),w=_==null?null:_-h;h=_,c&&c({action:l,location:b.location,delta:w})}function p(_,w){l="PUSH";let j=tr(b.location,_,w);t&&t(j,_),h=u()+1;let C=El(j,h),P=b.createHref(j);try{r.pushState(C,"",P)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;n.location.assign(P)}a&&c&&c({action:l,location:b.location,delta:1})}function x(_,w){l="REPLACE";let j=tr(b.location,_,w);t&&t(j,_),h=u();let C=El(j,h),P=b.createHref(j);r.replaceState(C,"",P),a&&c&&c({action:l,location:b.location,delta:0})}function v(_){return pm(_)}let b={get action(){return l},get location(){return s(n,r)},listen(_){if(c)throw new Error("A history only accepts one active listener");return n.addEventListener(Ml,m),c=_,()=>{n.removeEventListener(Ml,m),c=null}},createHref(_){return e(n,_)},createURL:v,encodeLocation(_){let w=v(_);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:x,go(_){return r.go(_)}};return b}function pm(s,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ve(t,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:ki(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function rd(s,e,t="/"){return gm(s,e,t,!1)}function gm(s,e,t,i){let n=typeof e=="string"?bs(e):e,a=Ot(n.pathname||"/",t);if(a==null)return null;let r=od(s);xm(r);let l=null;for(let c=0;l==null&&c<r.length;++c){let h=Tm(a);l=Cm(r[c],h,i)}return l}function od(s,e=[],t=[],i="",n=!1){let a=(r,l,c=n,h)=>{let u={relativePath:h===void 0?r.path||"":h,caseSensitive:r.caseSensitive===!0,childrenIndex:l,route:r};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(i)&&c)return;ve(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length)}let m=Rt([i,u.relativePath]),p=t.concat(u);r.children&&r.children.length>0&&(ve(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),od(r.children,e,p,m,c)),!(r.path==null&&!r.index)&&e.push({path:m,score:km(m,r.index),routesMeta:p})};return s.forEach((r,l)=>{var c;if(r.path===""||!((c=r.path)!=null&&c.includes("?")))a(r,l);else for(let h of ld(r.path))a(r,l,!0,h)}),e}function ld(s){let e=s.split("/");if(e.length===0)return[];let[t,...i]=e,n=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return n?[a,""]:[a];let r=ld(i.join("/")),l=[];return l.push(...r.map(c=>c===""?a:[a,c].join("/"))),n&&l.push(...r),l.map(c=>s.startsWith("/")&&c===""?"/":c)}function xm(s){s.sort((e,t)=>e.score!==t.score?t.score-e.score:Nm(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var bm=/^:[\w-]+$/,ym=3,vm=2,_m=1,wm=10,jm=-2,Pl=s=>s==="*";function km(s,e){let t=s.split("/"),i=t.length;return t.some(Pl)&&(i+=jm),e&&(i+=vm),t.filter(n=>!Pl(n)).reduce((n,a)=>n+(bm.test(a)?ym:a===""?_m:wm),i)}function Nm(s,e){return s.length===e.length&&s.slice(0,-1).every((i,n)=>i===e[n])?s[s.length-1]-e[e.length-1]:0}function Cm(s,e,t=!1){let{routesMeta:i}=s,n={},a="/",r=[];for(let l=0;l<i.length;++l){let c=i[l],h=l===i.length-1,u=a==="/"?e:e.slice(a.length)||"/",m=Dn({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},u),p=c.route;if(!m&&h&&t&&!i[i.length-1].route.index&&(m=Dn({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!m)return null;Object.assign(n,m.params),r.push({params:n,pathname:Rt([a,m.pathname]),pathnameBase:Pm(Rt([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=Rt([a,m.pathnameBase]))}return r}function Dn(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[t,i]=Sm(s.path,s.caseSensitive,s.end),n=e.match(t);if(!n)return null;let a=n[0],r=a.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:i.reduce((h,{paramName:u,isOptional:m},p)=>{if(u==="*"){let v=l[p]||"";r=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const x=l[p];return m&&!x?h[u]=void 0:h[u]=(x||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:r,pattern:s}}function Sm(s,e=!1,t=!0){ht(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],n="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(r,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),n+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":s!==""&&s!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,e?void 0:"i"),i]}function Tm(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ht(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function Ot(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=s.charAt(t);return i&&i!=="/"?null:s.slice(t)||"/"}function Am(s,e="/"){let{pathname:t,search:i="",hash:n=""}=typeof s=="string"?bs(s):s;return{pathname:t?t.startsWith("/")?t:Mm(t,e):e,search:Rm(i),hash:Dm(n)}}function Mm(s,e){let t=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(n=>{n===".."?t.length>1&&t.pop():n!=="."&&t.push(n)}),t.length>1?t.join("/"):"/"}function Fa(s,e,t,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Em(s){return s.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function cd(s){let e=Em(s);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function dd(s,e,t,i=!1){let n;typeof s=="string"?n=bs(s):(n={...s},ve(!n.pathname||!n.pathname.includes("?"),Fa("?","pathname","search",n)),ve(!n.pathname||!n.pathname.includes("#"),Fa("#","pathname","hash",n)),ve(!n.search||!n.search.includes("#"),Fa("#","search","hash",n)));let a=s===""||n.pathname==="",r=a?"/":n.pathname,l;if(r==null)l=t;else{let m=e.length-1;if(!i&&r.startsWith("..")){let p=r.split("/");for(;p[0]==="..";)p.shift(),m-=1;n.pathname=p.join("/")}l=m>=0?e[m]:"/"}let c=Am(n,l),h=r&&r!=="/"&&r.endsWith("/"),u=(a||r===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||u)&&(c.pathname+="/"),c}var Rt=s=>s.join("/").replace(/\/\/+/g,"/"),Pm=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),Rm=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,Dm=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function Lm(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}var hd=["POST","PUT","PATCH","DELETE"];new Set(hd);var Om=["GET",...hd];new Set(Om);var Vs=S.createContext(null);Vs.displayName="DataRouter";var Xn=S.createContext(null);Xn.displayName="DataRouterState";S.createContext(!1);var ud=S.createContext({isTransitioning:!1});ud.displayName="ViewTransition";var Im=S.createContext(new Map);Im.displayName="Fetchers";var Fm=S.createContext(null);Fm.displayName="Await";var wt=S.createContext(null);wt.displayName="Navigation";var Pi=S.createContext(null);Pi.displayName="Location";var It=S.createContext({outlet:null,matches:[],isDataRoute:!1});It.displayName="Route";var yr=S.createContext(null);yr.displayName="RouteError";function zm(s,{relative:e}={}){ve(Ri(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=S.useContext(wt),{hash:n,pathname:a,search:r}=Di(s,{relative:e}),l=a;return t!=="/"&&(l=a==="/"?t:Rt([t,a])),i.createHref({pathname:l,search:r,hash:n})}function Ri(){return S.useContext(Pi)!=null}function ys(){return ve(Ri(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Pi).location}var fd="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function md(s){S.useContext(wt).static||S.useLayoutEffect(s)}function pd(){let{isDataRoute:s}=S.useContext(It);return s?Zm():$m()}function $m(){ve(Ri(),"useNavigate() may be used only in the context of a <Router> component.");let s=S.useContext(Vs),{basename:e,navigator:t}=S.useContext(wt),{matches:i}=S.useContext(It),{pathname:n}=ys(),a=JSON.stringify(cd(i)),r=S.useRef(!1);return md(()=>{r.current=!0}),S.useCallback((c,h={})=>{if(ht(r.current,fd),!r.current)return;if(typeof c=="number"){t.go(c);return}let u=dd(c,JSON.parse(a),n,h.relative==="path");s==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Rt([e,u.pathname])),(h.replace?t.replace:t.push)(u,h.state,h)},[e,t,a,n,s])}S.createContext(null);function Di(s,{relative:e}={}){let{matches:t}=S.useContext(It),{pathname:i}=ys(),n=JSON.stringify(cd(t));return S.useMemo(()=>dd(s,JSON.parse(n),i,e==="path"),[s,n,i,e])}function Bm(s,e){return gd(s,e)}function gd(s,e,t,i,n){var j;ve(Ri(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=S.useContext(wt),{matches:r}=S.useContext(It),l=r[r.length-1],c=l?l.params:{},h=l?l.pathname:"/",u=l?l.pathnameBase:"/",m=l&&l.route;{let C=m&&m.path||"";xd(h,!m||C.endsWith("*")||C.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${C}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${C}"> to <Route path="${C==="/"?"*":`${C}/*`}">.`)}let p=ys(),x;if(e){let C=typeof e=="string"?bs(e):e;ve(u==="/"||((j=C.pathname)==null?void 0:j.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${C.pathname}" was given in the \`location\` prop.`),x=C}else x=p;let v=x.pathname||"/",b=v;if(u!=="/"){let C=u.replace(/^\//,"").split("/");b="/"+v.replace(/^\//,"").split("/").slice(C.length).join("/")}let _=rd(s,{pathname:b});ht(m||_!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),ht(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=Ym(_&&_.map(C=>Object.assign({},C,{params:Object.assign({},c,C.params),pathname:Rt([u,a.encodeLocation?a.encodeLocation(C.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:Rt([u,a.encodeLocation?a.encodeLocation(C.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:C.pathnameBase])})),r,t,i,n);return e&&w?S.createElement(Pi.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},w):w}function Hm(){let s=Qm(),e=Lm(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),t=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},r=null;return console.error("Error handled by React Router default ErrorBoundary:",s),r=S.createElement(S.Fragment,null,S.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:a},"ErrorBoundary")," or"," ",S.createElement("code",{style:a},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),t?S.createElement("pre",{style:n},t):null,r)}var Wm=S.createElement(Hm,null),Um=class extends S.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.unstable_onError?this.props.unstable_onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?S.createElement(It.Provider,{value:this.props.routeContext},S.createElement(yr.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Vm({routeContext:s,match:e,children:t}){let i=S.useContext(Vs);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(It.Provider,{value:s},t)}function Ym(s,e=[],t=null,i=null,n=null){if(s==null){if(!t)return null;if(t.errors)s=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)s=t.matches;else return null}let a=s,r=t==null?void 0:t.errors;if(r!=null){let h=a.findIndex(u=>u.route.id&&(r==null?void 0:r[u.route.id])!==void 0);ve(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let l=!1,c=-1;if(t)for(let h=0;h<a.length;h++){let u=a[h];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=h),u.route.id){let{loaderData:m,errors:p}=t,x=u.route.loader&&!m.hasOwnProperty(u.route.id)&&(!p||p[u.route.id]===void 0);if(u.route.lazy||x){l=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}return a.reduceRight((h,u,m)=>{let p,x=!1,v=null,b=null;t&&(p=r&&u.route.id?r[u.route.id]:void 0,v=u.route.errorElement||Wm,l&&(c<0&&m===0?(xd("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,b=null):c===m&&(x=!0,b=u.route.hydrateFallbackElement||null)));let _=e.concat(a.slice(0,m+1)),w=()=>{let j;return p?j=v:x?j=b:u.route.Component?j=S.createElement(u.route.Component,null):u.route.element?j=u.route.element:j=h,S.createElement(Vm,{match:u,routeContext:{outlet:h,matches:_,isDataRoute:t!=null},children:j})};return t&&(u.route.ErrorBoundary||u.route.errorElement||m===0)?S.createElement(Um,{location:t.location,revalidation:t.revalidation,component:v,error:p,children:w(),routeContext:{outlet:null,matches:_,isDataRoute:!0},unstable_onError:i}):w()},null)}function vr(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Km(s){let e=S.useContext(Vs);return ve(e,vr(s)),e}function Gm(s){let e=S.useContext(Xn);return ve(e,vr(s)),e}function qm(s){let e=S.useContext(It);return ve(e,vr(s)),e}function _r(s){let e=qm(s),t=e.matches[e.matches.length-1];return ve(t.route.id,`${s} can only be used on routes that contain a unique "id"`),t.route.id}function Xm(){return _r("useRouteId")}function Qm(){var i;let s=S.useContext(yr),e=Gm("useRouteError"),t=_r("useRouteError");return s!==void 0?s:(i=e.errors)==null?void 0:i[t]}function Zm(){let{router:s}=Km("useNavigate"),e=_r("useNavigate"),t=S.useRef(!1);return md(()=>{t.current=!0}),S.useCallback(async(n,a={})=>{ht(t.current,fd),t.current&&(typeof n=="number"?s.navigate(n):await s.navigate(n,{fromRouteId:e,...a}))},[s,e])}var Rl={};function xd(s,e,t){!e&&!Rl[s]&&(Rl[s]=!0,ht(!1,t))}S.memo(Jm);function Jm({routes:s,future:e,state:t,unstable_onError:i}){return gd(s,void 0,t,i,e)}function St(s){ve(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ep({basename:s="/",children:e=null,location:t,navigationType:i="POP",navigator:n,static:a=!1}){ve(!Ri(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let r=s.replace(/^\/*/,"/"),l=S.useMemo(()=>({basename:r,navigator:n,static:a,future:{}}),[r,n,a]);typeof t=="string"&&(t=bs(t));let{pathname:c="/",search:h="",hash:u="",state:m=null,key:p="default"}=t,x=S.useMemo(()=>{let v=Ot(c,r);return v==null?null:{location:{pathname:v,search:h,hash:u,state:m,key:p},navigationType:i}},[r,c,h,u,m,p,i]);return ht(x!=null,`<Router basename="${r}"> is not able to match the URL "${c}${h}${u}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:S.createElement(wt.Provider,{value:l},S.createElement(Pi.Provider,{children:e,value:x}))}function tp({children:s,location:e}){return Bm(sr(s),e)}function sr(s,e=[]){let t=[];return S.Children.forEach(s,(i,n)=>{if(!S.isValidElement(i))return;let a=[...e,n];if(i.type===S.Fragment){t.push.apply(t,sr(i.props.children,a));return}ve(i.type===St,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ve(!i.props.index||!i.props.children,"An index route cannot have child routes.");let r={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(r.children=sr(i.props.children,a)),t.push(r)}),t}var Cn="get",Sn="application/x-www-form-urlencoded";function Qn(s){return s!=null&&typeof s.tagName=="string"}function sp(s){return Qn(s)&&s.tagName.toLowerCase()==="button"}function ip(s){return Qn(s)&&s.tagName.toLowerCase()==="form"}function np(s){return Qn(s)&&s.tagName.toLowerCase()==="input"}function ap(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function rp(s,e){return s.button===0&&(!e||e==="_self")&&!ap(s)}var on=null;function op(){if(on===null)try{new FormData(document.createElement("form"),0),on=!1}catch{on=!0}return on}var lp=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function za(s){return s!=null&&!lp.has(s)?(ht(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Sn}"`),null):s}function cp(s,e){let t,i,n,a,r;if(ip(s)){let l=s.getAttribute("action");i=l?Ot(l,e):null,t=s.getAttribute("method")||Cn,n=za(s.getAttribute("enctype"))||Sn,a=new FormData(s)}else if(sp(s)||np(s)&&(s.type==="submit"||s.type==="image")){let l=s.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=s.getAttribute("formaction")||l.getAttribute("action");if(i=c?Ot(c,e):null,t=s.getAttribute("formmethod")||l.getAttribute("method")||Cn,n=za(s.getAttribute("formenctype"))||za(l.getAttribute("enctype"))||Sn,a=new FormData(l,s),!op()){let{name:h,type:u,value:m}=s;if(u==="image"){let p=h?`${h}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else h&&a.append(h,m)}}else{if(Qn(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Cn,i=null,n=Sn,r=s}return a&&n==="text/plain"&&(r=a,a=void 0),{action:i,method:t.toLowerCase(),encType:n,formData:a,body:r}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function wr(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function dp(s,e,t){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&Ot(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function hp(s,e){if(s.id in e)return e[s.id];try{let t=await import(s.module);return e[s.id]=t,t}catch(t){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function up(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function fp(s,e,t){let i=await Promise.all(s.map(async n=>{let a=e.routes[n.route.id];if(a){let r=await hp(a,t);return r.links?r.links():[]}return[]}));return xp(i.flat(1).filter(up).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function Dl(s,e,t,i,n,a){let r=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,l=(c,h)=>{var u;return t[h].pathname!==c.pathname||((u=t[h].route.path)==null?void 0:u.endsWith("*"))&&t[h].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,h)=>r(c,h)||l(c,h)):a==="data"?e.filter((c,h)=>{var m;let u=i.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(r(c,h)||l(c,h))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((m=t[0])==null?void 0:m.params)||{},nextUrl:new URL(s,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function mp(s,e,{includeHydrateFallback:t}={}){return pp(s.map(i=>{let n=e.routes[i.route.id];if(!n)return[];let a=[n.module];return n.clientActionModule&&(a=a.concat(n.clientActionModule)),n.clientLoaderModule&&(a=a.concat(n.clientLoaderModule)),t&&n.hydrateFallbackModule&&(a=a.concat(n.hydrateFallbackModule)),n.imports&&(a=a.concat(n.imports)),a}).flat(1))}function pp(s){return[...new Set(s)]}function gp(s){let e={},t=Object.keys(s).sort();for(let i of t)e[i]=s[i];return e}function xp(s,e){let t=new Set;return new Set(e),s.reduce((i,n)=>{let a=JSON.stringify(gp(n));return t.has(a)||(t.add(a),i.push({key:a,link:n})),i},[])}function bd(){let s=S.useContext(Vs);return wr(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function bp(){let s=S.useContext(Xn);return wr(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var jr=S.createContext(void 0);jr.displayName="FrameworkContext";function yd(){let s=S.useContext(jr);return wr(s,"You must render this element inside a <HydratedRouter> element"),s}function yp(s,e){let t=S.useContext(jr),[i,n]=S.useState(!1),[a,r]=S.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:h,onMouseLeave:u,onTouchStart:m}=e,p=S.useRef(null);S.useEffect(()=>{if(s==="render"&&r(!0),s==="viewport"){let b=w=>{w.forEach(j=>{r(j.isIntersecting)})},_=new IntersectionObserver(b,{threshold:.5});return p.current&&_.observe(p.current),()=>{_.disconnect()}}},[s]),S.useEffect(()=>{if(i){let b=setTimeout(()=>{r(!0)},100);return()=>{clearTimeout(b)}}},[i]);let x=()=>{n(!0)},v=()=>{n(!1),r(!1)};return t?s!=="intent"?[a,p,{}]:[a,p,{onFocus:ii(l,x),onBlur:ii(c,v),onMouseEnter:ii(h,x),onMouseLeave:ii(u,v),onTouchStart:ii(m,x)}]:[!1,p,{}]}function ii(s,e){return t=>{s&&s(t),t.defaultPrevented||e(t)}}function vp({page:s,...e}){let{router:t}=bd(),i=S.useMemo(()=>rd(t.routes,s,t.basename),[t.routes,s,t.basename]);return i?S.createElement(wp,{page:s,matches:i,...e}):null}function _p(s){let{manifest:e,routeModules:t}=yd(),[i,n]=S.useState([]);return S.useEffect(()=>{let a=!1;return fp(s,e,t).then(r=>{a||n(r)}),()=>{a=!0}},[s,e,t]),i}function wp({page:s,matches:e,...t}){let i=ys(),{manifest:n,routeModules:a}=yd(),{basename:r}=bd(),{loaderData:l,matches:c}=bp(),h=S.useMemo(()=>Dl(s,e,c,n,i,"data"),[s,e,c,n,i]),u=S.useMemo(()=>Dl(s,e,c,n,i,"assets"),[s,e,c,n,i]),m=S.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let v=new Set,b=!1;if(e.forEach(w=>{var C;let j=n.routes[w.route.id];!j||!j.hasLoader||(!h.some(P=>P.route.id===w.route.id)&&w.route.id in l&&((C=a[w.route.id])!=null&&C.shouldRevalidate)||j.hasClientLoader?b=!0:v.add(w.route.id))}),v.size===0)return[];let _=dp(s,r,"data");return b&&v.size>0&&_.searchParams.set("_routes",e.filter(w=>v.has(w.route.id)).map(w=>w.route.id).join(",")),[_.pathname+_.search]},[r,l,i,n,h,e,s,a]),p=S.useMemo(()=>mp(u,n),[u,n]),x=_p(u);return S.createElement(S.Fragment,null,m.map(v=>S.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),p.map(v=>S.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),x.map(({key:v,link:b})=>S.createElement("link",{key:v,nonce:t.nonce,...b})))}function jp(...s){return e=>{s.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var vd=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vd&&(window.__reactRouterVersion="7.9.4")}catch{}function kp({basename:s,children:e,window:t}){let i=S.useRef();i.current==null&&(i.current=um({window:t,v5Compat:!0}));let n=i.current,[a,r]=S.useState({action:n.action,location:n.location}),l=S.useCallback(c=>{S.startTransition(()=>r(c))},[r]);return S.useLayoutEffect(()=>n.listen(l),[n,l]),S.createElement(ep,{basename:s,children:e,location:a.location,navigationType:a.action,navigator:n})}var _d=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wd=S.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:n,reloadDocument:a,replace:r,state:l,target:c,to:h,preventScrollReset:u,viewTransition:m,...p},x){let{basename:v}=S.useContext(wt),b=typeof h=="string"&&_d.test(h),_,w=!1;if(typeof h=="string"&&b&&(_=h,vd))try{let $=new URL(window.location.href),H=h.startsWith("//")?new URL($.protocol+h):new URL(h),Y=Ot(H.pathname,v);H.origin===$.origin&&Y!=null?h=Y+H.search+H.hash:w=!0}catch{ht(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let j=zm(h,{relative:n}),[C,P,A]=yp(i,p),O=Tp(h,{replace:r,state:l,target:c,preventScrollReset:u,relative:n,viewTransition:m});function B($){e&&e($),$.defaultPrevented||O($)}let F=S.createElement("a",{...p,...A,href:_||j,onClick:w||a?e:B,ref:jp(x,P),target:c,"data-discover":!b&&t==="render"?"true":void 0});return C&&!b?S.createElement(S.Fragment,null,F,S.createElement(vp,{page:j})):F});wd.displayName="Link";var Np=S.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:n=!1,style:a,to:r,viewTransition:l,children:c,...h},u){let m=Di(r,{relative:h.relative}),p=ys(),x=S.useContext(Xn),{navigator:v,basename:b}=S.useContext(wt),_=x!=null&&Rp(m)&&l===!0,w=v.encodeLocation?v.encodeLocation(m).pathname:m.pathname,j=p.pathname,C=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;t||(j=j.toLowerCase(),C=C?C.toLowerCase():null,w=w.toLowerCase()),C&&b&&(C=Ot(C,b)||C);const P=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let A=j===w||!n&&j.startsWith(w)&&j.charAt(P)==="/",O=C!=null&&(C===w||!n&&C.startsWith(w)&&C.charAt(w.length)==="/"),B={isActive:A,isPending:O,isTransitioning:_},F=A?e:void 0,$;typeof i=="function"?$=i(B):$=[i,A?"active":null,O?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let H=typeof a=="function"?a(B):a;return S.createElement(wd,{...h,"aria-current":F,className:$,ref:u,style:H,to:r,viewTransition:l},typeof c=="function"?c(B):c)});Np.displayName="NavLink";var Cp=S.forwardRef(({discover:s="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:n,state:a,method:r=Cn,action:l,onSubmit:c,relative:h,preventScrollReset:u,viewTransition:m,...p},x)=>{let v=Ep(),b=Pp(l,{relative:h}),_=r.toLowerCase()==="get"?"get":"post",w=typeof l=="string"&&_d.test(l),j=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let P=C.nativeEvent.submitter,A=(P==null?void 0:P.getAttribute("formmethod"))||r;v(P||C.currentTarget,{fetcherKey:e,method:A,navigate:t,replace:n,state:a,relative:h,preventScrollReset:u,viewTransition:m})};return S.createElement("form",{ref:x,method:_,action:b,onSubmit:i?c:j,...p,"data-discover":!w&&s==="render"?"true":void 0})});Cp.displayName="Form";function Sp(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jd(s){let e=S.useContext(Vs);return ve(e,Sp(s)),e}function Tp(s,{target:e,replace:t,state:i,preventScrollReset:n,relative:a,viewTransition:r}={}){let l=pd(),c=ys(),h=Di(s,{relative:a});return S.useCallback(u=>{if(rp(u,e)){u.preventDefault();let m=t!==void 0?t:ki(c)===ki(h);l(s,{replace:m,state:i,preventScrollReset:n,relative:a,viewTransition:r})}},[c,l,h,t,i,e,s,n,a,r])}var Ap=0,Mp=()=>`__${String(++Ap)}__`;function Ep(){let{router:s}=jd("useSubmit"),{basename:e}=S.useContext(wt),t=Xm();return S.useCallback(async(i,n={})=>{let{action:a,method:r,encType:l,formData:c,body:h}=cp(i,e);if(n.navigate===!1){let u=n.fetcherKey||Mp();await s.fetch(u,t,n.action||a,{preventScrollReset:n.preventScrollReset,formData:c,body:h,formMethod:n.method||r,formEncType:n.encType||l,flushSync:n.flushSync})}else await s.navigate(n.action||a,{preventScrollReset:n.preventScrollReset,formData:c,body:h,formMethod:n.method||r,formEncType:n.encType||l,replace:n.replace,state:n.state,fromRouteId:t,flushSync:n.flushSync,viewTransition:n.viewTransition})},[s,e,t])}function Pp(s,{relative:e}={}){let{basename:t}=S.useContext(wt),i=S.useContext(It);ve(i,"useFormAction must be used inside a RouteContext");let[n]=i.matches.slice(-1),a={...Di(s||".",{relative:e})},r=ys();if(s==null){a.search=r.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(m=>m).forEach(m=>l.append("index",m));let u=l.toString();a.search=u?`?${u}`:""}}return(!s||s===".")&&n.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Rt([t,a.pathname])),ki(a)}function Rp(s,{relative:e}={}){let t=S.useContext(ud);ve(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=jd("useViewTransitionState"),n=Di(s,{relative:e});if(!t.isTransitioning)return!1;let a=Ot(t.currentLocation.pathname,i)||t.currentLocation.pathname,r=Ot(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Dn(n.pathname,r)!=null||Dn(n.pathname,a)!=null}const kd=S.createContext(void 0),Dp={status:"idle",error:null,result:null,raw:null};function Lp(s,e){switch(e.type){case"SUBMIT_START":return{...s,status:"submitting",error:null};case"SUBMIT_SUCCESS":return{...s,status:"success",result:e.payload.normalized,raw:e.payload.raw};case"SUBMIT_ERROR":return{...s,status:"error",error:e.payload};default:return s}}const Op=({children:s,initialState:e})=>{const[t,i]=S.useReducer(Lp,e||Dp);return o.jsx(kd.Provider,{value:{state:t,dispatch:i},children:s})};function Nd(){const s=S.useContext(kd);if(!s)throw new Error("useCalculation must be used within CalculationProvider");return s}const Ip=({toast:s,onDismiss:e,animationDuration:t=300,showCloseButton:i=!0,className:n="",style:a={},...r})=>{const l=S.useRef(null);S.useEffect(()=>(s.autoHide&&s.autoHide>0&&(l.current=setTimeout(()=>{e(s.id)},s.autoHide)),()=>{l.current&&clearTimeout(l.current)}),[s.autoHide,s.id,e]);const c=()=>{e(s.id)},h=s.variant?`toast-${s.variant}`:"",u=()=>"just now",m=["toast","show",h,n].filter(Boolean).join(" ");return o.jsxs("div",{...r,className:m,role:"alert","aria-live":"assertive","aria-atomic":"true",style:{"--bs-toast-animation-duration":`${t}ms`,...a},children:[s.title&&o.jsxs("strong",{className:"toast-header me-auto",children:[s.icon&&o.jsx("i",{className:`fas ${s.icon} me-2`,role:"img","aria-hidden":"true"}),s.title,s.showTimestamp&&o.jsx("small",{className:"toast-timestamp text-muted ms-2",children:u()}),i&&o.jsx("button",{type:"button",className:"btn-close ms-auto","aria-label":"Close",onClick:c})]}),o.jsxs("div",{className:"toast-body",children:[!s.title&&s.icon&&o.jsx("i",{className:`fas ${s.icon} me-2`,role:"img","aria-hidden":"true"}),s.message,!s.title&&i&&o.jsx("button",{type:"button",className:"btn-close btn-close-white position-absolute top-50 end-0 translate-middle-y me-2","aria-label":"Close",onClick:c}),!s.title&&s.showTimestamp&&o.jsx("div",{className:"toast-timestamp text-muted small mt-1",children:u()})]})]})},Fp=({toasts:s=[],position:e="top-end",maxToasts:t=5,animationDuration:i=300,showCloseButton:n=!0,className:a="",onDismiss:r})=>{const l=s.slice(0,t),c=()=>{switch(e){case"top-start":return"toast-container position-fixed top-0 start-0";case"top-center":return"toast-container position-fixed top-0 start-50 translate-middle-x";case"top-end":return"toast-container position-fixed top-0 end-0";case"middle-start":return"toast-container position-fixed top-50 start-0 translate-middle-y";case"middle-center":return"toast-container position-fixed top-50 start-50 translate-middle";case"middle-end":return"toast-container position-fixed top-50 end-0 translate-middle-y";case"bottom-start":return"toast-container position-fixed bottom-0 start-0";case"bottom-center":return"toast-container position-fixed bottom-0 start-50 translate-middle-x";case"bottom-end":return"toast-container position-fixed bottom-0 end-0";default:return"toast-container position-fixed top-0 end-0"}};return l.length===0?null:o.jsx("div",{className:`${c()} p-3 ${a}`,children:l.map(h=>o.jsx(Ip,{toast:h,onDismiss:r,animationDuration:i,showCloseButton:n},h.id))})},zp=S.createContext(void 0),$p=({children:s,position:e="top-end",maxToasts:t=5,defaultAutoHide:i=5e3,animationDuration:n=300,showCloseButton:a=!0})=>{const[r,l]=S.useState([]),c=S.useCallback((_,w="info",j={})=>{const C=Date.now().toString()+Math.random().toString(36).substr(2,9),P={id:C,message:_,variant:w,autoHide:i,showTimestamp:!1,...j};return l(A=>[...A,P]),C},[i]),h=S.useCallback(_=>{l(w=>w.filter(j=>j.id!==_))},[]),u=S.useCallback(()=>{l([])},[]),m=S.useCallback((_,w)=>c(_,"success",w),[c]),p=S.useCallback((_,w)=>c(_,"danger",w),[c]),x=S.useCallback((_,w)=>c(_,"warning",w),[c]),v=S.useCallback((_,w)=>c(_,"info",w),[c]),b={toasts:r,addToast:c,removeToast:h,clearToasts:u,showSuccess:m,showError:p,showWarning:x,showInfo:v};return o.jsxs(zp.Provider,{value:b,children:[s,o.jsx(Fp,{toasts:r,position:e,maxToasts:t,animationDuration:n,showCloseButton:a,onDismiss:h})]})},us={config:{associateTag:"cgttaxtool-20",defaultDisclosure:"As an Amazon Associate, we earn from qualifying purchases. This helps support our free tax calculation tools.",enableTracking:!0,placeholderImage:"/images/book-placeholder.jpg",amazonBaseUrl:"https://www.amazon.co.uk"},products:[{id:"uk-tax-guide-2024",title:"Tolley's Tax Guide 2024-25",description:"The definitive guide to UK taxation including capital gains tax, income tax, and corporation tax. Essential for investors and tax professionals.",asin:"B0BTXX5N5L",affiliateUrl:"https://amzn.to/4pCCh96",imageUrl:"https://m.media-amazon.com/images/I/61v-3RYPZPL._SY522_.jpg",category:"tax",tags:["uk-tax","capital-gains","income-tax","reference"],price:"Â£143.99",rating:5,reviewCount:1,featured:!0,publishedDate:"2024-09-30",author:"Tolley",isbn:"978-0754559573"},{id:"capital-gains-tax-uk",title:"Shares and Taxation",description:"A Practical Guide to Saving Tax on Your Shares.",asin:"B08VHXMC9K",affiliateUrl:"https://amzn.to/3KkWtfx",imageUrl:"https://m.media-amazon.com/images/I/519DCz1azmL.jpg",category:"tax",tags:["capital-gains","uk-tax","property","shares"],price:"Â£13.56",rating:5,reviewCount:1,featured:!0,publishedDate:"2010-10-12",author:"Jimmy B. Prince ",isbn:""},{id:"intelligent-investor",title:"The Intelligent Investor",description:"Benjamin Graham's timeless investment principles. Essential reading for understanding value investing and building long-term wealth.",asin:"B000FC12C8",affiliateUrl:"https://amzn.to/46yvrbV",imageUrl:"https://m.media-amazon.com/images/I/71piwvkH0sL._SY522_.jpg",category:"trading",tags:["investing","value-investing","warren-buffett","classic"],price:"Â£14.45",rating:4.7,reviewCount:382,featured:!0,publishedDate:"2024-10-24",author:"Benjamin Graham",isbn:"978-0063423527"},{id:"bogleheads-guide",title:"The Bogleheads' Guide to Investing",description:"Simple, effective investment strategies from John Bogle's disciples. Perfect for passive investing and building diversified portfolios.",asin:"B00JUV01RW",affiliateUrl:"https://amzn.to/4gG21xn",imageUrl:"https://m.media-amazon.com/images/I/814Z8SEGU0L._SY522_.jpg",category:"trading",tags:["passive-investing","index-funds","portfolio","bogle"],price:"Â£16.39",rating:4.7,reviewCount:2940,featured:!1,publishedDate:"2022-02-28",author:"Taylor Larimore",isbn:"9978-1119847670"},{id:"rich-dad-poor-dad",title:"Rich Dad Poor Dad",description:"Robert Kiyosaki's bestselling guide to financial literacy. Learn about assets, liabilities, and building passive income streams.",asin:"B07C7M8SX9",affiliateUrl:"https://amzn.to/3KDzcW9",imageUrl:"https://m.media-amazon.com/images/I/81BE7eeKzAL._SY522_.jpg",category:"finance",tags:["financial-literacy","passive-income","mindset","bestseller"],price:"Â£10.87",rating:4.6,reviewCount:88909,featured:!1,publishedDate:"2022-05-19",author:"Robert T. Kiyosaki",isbn:"9978-1612681122"},{id:"uk-property-tax",title:"How to Save Property Tax 2024/25",description:"Almost 300 pages of tax planning information for landlords and property investors.",asin:"B0C45FGHJ2",affiliateUrl:"https://amzn.to/480kIto",imageUrl:"https://m.media-amazon.com/images/I/71a68-28d4L._SY522_.jpg",category:"tax",tags:["property-tax","landlords","uk-tax"],price:"Â£28.00",rating:4.6,reviewCount:143,featured:!1,publishedDate:"2024-05-01",author:"Carl Bayley",isbn:"978-1916539653"},{id:"thinking-fast-and-slow",title:"Thinking, Fast and Slow",description:"Daniel Kahneman's classic on the two systems that drive the way we think.",asin:"0141033576",affiliateUrl:"https://www.amazon.co.uk/Thinking-Fast-Slow-Daniel-Kahneman/dp/0141033576",imageUrl:"https://m.media-amazon.com/images/I/71b3oX+p8gL._SY522_.jpg",category:"trading",tags:["psychology","behavioral-finance","decision-making"],price:"Â£10.34",rating:4.5,reviewCount:46177,featured:!1,publishedDate:"2012-05-10",author:"Daniel Kahneman",isbn:"978-0141033570"},{id:"technical-analysis-financial-markets",title:"Technical Analysis of the Financial Markets",description:"A comprehensive guide to trading methods and applications, from the 'bible' of technical analysis.",asin:"0735200661",affiliateUrl:"https://www.amazon.co.uk/Technical-Analysis-Financial-Markets-Comprehensive/dp/0735200661",imageUrl:"https://m.media-amazon.com/images/I/71+i0bV+c3L._SY522_.jpg",category:"trading",tags:["technical-analysis","charting","trading","markets"],price:"Â£38.00",rating:4.6,reviewCount:2853,featured:!1,publishedDate:"1999-01-01",author:"John J. Murphy",isbn:"978-0735200661"},{id:"mastering-the-market-cycle",title:"Mastering the Market Cycle",description:"Howard Marks provides invaluable insight into market cycles, helping you get the odds on your side.",asin:"1473695686",affiliateUrl:"https://www.amazon.co.uk/Mastering-Market-Cycle-Getting-odds/dp/1473695686/",imageUrl:"https://m.media-amazon.com/images/I/71BqS+ODoNL._SY522_.jpg",category:"trading",tags:["market-cycles","investing","howard-marks"],price:"Â£12.99",rating:4.3,reviewCount:3331,featured:!1,publishedDate:"2020-01-23",author:"Howard Marks",isbn:"978-1473695689"},{id:"reminiscences-of-a-stock-operator",title:"Reminiscences of a Stock Operator",description:"A timeless classic that provides a vivid and engaging account of a stock market speculator's life.",asin:"0471770884",affiliateUrl:"https://www.amazon.co.uk/Reminiscences-Stock-Operator-Edwin-Lefevre/dp/0471770884",imageUrl:"https://m.media-amazon.com/images/I/81+gG0oGZBL._SY522_.jpg",category:"trading",tags:["trading","biography","classic","speculation"],price:"Â£16.98",rating:4.4,reviewCount:4567,featured:!1,publishedDate:"2006-02-10",author:"Edwin LefÃ¨vre",isbn:"978-0471770886"},{id:"trading-psychology",title:"Trading in the Zone",description:"Master the psychology of trading. Essential for understanding market emotions and developing disciplined trading strategies.",asin:"B007DC7C4G",affiliateUrl:"https://amzn.to/4pFDr3y",imageUrl:"https://m.media-amazon.com/images/I/91h1hHF7awL._SY522_.jpg",category:"trading",tags:["psychology","trading-mindset","discipline","emotions"],price:"Â£27.80",rating:4.6,reviewCount:9202,featured:!0,publishedDate:"2001-01-01",author:"Mark Douglas",isbn:"978-0735201446"},{id:"uk-business-tax",title:"TAXTOPIA",description:"How I Discovered the Injustices, Scams and Guilty Secrets of the Tax Evasion Game",asin:"B0D12EFG34",affiliateUrl:"https://amzn.to/3KkZfS3",imageUrl:"https://m.media-amazon.com/images/I/61PCti3j6yL._SY522_.jpg",category:"business",tags:["business-tax","corporation-tax","vat","small-business"],price:"Â£6.59",rating:4.5,reviewCount:583,featured:!1,publishedDate:"2024-02-20",author:"The Rebel Accountant",isbn:"978-1800960879"},{id:"thinking-fast-and-slow-2",title:"Thinking, Fast and Slow",description:"Daniel Kahneman's seminal work on the two systems that drive the way we think. Essential for understanding and overcoming cognitive biases in trading.",asin:"0141033576",affiliateUrl:"https://www.amazon.co.uk/Thinking-Fast-Slow-Daniel-Kahneman/dp/0141033576",imageUrl:"https://m.media-amazon.com/images/I/71m6X-iOAOL._SY522_.jpg",category:"trading",tags:["psychology","cognitive-bias","mindset","kahneman"],price:"Â£11.99",rating:4.6,reviewCount:25e3,featured:!0,publishedDate:"2012-04-10",author:"Daniel Kahneman",isbn:"978-0141033570"},{id:"technical-analysis-of-financial-markets-2",title:"Technical Analysis of the Financial Markets",description:"A comprehensive guide to technical analysis, considered by many to be the bible of the subject. Covers chart patterns, indicators, and trading theory.",asin:"0735200661",affiliateUrl:"https://www.amazon.co.uk/Technical-Analysis-Financial-Markets-Comprehensive/dp/0735200661",imageUrl:"https://m.media-amazon.com/images/I/71p6T1m2VjL._SY522_.jpg",category:"trading",tags:["technical-analysis","charting","indicators","classic"],price:"Â£65.50",rating:4.7,reviewCount:4500,featured:!1,publishedDate:"1999-01-15",author:"John J. Murphy",isbn:"978-0735200661"},{id:"mastering-the-market-cycle-2",title:"Mastering the Market Cycle: Getting the Odds on Your Side",description:"Howard Marks provides a brilliant framework for understanding market cycles, helping investors know where they stand and how to act.",asin:"147214044X",affiliateUrl:"https://www.amazon.co.uk/Mastering-Market-Cycle-Getting-odds/dp/1473695686/",imageUrl:"https://m.media-amazon.com/images/I/71y3-f-i2AL._SY522_.jpg",category:"investing",tags:["market-cycles","investing-strategy","howard-marks","economics"],price:"Â£12.99",rating:4.6,reviewCount:2300,featured:!1,publishedDate:"2020-07-09",author:"Howard Marks",isbn:"978-1472140443"},{id:"reminiscences-of-a-stock-operator-2",title:"Reminiscences of a Stock Operator",description:"A fictionalized biography of Jesse Livermore, this book is a timeless classic on speculation, crowd psychology, and the art of trading.",asin:"0471770884",affiliateUrl:"https://amzn.to/433dvVR",imageUrl:"https://m.media-amazon.com/images/I/815fdzmtwAL._SY522_.jpg",category:"trading",tags:["classic","trading-psychology","speculation","jesse-livermore"],price:"Â£16.98",rating:4.4,reviewCount:4567,featured:!1,publishedDate:"2006-05-12",author:"Edwin LefÃ¨vre",isbn:"978-0471770886"}]};let $a=null,ln=null;function Bp(s,e){const t=[];["id","title","description","asin","affiliateUrl","imageUrl","category"].forEach(a=>{(!s[a]||typeof s[a]=="string"&&s[a].trim()==="")&&t.push({field:`products[${e}].${a}`,message:`Missing required field: ${a}`,value:s[a]})});const n=["tax","trading","finance","business","investing"];return s.category&&!n.includes(s.category)&&t.push({field:`products[${e}].category`,message:`Invalid category. Must be one of: ${n.join(", ")}`,value:s.category}),s.asin&&!/^[A-Z0-9]{10}$/.test(s.asin)&&t.push({field:`products[${e}].asin`,message:"ASIN must be 10 alphanumeric characters",value:s.asin}),s.affiliateUrl&&!Ll(s.affiliateUrl)&&t.push({field:`products[${e}].affiliateUrl`,message:"Invalid affiliate URL format",value:s.affiliateUrl}),s.imageUrl&&!Ll(s.imageUrl)&&t.push({field:`products[${e}].imageUrl`,message:"Invalid image URL format",value:s.imageUrl}),s.rating!==void 0&&(s.rating<1||s.rating>5)&&t.push({field:`products[${e}].rating`,message:"Rating must be between 1 and 5",value:s.rating}),t}function Ll(s){try{return new URL(s),!0}catch{return!1}}function Cd(){const s=[];if(us.config?["associateTag","defaultDisclosure","amazonBaseUrl"].forEach(t=>{us.config[t]||s.push({field:`config.${t}`,message:`Missing required config field: ${t}`})}):s.push({field:"config",message:"Missing config section"}),!us.products||!Array.isArray(us.products))s.push({field:"products",message:"Products must be an array"});else{const e=new Set;us.products.forEach((t,i)=>{t.id&&(e.has(t.id)&&s.push({field:`products[${i}].id`,message:`Duplicate product ID: ${t.id}`,value:t.id}),e.add(t.id)),s.push(...Bp(t,i))})}return s}function Sd(){if(!ln){const s=Cd();s.length>0?(console.error("[AffiliateLoader] Validation errors:",s),ln={associateTag:"cgttaxtool-20",defaultDisclosure:"As an Amazon Associate, we earn from qualifying purchases.",enableTracking:!0,placeholderImage:"/images/book-placeholder.jpg",amazonBaseUrl:"https://www.amazon.co.uk"}):ln=us.config}return ln}function Kt(){if(!$a){const s=Cd();if(s.length>0)return console.error("[AffiliateLoader] Validation errors:",s),[];$a=us.products}return[...$a]}function Td(s){return Kt().filter(e=>e.category===s)}function Ad(){return Kt().filter(s=>s.featured)}function Md(s){const e=s.toLowerCase().trim();return e?Kt().filter(t=>t.title.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.tags.some(i=>i.toLowerCase().includes(e))||t.author&&t.author.toLowerCase().includes(e)):Kt()}function Hp(s){if(Sd().enableTracking)try{console.log("[AffiliateLoader] Affiliate click tracked:",{productId:s.id,productTitle:s.title,category:s.category,timestamp:new Date().toISOString()})}catch(t){console.error("[AffiliateLoader] Error tracking affiliate click:",t)}}const gi=({product:s,children:e,className:t="",showDisclosure:i=!0,disclosureText:n,onClick:a,target:r="_blank",rel:l="noopener noreferrer sponsored",...c})=>{const h=m=>{Hp(s),a&&a(m)},u=`affiliate-link ${t}`.trim();return o.jsxs(o.Fragment,{children:[o.jsx("a",{href:s.affiliateUrl,className:u,target:r,rel:l,onClick:h,title:`View ${s.title} on Amazon`,"data-product-id":s.id,"data-asin":s.asin,...c,children:e||s.title}),i&&o.jsx("small",{className:"affiliate-disclosure text-muted ms-1",children:n||"*"})]})},Ed=({product:s,layout:e="vertical",showFullDescription:t=!1,showRating:i=!0,showPrice:n=!0,className:a="",imageHeight:r=200,ctaText:l="View on Amazon",compact:c=!1})=>{const h=["affiliate-card","card","h-100",`affiliate-card--${e}`,c&&"affiliate-card--compact",a].filter(Boolean).join(" "),u=t?s.description:s.description.length>120?`${s.description.substring(0,120)}...`:s.description,m=v=>{const b=Math.floor(v),_=v%1!==0,w=5-Math.ceil(v);return o.jsxs("div",{className:"affiliate-rating d-flex align-items-center",children:[[...Array(b)].map((j,C)=>o.jsx("i",{className:"bi bi-star-fill text-warning"},`full-${C}`)),_&&o.jsx("i",{className:"bi bi-star-half text-warning"}),[...Array(w)].map((j,C)=>o.jsx("i",{className:"bi bi-star text-warning"},`empty-${C}`)),o.jsxs("span",{className:"ms-2 text-muted small",children:["(",v,")"]})]})},p=()=>o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"affiliate-card__image",children:o.jsx("img",{src:s.imageUrl,alt:s.title,className:"card-img-top",style:{height:`${r}px`,objectFit:"contain"},loading:"lazy",onError:v=>{const b=v.target;b.src!==(s.fallbackImageUrl||"/images/book-placeholder.jpg")&&(b.src=s.fallbackImageUrl||"/images/book-placeholder.jpg")}})}),o.jsxs("div",{className:"card-body d-flex flex-column",children:[o.jsxs("div",{className:"affiliate-card__content flex-grow-1",children:[o.jsx("h5",{className:"card-title affiliate-product-title",children:s.title}),s.author&&o.jsxs("h6",{className:"card-subtitle mb-2 text-muted",children:["by ",s.author]}),o.jsx("p",{className:"card-text affiliate-product-description",children:u}),i&&s.rating&&o.jsx("div",{className:"mb-2",children:m(s.rating)}),n&&s.price&&o.jsxs("div",{className:"affiliate-price mb-2",children:[o.jsx("span",{className:"h6 text-primary",children:s.price}),s.originalPrice&&s.originalPrice!==s.price&&o.jsx("span",{className:"text-muted text-decoration-line-through ms-2 small",children:s.originalPrice})]})]}),o.jsx("div",{className:"affiliate-card__actions mt-auto",children:o.jsxs(gi,{product:s,className:"btn btn-primary w-100",showDisclosure:!1,children:[o.jsx("i",{className:"bi bi-cart3 me-2"}),l]})})]})]}),x=()=>o.jsxs("div",{className:"row g-0",children:[o.jsx("div",{className:"col-md-4",children:o.jsx("div",{className:"affiliate-card__image",children:o.jsx("img",{src:s.imageUrl,alt:s.title,className:"img-fluid rounded-start h-100",style:{objectFit:"contain"},loading:"lazy",onError:v=>{const b=v.target;b.src!==(s.fallbackImageUrl||"/images/book-placeholder.jpg")&&(b.src=s.fallbackImageUrl||"/images/book-placeholder.jpg")}})})}),o.jsx("div",{className:"col-md-8",children:o.jsxs("div",{className:"card-body d-flex flex-column h-100",children:[o.jsxs("div",{className:"affiliate-card__content flex-grow-1",children:[o.jsx("h5",{className:"card-title affiliate-product-title",children:s.title}),s.author&&o.jsxs("h6",{className:"card-subtitle mb-2 text-muted",children:["by ",s.author]}),o.jsx("p",{className:"card-text affiliate-product-description",children:u}),i&&s.rating&&o.jsx("div",{className:"mb-2",children:m(s.rating)}),n&&s.price&&o.jsxs("div",{className:"affiliate-price mb-2",children:[o.jsx("span",{className:"h6 text-primary",children:s.price}),s.originalPrice&&s.originalPrice!==s.price&&o.jsx("span",{className:"text-muted text-decoration-line-through ms-2 small",children:s.originalPrice})]})]}),o.jsx("div",{className:"affiliate-card__actions mt-auto",children:o.jsxs(gi,{product:s,className:"btn btn-primary",showDisclosure:!1,children:[o.jsx("i",{className:"bi bi-cart3 me-2"}),l]})})]})})]});return o.jsxs("div",{className:h,children:[e==="horizontal"?x():p(),s.category&&o.jsx("div",{className:"position-absolute top-0 end-0 m-2",children:o.jsx("span",{className:`badge bg-${Wp(s.category)}`,children:s.category})}),s.featured&&o.jsx("div",{className:"position-absolute top-0 start-0 m-2",children:o.jsxs("span",{className:"badge bg-warning text-dark",children:[o.jsx("i",{className:"bi bi-star-fill me-1"}),"Featured"]})})]})};function Wp(s){return{tax:"success",trading:"primary",finance:"info",business:"secondary"}[s]||"secondary"}const Dt=({products:s,category:e,featuredOnly:t=!1,limit:i,className:n="",showCategories:a=!1,showRatings:r=!0,layout:l="vertical",columns:c={xs:1,sm:2,md:2,lg:3,xl:4},searchQuery:h,sortBy:u="default",emptyStateMessage:m="No products found",loading:p=!1})=>{const v=(()=>{if(s)return s;let w=[];switch(t?w=Ad():e?w=Td(e):w=Kt(),h&&h.trim()&&(w=Md(h)),u){case"rating":w=w.filter(j=>j.rating!==void 0).sort((j,C)=>(C.rating||0)-(j.rating||0));break;case"title":w=w.sort((j,C)=>j.title.localeCompare(C.title));break;case"category":w=w.sort((j,C)=>j.category.localeCompare(C.category));break;case"featured":w=w.sort((j,C)=>j.featured&&!C.featured?-1:!j.featured&&C.featured?1:0);break}return i&&i>0&&(w=w.slice(0,i)),w})(),b=()=>{const w=[];if(typeof c=="object"&&c!==null)c.xs&&w.push(`col-${12/c.xs}`),c.sm&&w.push(`col-sm-${12/c.sm}`),c.md&&w.push(`col-md-${12/c.md}`),c.lg&&w.push(`col-lg-${12/c.lg}`),c.xl&&w.push(`col-xl-${12/c.xl}`);else{const j=c||3;w.push(`col-12 col-md-${12/j}`)}return w.join(" ")},_=["affiliate-grid",n].filter(Boolean).join(" ");return p?o.jsx("div",{className:_,children:o.jsx("div",{className:"row",children:[...Array(typeof c=="object"?c.md||2:c||2)].map((w,j)=>o.jsx("div",{className:b(),children:o.jsxs("div",{className:"card h-100",children:[o.jsx("div",{className:"card-img-top bg-light",style:{height:"200px"},children:o.jsx("div",{className:"d-flex align-items-center justify-content-center h-100",children:o.jsx("div",{className:"spinner-border text-primary",role:"status",children:o.jsx("span",{className:"visually-hidden",children:"Loading..."})})})}),o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"placeholder-glow",children:[o.jsx("h5",{className:"placeholder col-8"}),o.jsx("h6",{className:"placeholder col-6"}),o.jsx("p",{className:"placeholder col-12"}),o.jsx("p",{className:"placeholder col-8"})]})})]})},j))})}):v.length===0?o.jsx("div",{className:_,children:o.jsxs("div",{className:"text-center py-5",children:[o.jsx("i",{className:"bi bi-search display-4 text-muted mb-3"}),o.jsx("h4",{className:"text-muted",children:m}),h&&o.jsxs("p",{className:"text-muted",children:['No products found for "',h,'". Try adjusting your search terms.']}),e&&o.jsxs("p",{className:"text-muted",children:['No products found in the "',e,'" category.']}),o.jsx("p",{className:"text-muted small mt-2",children:"ðŸ“š Tax resources will be available soon. Check back later!"})]})}):o.jsxs("div",{className:_,children:[o.jsxs("div",{className:"affiliate-grid__header mb-3 d-flex justify-content-between align-items-center",children:[o.jsxs("small",{className:"text-muted",children:["Showing ",v.length," product",v.length!==1?"s":"",e&&` in ${e}`,h&&` for "${h}"`]}),a&&o.jsx("div",{className:"affiliate-grid__categories",children:Array.from(new Set(v.map(w=>w.category))).map(w=>o.jsx("span",{className:`badge bg-${Up(w)} me-1`,children:w},w))})]}),o.jsx("div",{className:"row g-4",children:v.map(w=>o.jsx("div",{className:b(),children:o.jsx(Ed,{product:w,layout:l,showRating:r,className:"h-100"})},w.id))}),i&&Kt().length>i&&o.jsx("div",{className:"text-center mt-4",children:o.jsxs("p",{className:"text-muted",children:["Showing ",i," of ",Kt().length," products"]})})]})};function Up(s){return{tax:"success",trading:"primary",finance:"info",business:"secondary"}[s]||"secondary"}const Tn=({text:s,style:e="inline",className:t="",showIcon:i=!0})=>{const n=Sd(),a=s||n.defaultDisclosure,r=()=>{const m=["affiliate-disclosure"];switch(e){case"banner":return[...m,"alert","alert-info","mb-3","d-flex","align-items-center",t].filter(Boolean).join(" ");case"footer":return[...m,"text-muted","small","border-top","pt-3","mt-4",t].filter(Boolean).join(" ");case"inline":default:return[...m,"text-muted","small",t].filter(Boolean).join(" ")}},l=()=>{if(!i)return null;switch(e){case"banner":return o.jsx("i",{className:"bi bi-info-circle-fill me-2 text-info"});case"footer":return o.jsx("i",{className:"bi bi-asterisk me-1"});case"inline":default:return o.jsx("i",{className:"bi bi-asterisk me-1"})}},c=()=>o.jsxs("div",{className:r(),role:"complementary","aria-label":"Affiliate Disclosure",children:[l(),o.jsxs("div",{children:[o.jsx("strong",{className:"me-2",children:"Disclosure:"}),a]})]}),h=()=>o.jsx("div",{className:r(),role:"contentinfo","aria-label":"Affiliate Disclosure",children:o.jsxs("div",{className:"d-flex align-items-start",children:[l(),o.jsxs("div",{children:[o.jsx("strong",{className:"d-block mb-1",children:"Affiliate Disclosure"}),o.jsx("p",{className:"mb-0",children:a}),o.jsx("p",{className:"mb-0 mt-2",children:"This helps support our free educational content. Thank you for your support!"})]})]})}),u=()=>o.jsxs("span",{className:r(),title:"Affiliate Disclosure",children:[l(),a]});switch(e){case"banner":return c();case"footer":return h();case"inline":default:return u()}},Vp=({children:s,showSidebar:e=!0,className:t=""})=>{const[i,n]=S.useState(!1),a=()=>{n(!i)},r=()=>{n(!1)};return S.useEffect(()=>{const l=c=>{const h=c.target;i&&!h.closest(".navbar")&&n(!1)};if(i)return document.addEventListener("click",l),()=>document.removeEventListener("click",l)},[i]),o.jsxs("div",{className:`layout ${t}`,children:[o.jsx("header",{className:"header-section",children:o.jsx("nav",{className:"navbar navbar-expand-lg navbar-light bg-white shadow-sm",children:o.jsxs("div",{className:"container-fluid",children:[o.jsxs("a",{className:"navbar-brand d-flex align-items-center",href:"/",children:[o.jsx("i",{className:"bi bi-calculator-fill me-2 text-primary"}),o.jsx("span",{className:"fw-bold",children:"UK Tax Calculator"})]}),o.jsx("button",{className:"navbar-toggler",type:"button",onClick:a,"aria-controls":"navbarNav","aria-expanded":i,"aria-label":"Toggle navigation",children:o.jsx("span",{className:"navbar-toggler-icon"})}),o.jsxs("div",{className:`collapse navbar-collapse ${i?"show":""}`,id:"navbarNav",children:[o.jsxs("ul",{className:"navbar-nav me-auto",children:[o.jsx("li",{className:"nav-item",children:o.jsx("a",{className:"nav-link",href:"#calculator",onClick:r,children:"Calculator"})}),o.jsx("li",{className:"nav-item",children:o.jsx("a",{className:"nav-link",href:"#about",onClick:r,children:"About"})}),o.jsx("li",{className:"nav-item",children:o.jsx("a",{className:"nav-link",href:"#help",onClick:r,children:"Help"})}),o.jsx("li",{className:"nav-item",children:o.jsx("a",{className:"nav-link",href:"#guide",onClick:r,children:"CGT Guide"})}),o.jsx("li",{className:"nav-item",children:o.jsx("a",{className:"nav-link",href:"#blog",onClick:r,children:"Blog"})}),o.jsx("li",{className:"nav-item",children:o.jsxs("a",{className:"nav-link",href:"#affiliate-demo",onClick:r,children:[o.jsx("span",{className:"badge bg-primary me-1",children:"New"}),"Resources"]})})]}),o.jsx("div",{className:"d-flex",children:o.jsx("span",{className:"navbar-text small text-muted",children:"Free UK Tax Calculator"})})]})]})})}),o.jsx("main",{className:"main-content",children:o.jsx("div",{className:"container-fluid",children:o.jsxs("div",{className:"row",children:[o.jsx("div",{className:`col ${e?"col-lg-9":"col-12"}`,children:o.jsx("div",{className:"content-wrapper py-4",children:s})}),e&&o.jsx("div",{className:"col-lg-3 d-none d-lg-block",children:o.jsx("aside",{className:"sidebar py-4",children:o.jsxs("div",{className:"sidebar-content mt-4",children:[o.jsx("div",{className:"card",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h6",{className:"card-title",children:"Need Help?"}),o.jsx("p",{className:"card-text small",children:"Check our comprehensive guide for UK capital gains tax calculations."}),o.jsx("a",{href:"/help",className:"btn btn-sm btn-outline-primary",children:"Get Help"})]})}),o.jsx("div",{className:"card mt-3",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h6",{className:"card-title",children:"About This Tool"}),o.jsx("p",{className:"card-text small",children:"Free, accurate UK tax calculations for Interactive Brokers users."}),o.jsx("a",{href:"/about",className:"btn btn-sm btn-outline-secondary",children:"Learn More"})]})})]})})})]})})}),o.jsx("footer",{className:"footer bg-dark text-light py-4 mt-5",children:o.jsxs("div",{className:"container",children:[o.jsxs("div",{className:"row",children:[o.jsxs("div",{className:"col-md-6",children:[o.jsx("h6",{children:"UK Tax Calculator"}),o.jsx("p",{className:"small mb-0",children:"Free capital gains tax calculations for UK residents."})]}),o.jsxs("div",{className:"col-md-6 text-md-end",children:[o.jsxs("div",{className:"footer-links",children:[o.jsx("a",{href:"/privacy",className:"text-light text-decoration-none me-3",children:"Privacy"}),o.jsx("a",{href:"/terms",className:"text-light text-decoration-none me-3",children:"Terms"}),o.jsx("a",{href:"/about",className:"text-light text-decoration-none",children:"About"})]}),o.jsx("p",{className:"small mt-2 mb-0 text-muted",children:"Â© 2024 UK Tax Calculator. Educational purposes only."})]})]}),o.jsx("div",{className:"row mt-3 pt-3 border-top border-secondary",children:o.jsx("div",{className:"col-12",children:o.jsx(Tn,{style:"footer",className:"text-light"})})})]})})]})},Be=({children:s,className:e="",title:t,subtitle:i,image:n,imageAlt:a="",bordered:r=!1,hoverable:l=!1,variant:c="default",header:h,footer:u,actions:m,centered:p=!1,...x})=>{const v=["card",r&&"border",l&&"card-hoverable",c!=="default"&&`border-${c}`,e].filter(Boolean).join(" "),b=["card-body",p&&"text-center"].filter(Boolean).join(" "),_=t||h,w=u||m;return o.jsxs("div",{className:v,...x,children:[n&&o.jsx("img",{src:n,alt:a,className:"card-img-top"}),_&&o.jsx("div",{className:"card-header",children:h||o.jsxs(o.Fragment,{children:[t&&o.jsx("h5",{className:"card-title",children:t}),i&&o.jsx("h6",{className:"card-subtitle mb-2 text-muted",children:i})]})}),o.jsx("div",{className:b,children:s}),w&&o.jsxs("div",{className:"card-footer",children:[u,m]})]})},Yp=[{id:"uk-tax-guide-2024",title:"Tolley's Tax Guide 2024-25",description:"The definitive guide to UK taxation including capital gains tax, income tax, and corporation tax. Essential for investors and tax professionals.",asin:"B0BTXX5N5L",affiliateUrl:"https://amzn.to/4pCCh96",imageUrl:"https://m.media-amazon.com/images/I/61v-3RYPZPL._SY522_.jpg",category:"tax",tags:["uk-tax","capital-gains","income-tax","reference"],price:"Â£143.99",rating:5,reviewCount:1,featured:!0,publishedDate:"2024-09-30",author:"Tolley",isbn:"978-0754559573"},{id:"capital-gains-tax-uk",title:"Shares and Taxation",description:"A Practical Guide to Saving Tax on Your Shares.",asin:"B08VHXMC9K",affiliateUrl:"https://amzn.to/3KkWtfx",imageUrl:"https://m.media-amazon.com/images/I/519DCz1azmL.jpg",category:"tax",tags:["capital-gains","uk-tax","property","shares"],price:"Â£13.56",rating:5,reviewCount:1,featured:!0,publishedDate:"2010-10-12",author:"Jimmy B. Prince ",isbn:""},{id:"intelligent-investor",title:"The Intelligent Investor",description:"Benjamin Graham's timeless investment principles. Essential reading for understanding value investing and building long-term wealth.",asin:"B000FC12C8",affiliateUrl:"https://amzn.to/46yvrbV",imageUrl:"https://m.media-amazon.com/images/I/71piwvkH0sL._SY522_.jpg",category:"trading",tags:["investing","value-investing","warren-buffett","classic"],price:"Â£14.45",rating:4.7,reviewCount:382,featured:!0,publishedDate:"2024-10-24",author:"Benjamin Graham",isbn:"978-0063423527"},{id:"bogleheads-guide",title:"The Bogleheads' Guide to Investing",description:"Simple, effective investment strategies from John Bogle's disciples. Perfect for passive investing and building diversified portfolios.",asin:"B00JUV01RW",affiliateUrl:"https://amzn.to/4gG21xn",imageUrl:"https://m.media-amazon.com/images/I/814Z8SEGU0L._SY522_.jpg",category:"trading",tags:["passive-investing","index-funds","portfolio","bogle"],price:"Â£16.39",rating:4.7,reviewCount:2940,featured:!1,publishedDate:"2022-02-28",author:"Taylor Larimore",isbn:"9978-1119847670"},{id:"rich-dad-poor-dad",title:"Rich Dad Poor Dad",description:"Robert Kiyosaki's bestselling guide to financial literacy. Learn about assets, liabilities, and building passive income streams.",asin:"B07C7M8SX9",affiliateUrl:"https://amzn.to/3KDzcW9",imageUrl:"https://m.media-amazon.com/images/I/81BE7eeKzAL._SY522_.jpg",category:"finance",tags:["financial-literacy","passive-income","mindset","bestseller"],price:"Â£10.87",rating:4.6,reviewCount:88909,featured:!1,publishedDate:"2022-05-19",author:"Robert T. Kiyosaki",isbn:"9978-1612681122"},{id:"uk-property-tax",title:"How to Save Property Tax 2024/25",description:"Almost 300 pages of tax planning information for landlords and property investors.",asin:"B0C45FGHJ2",affiliateUrl:"https://amzn.to/480kIto",imageUrl:"https://m.media-amazon.com/images/I/61chEPZcj1L._SY522_.jpg",category:"tax",tags:["property-tax","landlords","uk-tax"],price:"Â£28.00",rating:4.6,reviewCount:143,featured:!1,publishedDate:"2024-05-01",author:"Carl Bayley",isbn:"978-1916539653"},{id:"thinking-fast-and-slow",title:"Thinking, Fast and Slow",description:"Daniel Kahneman's classic on the two systems that drive the way we think.",asin:"0141033576",affiliateUrl:"https://www.amazon.co.uk/Thinking-Fast-Slow-Daniel-Kahneman/dp/0141033576",imageUrl:"https://m.media-amazon.com/images/I/71b3oX+p8gL._SY522_.jpg",category:"trading",tags:["psychology","behavioral-finance","decision-making"],price:"Â£10.34",rating:4.5,reviewCount:46177,featured:!1,publishedDate:"2012-05-10",author:"Daniel Kahneman",isbn:"978-0141033570"},{id:"technical-analysis-financial-markets",title:"Technical Analysis of the Financial Markets",description:"A comprehensive guide to trading methods and applications, from the 'bible' of technical analysis.",asin:"0735200661",affiliateUrl:"https://www.amazon.co.uk/Technical-Analysis-Financial-Markets-Comprehensive/dp/0735200661",imageUrl:"https://m.media-amazon.com/images/I/71+i0bV+c3L._SY522_.jpg",category:"trading",tags:["technical-analysis","charting","trading","markets"],price:"Â£38.00",rating:4.6,reviewCount:2853,featured:!1,publishedDate:"1999-01-01",author:"John J. Murphy",isbn:"978-0735200661"},{id:"mastering-the-market-cycle",title:"Mastering the Market Cycle",description:"Howard Marks provides invaluable insight into market cycles, helping you get the odds on your side.",asin:"1473695686",affiliateUrl:"https://www.amazon.co.uk/Mastering-Market-Cycle-Getting-odds/dp/1473695686/",imageUrl:"https://m.media-amazon.com/images/I/71BqS+ODoNL._SY522_.jpg",category:"trading",tags:["market-cycles","investing","howard-marks"],price:"Â£12.99",rating:4.3,reviewCount:3331,featured:!1,publishedDate:"2020-01-23",author:"Howard Marks",isbn:"978-1473695689"},{id:"reminiscences-of-a-stock-operator",title:"Reminiscences of a Stock Operator",description:"A timeless classic that provides a vivid and engaging account of a stock market speculator's life.",asin:"0471770884",affiliateUrl:"https://www.amazon.co.uk/Reminiscences-Stock-Operator-Edwin-Lefevre/dp/0471770884",imageUrl:"https://m.media-amazon.com/images/I/81+gG0oGZBL._SY522_.jpg",category:"trading",tags:["trading","biography","classic","speculation"],price:"Â£16.98",rating:4.4,reviewCount:4567,featured:!1,publishedDate:"2006-02-10",author:"Edwin LefÃ¨vre",isbn:"978-0471770886"},{id:"trading-psychology",title:"Trading in the Zone",description:"Master the psychology of trading. Essential for understanding market emotions and developing disciplined trading strategies.",asin:"B007DC7C4G",affiliateUrl:"https://amzn.to/4pFDr3y",imageUrl:"https://m.media-amazon.com/images/I/91h1hHF7awL._SY522_.jpg",category:"trading",tags:["psychology","trading-mindset","discipline","emotions"],price:"Â£27.80",rating:4.6,reviewCount:9202,featured:!0,publishedDate:"2001-01-01",author:"Mark Douglas",isbn:"978-0735201446"},{id:"uk-business-tax",title:"TAXTOPIA",description:"How I Discovered the Injustices, Scams and Guilty Secrets of the Tax Evasion Game",asin:"B0D12EFG34",affiliateUrl:"https://amzn.to/3KkZfS3",imageUrl:"https://m.media-amazon.com/images/I/61PCti3j6yL._SY522_.jpg",category:"business",tags:["business-tax","corporation-tax","vat","small-business"],price:"Â£6.59",rating:4.5,reviewCount:583,featured:!1,publishedDate:"2024-02-20",author:"The Rebel Accountant",isbn:"978-1800960879"},{id:"thinking-fast-and-slow",title:"Thinking, Fast and Slow",description:"Daniel Kahneman's seminal work on the two systems that drive the way we think. Essential for understanding and overcoming cognitive biases in trading.",asin:"0141033576",affiliateUrl:"https://www.amazon.co.uk/Thinking-Fast-Slow-Daniel-Kahneman/dp/0141033576",imageUrl:"https://m.media-amazon.com/images/I/71m6X-iOAOL._SY522_.jpg",category:"trading",tags:["psychology","cognitive-bias","mindset","kahneman"],price:"Â£11.99",rating:4.6,reviewCount:25e3,featured:!0,publishedDate:"2012-04-10",author:"Daniel Kahneman",isbn:"978-0141033570"},{id:"technical-analysis-of-financial-markets",title:"Technical Analysis of the Financial Markets",description:"A comprehensive guide to technical analysis, considered by many to be the bible of the subject. Covers chart patterns, indicators, and trading theory.",asin:"0735200661",affiliateUrl:"https://www.amazon.co.uk/Technical-Analysis-Financial-Markets-Comprehensive/dp/0735200661",imageUrl:"https://m.media-amazon.com/images/I/71p6T1m2VjL._SY522_.jpg",category:"trading",tags:["technical-analysis","charting","indicators","classic"],price:"Â£65.50",rating:4.7,reviewCount:4500,featured:!1,publishedDate:"1999-01-15",author:"John J. Murphy",isbn:"978-0735200661"},{id:"mastering-the-market-cycle",title:"Mastering the Market Cycle: Getting the Odds on Your Side",description:"Howard Marks provides a brilliant framework for understanding market cycles, helping investors know where they stand and how to act.",asin:"147214044X",affiliateUrl:"https://www.amazon.co.uk/Mastering-Market-Cycle-Getting-odds/dp/1473695686/",imageUrl:"https://m.media-amazon.com/images/I/71y3-f-i2AL._SY522_.jpg",category:"investing",tags:["market-cycles","investing-strategy","howard-marks","economics"],price:"Â£12.99",rating:4.6,reviewCount:2300,featured:!1,publishedDate:"2020-07-09",author:"Howard Marks",isbn:"978-1472140443"},{id:"reminiscences-of-a-stock-operator",title:"Reminiscences of a Stock Operator",description:"A fictionalized biography of Jesse Livermore, this book is a timeless classic on speculation, crowd psychology, and the art of trading.",asin:"0471770884",affiliateUrl:"https://amzn.to/433dvVR",imageUrl:"https://m.media-amazon.com/images/I/815fdzmtwAL._SY522_.jpg",category:"trading",tags:["classic","trading-psychology","speculation","jesse-livermore"],price:"Â£16.98",rating:4.4,reviewCount:4567,featured:!1,publishedDate:"2006-05-12",author:"Edwin LefÃ¨vre",isbn:"978-0471770886"}],Kp={products:Yp},Gp=()=>{console.log("[LandingPage] Component rendering");const s=pd(),e=()=>{console.log("[LandingPage] Start Calculation button clicked"),s("/calculator")},t=()=>{s("/blog")},i=()=>{s("/guide")},n=Kp.products.filter(a=>a.featured).slice(0,6).map(a=>({...a,fallbackImageUrl:a.fallbackImageUrl||"/images/book-placeholder.jpg"}));return o.jsxs("div",{className:"landing-page",children:[o.jsxs("section",{className:"hero-section py-5 mb-5",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",position:"relative",overflow:"hidden"},children:[o.jsx("div",{className:"container",children:o.jsxs("div",{className:"row align-items-center min-vh-75",children:[o.jsxs("div",{className:"col-lg-7",children:[o.jsxs("h1",{className:"display-3 fw-bold mb-4",children:["UK Tax Calculator for",o.jsx("span",{className:"d-block text-warning",children:"Interactive Brokers"})]}),o.jsx("p",{className:"lead mb-4 fs-5",children:"Calculate your UK capital gains tax, dividend income, and portfolio performance from IBKR transactions. HMRC compliant calculations with detailed reporting."}),o.jsxs("div",{className:"d-flex gap-3 mb-4 flex-wrap",children:[o.jsxs("button",{onClick:e,className:"btn btn-light btn-lg px-4 py-3 fw-semibold",children:[o.jsx("i",{className:"fas fa-calculator me-2"}),"Start Calculation"]}),o.jsxs("button",{onClick:i,className:"btn btn-outline-light btn-lg px-4 py-3",children:[o.jsx("i",{className:"fas fa-book me-2"}),"CGT Guide"]})]}),o.jsxs("div",{className:"d-flex gap-4 text-light small opacity-90 flex-wrap",children:[o.jsxs("div",{className:"d-flex align-items-center",children:[o.jsx("i",{className:"fas fa-shield-alt me-2"}),"HMRC Compliant"]}),o.jsxs("div",{className:"d-flex align-items-center",children:[o.jsx("i",{className:"fas fa-users me-2"}),"10k+ Users"]}),o.jsxs("div",{className:"d-flex align-items-center",children:[o.jsx("i",{className:"fas fa-star me-2"}),"Free to Use"]})]})]}),o.jsx("div",{className:"col-lg-5",children:o.jsx(Be,{className:"bg-white bg-opacity-10 backdrop-blur border-0 text-white",children:o.jsxs("div",{className:"card-body text-center",children:[o.jsxs("h5",{className:"card-title text-warning mb-3",children:[o.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),"CGT Rate Changes 2024-25"]}),o.jsx("p",{className:"card-text mb-3",children:"Major capital gains tax increases from 30 October 2024:"}),o.jsxs("div",{className:"row text-center mb-3",children:[o.jsxs("div",{className:"col-6",children:[o.jsx("small",{className:"text-light",children:"Before Oct 30"}),o.jsx("div",{className:"fw-bold",children:"10% | 20%"})]}),o.jsxs("div",{className:"col-6",children:[o.jsx("small",{className:"text-light",children:"From Oct 30"}),o.jsx("div",{className:"fw-bold text-warning",children:"18% | 24%"})]})]}),o.jsx("button",{onClick:i,className:"btn btn-warning btn-sm",children:"Read Full Guide"})]})})})]})}),o.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 opacity-10",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='4'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,backgroundRepeat:"repeat",pointerEvents:"none"}})]}),o.jsx("section",{className:"py-5 mb-5",children:o.jsxs("div",{className:"container",children:[o.jsx("div",{className:"row text-center mb-5",children:o.jsxs("div",{className:"col-lg-8 mx-auto",children:[o.jsx("h2",{className:"display-5 fw-bold mb-3",children:"Why Choose Our Tax Calculator?"}),o.jsx("p",{className:"lead text-muted",children:"Comprehensive UK tax calculations designed specifically for Interactive Brokers users"})]})}),o.jsxs("div",{className:"row g-4",children:[o.jsx("div",{className:"col-md-4",children:o.jsx(Be,{className:"feature-card h-100 border-0 shadow-sm",children:o.jsxs("div",{className:"card-body text-center p-4",children:[o.jsx("div",{className:"bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3",style:{width:"70px",height:"70px"},children:o.jsx("i",{className:"fas fa-calculator fa-xl"})}),o.jsx("h5",{className:"card-title fw-bold mb-3",children:"HMRC Compliant"}),o.jsx("p",{className:"card-text text-muted",children:"Accurate UK tax calculations following HMRC guidelines for capital gains, dividends, and currency gains."})]})})}),o.jsx("div",{className:"col-md-4",children:o.jsx(Be,{className:"feature-card h-100 border-0 shadow-sm",children:o.jsxs("div",{className:"card-body text-center p-4",children:[o.jsx("div",{className:"bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3",style:{width:"70px",height:"70px"},children:o.jsx("i",{className:"fas fa-chart-line fa-xl"})}),o.jsx("h5",{className:"card-title fw-bold mb-3",children:"Portfolio Analytics"}),o.jsx("p",{className:"card-text text-muted",children:"Comprehensive portfolio analysis with performance metrics, market breakdown, and current holdings."})]})})}),o.jsx("div",{className:"col-md-4",children:o.jsx(Be,{className:"feature-card h-100 border-0 shadow-sm",children:o.jsxs("div",{className:"card-body text-center p-4",children:[o.jsx("div",{className:"bg-info text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3",style:{width:"70px",height:"70px"},children:o.jsx("i",{className:"fas fa-file-alt fa-xl"})}),o.jsx("h5",{className:"card-title fw-bold mb-3",children:"Detailed Reports"}),o.jsx("p",{className:"card-text text-muted",children:"Generate comprehensive reports in multiple formats for tax filing and portfolio review."})]})})})]})]})}),o.jsx("section",{className:"py-5 mb-5 bg-light",children:o.jsxs("div",{className:"container",children:[o.jsx("div",{className:"row text-center mb-5",children:o.jsxs("div",{className:"col-lg-10 mx-auto",children:[o.jsx("h2",{className:"display-5 fw-bold mb-3",children:"How UK Capital Gains Tax Calculation Works"}),o.jsx("p",{className:"lead text-muted mb-4",children:"Understanding the tax calculation process helps you prepare the right data and interpret your results"})]})}),o.jsx("div",{className:"row mb-5",children:o.jsx("div",{className:"col-lg-8 mx-auto",children:o.jsxs("div",{className:"bg-white p-4 rounded shadow-sm mb-4",children:[o.jsx("h4",{className:"fw-bold mb-3 text-primary",children:"ðŸ“Š The Tax Calculation Process"}),o.jsx("p",{className:"mb-3",children:"UK Capital Gains Tax (CGT) is calculated on the profit you make when you sell (dispose of) shares or other assets. The calculator follows HMRC rules to determine your taxable gains:"}),o.jsxs("ul",{className:"mb-3",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Identify Disposals:"})," Track when you sell shares and match them with acquisition costs"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Calculate Base Cost:"})," Use purchase price, fees, and allowable costs to determine your base cost"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Apply Section 104 Pooling:"})," For remaining shares, use average cost from your share pool"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Calculate Gain/Loss:"})," Subtract base cost from disposal proceeds"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Apply Reliefs & Allowances:"})," Subtract annual exemption (Â£12,300 for 2024-25)"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Apply Tax Rates:"})," 10% or 20% on remaining gains (18% or 24% from Oct 2024)"]})]}),o.jsx("div",{className:"alert alert-info border-0",children:o.jsxs("small",{children:[o.jsx("strong",{children:"Note:"})," The calculator processes your transaction history to apply the correct matching rules (same-day, 30-day bed & breakfast, and Section 104 pooling) as required by HMRC."]})})]})})}),o.jsxs("div",{className:"row g-4",children:[o.jsx("div",{className:"col-md-6 col-lg-3",children:o.jsxs("div",{className:"text-center h-100",children:[o.jsx("div",{className:"bg-primary text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3 fw-bold fs-3",style:{width:"80px",height:"80px"},children:"1"}),o.jsx("h5",{className:"fw-bold mb-3",children:"Export Your Data"}),o.jsx("p",{className:"text-muted mb-3",children:"Download transaction reports from your broker (IBKR, Hargreaves Lansdown, etc.) in QFX or CSV format"}),o.jsx("small",{className:"text-muted",children:o.jsx("a",{href:"#guide",className:"text-decoration-none",children:"ðŸ“– View detailed guides â†’"})})]})}),o.jsx("div",{className:"col-md-6 col-lg-3",children:o.jsxs("div",{className:"text-center h-100",children:[o.jsx("div",{className:"bg-success text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3 fw-bold fs-3",style:{width:"80px",height:"80px"},children:"2"}),o.jsx("h5",{className:"fw-bold mb-3",children:"Upload & Calculate"}),o.jsx("p",{className:"text-muted mb-3",children:"Upload your file and select tax year. The calculator processes all transactions and applies HMRC rules"}),o.jsx("small",{className:"text-muted",children:o.jsx("a",{href:"#calculator",className:"text-decoration-none",children:"ðŸ§® Start calculation â†’"})})]})}),o.jsx("div",{className:"col-md-6 col-lg-3",children:o.jsxs("div",{className:"text-center h-100",children:[o.jsx("div",{className:"bg-info text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3 fw-bold fs-3",style:{width:"80px",height:"80px"},children:"3"}),o.jsx("h5",{className:"fw-bold mb-3",children:"Review Results"}),o.jsx("p",{className:"text-muted mb-3",children:"Get detailed breakdown of gains, losses, tax owed, and portfolio performance analysis"}),o.jsx("small",{className:"text-muted",children:"Includes Section 104 pools and disposal matching details"})]})}),o.jsx("div",{className:"col-md-6 col-lg-3",children:o.jsxs("div",{className:"text-center h-100",children:[o.jsx("div",{className:"bg-warning text-white rounded-circle d-inline-flex align-items-center justify-content-center mb-3 fw-bold fs-3",style:{width:"80px",height:"80px"},children:"4"}),o.jsx("h5",{className:"fw-bold mb-3",children:"File Your Return"}),o.jsx("p",{className:"text-muted mb-3",children:"Use the detailed reports to complete your Self Assessment tax return with confidence"}),o.jsx("small",{className:"text-muted",children:"Download CSV/JSON reports for your records"})]})})]})]})}),o.jsx("section",{className:"py-5 mb-5",children:o.jsxs("div",{className:"container",children:[o.jsx("div",{className:"row text-center mb-5",children:o.jsxs("div",{className:"col-lg-8 mx-auto",children:[o.jsx("h2",{className:"display-5 fw-bold mb-3",children:"What Data Do You Need?"}),o.jsx("p",{className:"lead text-muted",children:"The calculator supports multiple formats - choose what works best for your broker"})]})}),o.jsxs("div",{className:"row g-4 mb-4",children:[o.jsx("div",{className:"col-lg-6",children:o.jsxs(Be,{className:"h-100 border-primary",children:[o.jsx("div",{className:"card-header bg-primary text-white",children:o.jsxs("h5",{className:"mb-0",children:[o.jsx("i",{className:"fas fa-file-code me-2"}),"Interactive Brokers (QFX Format)"]})}),o.jsxs("div",{className:"card-body",children:[o.jsx("p",{className:"card-text",children:"Export your activity statement in Quicken (QFX) format from IBKR's Client Portal. This format includes all transaction details, currency conversions, and fees."}),o.jsx("h6",{children:"What it contains:"}),o.jsxs("ul",{className:"small mb-3",children:[o.jsx("li",{children:"Buy/sell transactions with exact dates and prices"}),o.jsx("li",{children:"Currency conversion rates"}),o.jsx("li",{children:"Commission and fees"}),o.jsx("li",{children:"Stock splits and corporate actions"})]}),o.jsx("button",{onClick:()=>window.location.hash="guide",className:"btn btn-outline-primary btn-sm",children:"How to Export from IBKR â†’"})]})]})}),o.jsx("div",{className:"col-lg-6",children:o.jsxs(Be,{className:"h-100 border-success",children:[o.jsx("div",{className:"card-header bg-success text-white",children:o.jsxs("h5",{className:"mb-0",children:[o.jsx("i",{className:"fas fa-file-csv me-2"}),"CSV Format (Multiple Brokers)"]})}),o.jsxs("div",{className:"card-body",children:[o.jsx("p",{className:"card-text",children:"Use CSV exports from Sharesight, Hargreaves Lansdown, Fidelity, or create your own CSV file following our standard format specification."}),o.jsx("h6",{children:"Required columns:"}),o.jsxs("ul",{className:"small mb-3",children:[o.jsx("li",{children:"Date, Symbol, Quantity, Price"}),o.jsx("li",{children:"Total Amount, Currency"}),o.jsx("li",{children:"Transaction Type (BUY/SELL)"}),o.jsx("li",{children:"Optional: Fees, Exchange Rates"})]}),o.jsx("button",{onClick:()=>window.location.hash="guide",className:"btn btn-outline-success btn-sm",children:"CSV Format Guide â†’"})]})]})})]}),o.jsx("div",{className:"row",children:o.jsx("div",{className:"col-lg-8 mx-auto text-center",children:o.jsxs("div",{className:"alert alert-light border",children:[o.jsx("h6",{className:"fw-bold mb-2",children:"ðŸ’¡ Pro Tips for Better Results"}),o.jsxs("ul",{className:"text-start d-inline-block mb-0 small",children:[o.jsx("li",{children:"Export data for complete tax years to ensure accurate calculations"}),o.jsx("li",{children:"Include all transactions (buys, sells, dividends, fees) for comprehensive analysis"}),o.jsx("li",{children:"Check for corporate actions (splits, mergers) that may affect your cost basis"}),o.jsx("li",{children:"Keep records of any additional costs (stamp duty, transfer fees) for manual adjustment"})]})]})})})]})}),o.jsx("section",{className:"py-5 mb-5",children:o.jsxs("div",{className:"container",children:[o.jsxs("div",{className:"row align-items-center mb-5",children:[o.jsxs("div",{className:"col-lg-8",children:[o.jsx("h2",{className:"display-5 fw-bold mb-3",children:"UK Tax & Investment Blog"}),o.jsx("p",{className:"lead text-muted",children:"Expert insights, guides, and updates on UK tax policy and investment strategies"})]}),o.jsx("div",{className:"col-lg-4 text-lg-end",children:o.jsxs("button",{onClick:t,className:"btn btn-outline-primary btn-lg",children:["View All Articles",o.jsx("i",{className:"fas fa-arrow-right ms-2"})]})})]}),o.jsxs("div",{className:"row g-4",children:[o.jsx("div",{className:"col-md-4",children:o.jsx(Be,{className:"h-100 border-0 shadow-sm",children:o.jsxs("div",{className:"card-body",children:[o.jsx("div",{className:"badge bg-primary mb-3",children:"Tax Guide"}),o.jsx("h5",{className:"card-title",children:"Understanding UK Capital Gains Tax"}),o.jsx("p",{className:"card-text text-muted",children:"Complete guide to CGT calculations, allowances, and optimization strategies for 2024-25."}),o.jsx("button",{onClick:()=>window.location.hash="blog/post/understanding-uk-capital-gains-tax",className:"btn btn-sm btn-outline-primary",children:"Read More"})]})})}),o.jsx("div",{className:"col-md-4",children:o.jsx(Be,{className:"h-100 border-0 shadow-sm",children:o.jsxs("div",{className:"card-body",children:[o.jsx("div",{className:"badge bg-success mb-3",children:"Strategy"}),o.jsx("h5",{className:"card-title",children:"Tax-Efficient Investment Strategies"}),o.jsx("p",{className:"card-text text-muted",children:"Learn how to minimize your tax burden while maximizing investment returns."}),o.jsx("button",{onClick:()=>window.location.hash="blog/post/tax-efficient-investment-strategies",className:"btn btn-sm btn-outline-primary",children:"Read More"})]})})}),o.jsx("div",{className:"col-md-4",children:o.jsx(Be,{className:"h-100 border-0 shadow-sm",children:o.jsxs("div",{className:"card-body",children:[o.jsx("div",{className:"badge bg-info mb-3",children:"How-To"}),o.jsx("h5",{className:"card-title",children:"Using Interactive Brokers Data"}),o.jsx("p",{className:"card-text text-muted",children:"Step-by-step guide to extracting and processing IBKR data for UK tax calculations."}),o.jsx("button",{onClick:()=>window.location.hash="blog/post/using-interactive-brokers-data",className:"btn btn-sm btn-outline-primary",children:"Read More"})]})})})]})]})}),o.jsx("section",{className:"py-5 mb-5 bg-light",children:o.jsxs("div",{className:"container",children:[o.jsx("div",{className:"row text-center mb-5",children:o.jsxs("div",{className:"col-lg-8 mx-auto",children:[o.jsx("h2",{className:"display-5 fw-bold mb-3",children:"Recommended Resources"}),o.jsx("p",{className:"lead text-muted",children:"Essential books and tools for UK investors and taxpayers"})]})}),o.jsx(Dt,{products:n,columns:{xs:1,sm:3,md:3,lg:3,xl:3},showRatings:!0,showCategories:!0,layout:"vertical",className:"justify-content-center"})]})}),o.jsx("section",{className:"py-5 text-center",style:{background:"linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)"},children:o.jsx("div",{className:"container",children:o.jsx("div",{className:"row justify-content-center",children:o.jsxs("div",{className:"col-lg-8",children:[o.jsx("h2",{className:"display-5 fw-bold mb-4",children:"Ready to Calculate Your UK Taxes?"}),o.jsx("p",{className:"lead text-muted mb-4",children:"Join thousands of UK investors who trust our platform for accurate tax calculations"}),o.jsxs("div",{className:"d-flex gap-3 justify-content-center flex-wrap",children:[o.jsxs("button",{onClick:e,className:"btn btn-primary btn-lg px-5 py-3",children:[o.jsx("i",{className:"fas fa-calculator me-2"}),"Start Free Calculation"]}),o.jsxs("button",{onClick:t,className:"btn btn-outline-primary btn-lg px-5 py-3",children:[o.jsx("i",{className:"fas fa-book-open me-2"}),"Read Our Guides"]})]}),o.jsxs("div",{className:"mt-4 small text-muted",children:[o.jsx("i",{className:"fas fa-lock me-1"}),"Your data is processed securely and never stored permanently"]})]})})})}),o.jsxs("section",{className:"d-none",children:[o.jsx("h3",{children:"UK Tax Calculator for Interactive Brokers Users"}),o.jsx("p",{children:"Calculate capital gains tax, dividend tax, and currency gains for UK investors using Interactive Brokers. Our HMRC-compliant calculator processes IBKR activity statements to generate accurate tax calculations for your Self Assessment return."}),o.jsx("h4",{children:"Features:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Capital Gains Tax calculation with Section 104 pooling"}),o.jsx("li",{children:"Dividend income tax calculation"}),o.jsx("li",{children:"Currency gain/loss calculation"}),o.jsx("li",{children:"Portfolio performance analysis"}),o.jsx("li",{children:"HMRC-ready reports"}),o.jsx("li",{children:"Support for stocks, ETFs, and other securities"})]}),o.jsx("h4",{children:"Keywords:"}),o.jsx("p",{children:"UK tax calculator, Interactive Brokers tax, IBKR tax, capital gains tax calculator, dividend tax calculator, CGT calculator, HMRC compliance, UK investment tax, Section 104 pooling, Self Assessment, tax return, portfolio analysis"})]})]})};async function qp({file:s,taxYear:e,analysisType:t}){const i=window.location.origin+"/prod",n=new FormData;n.append("file",s),n.append("tax_year",e),n.append("analysis_type",t);const a=await fetch(i+"/calculate",{method:"POST",body:n});if(!a.ok){let l="HTTP "+a.status;try{const c=await a.json();c.error&&(l=c.error)}catch{}throw new Error(l)}return{raw:await a.json()}}const Lt=({variant:s="info",title:e,icon:t,dismissible:i=!1,onDismiss:n,children:a,className:r="",...l})=>{const c=["alert",`alert-${s}`,i&&"alert-dismissible",r].filter(Boolean).join(" ");return o.jsxs("div",{className:c,role:"alert",...l,children:[e&&o.jsxs("h4",{className:"alert-heading",children:[t&&o.jsx("i",{className:`fas ${t} me-2`}),e]}),!e&&t&&o.jsx("i",{className:`fas ${t} me-2`}),a,i&&o.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:n})]})};Lt.displayName="Alert";const Ln=({size:s="md",variant:e="border",color:t,text:i="Loading...",label:n,centered:a=!1,inline:r=!1,className:l="",...c})=>{const h=[e==="border"?"spinner-border":"spinner-grow",s==="sm"?e==="border"?"spinner-border-sm":"spinner-grow-sm":"",t?`text-${t}`:"",l].filter(Boolean).join(" "),u=[a?"d-flex justify-content-center align-items-center":"",r?"d-inline-flex":""].filter(Boolean).join(" "),m=s==="lg"?{width:"3rem",height:"3rem"}:{},p=o.jsx("div",{...c,className:h,role:"status","aria-hidden":"true",style:{...m,...c.style},children:o.jsx("span",{className:"visually-hidden",children:i===""?"":i||"Loading..."})});return u?o.jsxs("div",{className:u,children:[n&&o.jsx("span",{className:"me-2",children:n}),p]}):n?o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"me-2",children:n}),p]}):p},ir=Gn.forwardRef(({options:s=[],size:e="md",isValid:t,placeholder:i,className:n="",disabled:a,required:r,multiple:l,...c},h)=>{const u=["form-select",e==="sm"&&"form-select-sm",e==="lg"&&"form-select-lg",t===!0&&"is-valid",t===!1&&"is-invalid",n].filter(Boolean).join(" "),m={};return t!==void 0&&(m["aria-invalid"]=!t),o.jsxs("select",{ref:h,className:u,disabled:a,required:r,multiple:l,...m,...c,children:[i&&o.jsx("option",{value:"",disabled:!0,children:i}),s.map((p,x)=>o.jsx("option",{value:p.value,disabled:p.disabled,children:p.label},`${p.value}-${x}`))]})});ir.displayName="Select";const Xp=()=>o.jsxs("div",{className:"ibkr-guide",children:[o.jsx("h4",{children:"How to Export Data from Interactive Brokers"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("h5",{children:"ðŸ† Recommended: QFX Export (Most Comprehensive)"}),o.jsx("p",{className:"mb-3",children:"QFX files provide the most complete data for UK tax calculations:"}),o.jsxs("ol",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Navigate to Reports"}),":",o.jsxs("ul",{children:[o.jsxs("li",{children:["From the main menu, select ",o.jsx("strong",{children:"Performance & Reports"})]}),o.jsxs("li",{children:["Choose ",o.jsx("strong",{children:"Statements"})," from the dropdown"]})]})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Select Third-Party Downloads"}),":",o.jsxs("ul",{children:[o.jsxs("li",{children:["Look for the ",o.jsx("strong",{children:"Third-Party Downloads"})," section"]}),o.jsx("li",{children:"Click to access export options"})]})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Choose Quicken Format"}),":",o.jsxs("ul",{children:[o.jsxs("li",{children:["Select ",o.jsx("strong",{children:"Quicken"})," as the export format"]}),o.jsx("li",{children:"This generates a comprehensive QFX file"})]})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Set Date Range"}),":",o.jsx("ul",{children:o.jsx("li",{children:"Choose your tax year dates (e.g., 06/04/2023 - 05/04/2024)"})})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Generate and Download"}),":",o.jsxs("ul",{children:[o.jsxs("li",{children:["Click ",o.jsx("strong",{children:"Generate"})," to create the QFX file"]}),o.jsx("li",{children:"Download when ready"})]})]})]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("h5",{children:"ðŸ”„ Alternative: CSV Export via Flex Queries"}),o.jsx("p",{className:"mb-3",children:"For CSV format or when QFX encounters issues:"}),o.jsxs("ol",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Login to Interactive Brokers"}),":",o.jsx("ul",{children:o.jsxs("li",{children:["Access your ",o.jsx("a",{href:"https://www.interactivebrokers.com.au/sso/Login",target:"_blank",rel:"noopener noreferrer",children:"Interactive Brokers account"})]})})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Navigate to Reports"}),":",o.jsxs("ul",{children:[o.jsxs("li",{children:["Click on the ",o.jsx("strong",{children:"Reports"})," tab"]}),o.jsxs("li",{children:["Select ",o.jsx("strong",{children:"Flex Queries"})]})]})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Create Activity Flex Query"}),":",o.jsx("ul",{children:o.jsxs("li",{children:["Click ",o.jsx("strong",{children:"'+'"})," next to ",o.jsx("strong",{children:"Activity Flex Query"})]})})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Select Data Sections"}),":",o.jsxs("ul",{children:[o.jsxs("li",{children:["Select ",o.jsx("strong",{children:"Trades"})," under ",o.jsx("strong",{children:"Sections"})]}),o.jsxs("li",{children:["Select ",o.jsx("strong",{children:"Executions"})," on the pop-up window"]})]})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Configure Fields"}),":",o.jsxs("ul",{children:[o.jsxs("li",{children:["Tick ",o.jsx("strong",{children:"SELECT ALL"})," to include all available fields"]}),o.jsxs("li",{children:["Click ",o.jsx("strong",{children:"Save"})]})]})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Name Your Query"}),":",o.jsx("ul",{children:o.jsxs("li",{children:["Enter a ",o.jsx("strong",{children:"Query Name"}),' (e.g., "Tax Calculator Export")']})})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Set Date Format"}),":",o.jsx("ul",{children:o.jsxs("li",{children:["Change ",o.jsx("strong",{children:"Date Format"})," to ",o.jsx("strong",{children:"mm/dd/yyyy"})," under ",o.jsx("strong",{children:"General Configuration"})]})})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Create and Run Query"}),":",o.jsxs("ul",{children:[o.jsxs("li",{children:["Click ",o.jsx("strong",{children:"Create"})," to save your query"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Run"})," the Activity Flex Query"]})]})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Set Date Range"}),":",o.jsxs("ul",{children:[o.jsxs("li",{children:["Under ",o.jsx("strong",{children:"Period"}),", select ",o.jsx("strong",{children:"Custom Date Range"})]}),o.jsx("li",{children:"Choose dates to cover all your trades"})]})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Download CSV File"}),":",o.jsxs("ul",{children:[o.jsxs("li",{children:["Set ",o.jsx("strong",{children:"Format"})," as ",o.jsx("strong",{children:"CSV"})]}),o.jsxs("li",{children:["Click ",o.jsx("strong",{children:"Run"})," and download your trades file"]})]})]})]})]}),o.jsxs("div",{className:"alert alert-info mt-3",children:[o.jsx("strong",{children:"Important:"})," QFX files contain the most comprehensive data including corporate actions, dividends, and complete fee structures. Use CSV only if QFX import encounters issues."]})]}),Qp=()=>{console.log("[CalculatorPage] Rendering component");const{state:s,dispatch:e}=Nd(),[t,i]=S.useState(null),[n,a]=S.useState("2024-2025"),[r,l]=S.useState("both"),[c,h]=S.useState(!1),[u,m]=S.useState({}),p=()=>{const v={};return t?t.name.match(/\.(csv|qfx)$/i)?t.size>10*1024*1024&&(v.file="File size must be less than 10MB"):v.file="Please select a valid CSV or QFX file":v.file="Please select a file to upload",n||(v.taxYear="Please select a tax year"),r||(v.analysisType="Please select an analysis type"),m(v),Object.keys(v).length===0},x=async v=>{if(v.preventDefault(),!!p()){e({type:"SUBMIT_START"});try{const b=new FormData;b.append("file",t),b.append("tax_year",n),b.append("analysis_type",r);const _=await qp({file:t,taxYear:n,analysisType:r});e({type:"SUBMIT_SUCCESS",payload:_}),window.location.hash="results"}catch(b){console.error("[CalculatorPage] Submission error:",b),e({type:"SUBMIT_ERROR",payload:b.message||"An error occurred during calculation"})}}};return o.jsx("div",{className:"calculator-page",children:o.jsxs("div",{className:"calculator-content",children:[o.jsx("section",{className:"calculator-hero",children:o.jsx("div",{className:"container",children:o.jsx("div",{className:"row justify-content-center",children:o.jsx("div",{className:"col-lg-8 text-center",children:o.jsxs("div",{className:"calculator-hero-content fade-in-up",children:[o.jsx("h1",{className:"mb-4",children:"UK Tax Calculator"}),o.jsx("p",{className:"lead mb-4",children:"Calculate your Capital Gains Tax for informational purposes. This tool follows HMRC guidelines but results are for reference only."}),o.jsx("div",{className:"disclaimer-banner",children:o.jsxs("div",{className:"alert alert-warning border-0 mb-4",children:[o.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),o.jsx("strong",{children:"Important:"})," This calculator is for informational purposes only. You are solely responsible for verifying calculations and submitting accurate information to HMRC. Use at your own risk."]})}),o.jsxs("div",{className:"trust-indicators",children:[o.jsxs("div",{className:"trust-indicator",children:[o.jsx("i",{className:"bi bi-info-circle trust-icon"}),o.jsx("span",{children:"Educational Tool"})]}),o.jsxs("div",{className:"trust-indicator",children:[o.jsx("i",{className:"bi bi-lock-fill trust-icon"}),o.jsx("span",{children:"Private & Secure"})]}),o.jsxs("div",{className:"trust-indicator",children:[o.jsx("i",{className:"bi bi-code-slash trust-icon"}),o.jsx("span",{children:"Open Source"})]}),o.jsxs("div",{className:"trust-indicator",children:[o.jsx("i",{className:"bi bi-clock-fill trust-icon"}),o.jsx("span",{children:"Instant Results"})]})]})]})})})})}),o.jsx("section",{className:"input-requirements-section py-4 mb-4 bg-light",children:o.jsx("div",{className:"container",children:o.jsx("div",{className:"row justify-content-center",children:o.jsx("div",{className:"col-lg-10",children:o.jsxs("div",{className:"bg-white p-4 rounded shadow-sm",children:[o.jsxs("h3",{className:"h5 mb-3 text-primary",children:[o.jsx("i",{className:"fas fa-info-circle me-2"}),"Input File Requirements"]}),o.jsx("p",{className:"mb-3 small text-muted",children:"The calculator supports QFX files from Interactive Brokers and CSV files from multiple brokers. Your file should contain all buy/sell transactions for accurate tax calculations."}),o.jsxs("div",{className:"row g-3",children:[o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"border-start border-primary border-4 ps-3",children:[o.jsxs("h6",{className:"fw-bold text-primary mb-2",children:[o.jsx("i",{className:"fas fa-file-code me-1"}),"QFX Format (Interactive Brokers)"]}),o.jsxs("ul",{className:"small mb-2",children:[o.jsx("li",{children:"Export from IBKR Client Portal â†’ Reports â†’ Third-Party Downloads â†’ Quicken"}),o.jsx("li",{children:"Includes currency conversions and fees automatically"}),o.jsx("li",{children:"Handles stock splits and corporate actions"}),o.jsx("li",{children:"Best for comprehensive IBKR accounts"})]}),o.jsx("button",{className:"btn btn-link btn-sm p-0 text-decoration-none",onClick:()=>window.location.hash="guide",children:"Detailed IBKR Export Guide â†’"})]})}),o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"border-start border-success border-4 ps-3",children:[o.jsxs("h6",{className:"fw-bold text-success mb-2",children:[o.jsx("i",{className:"fas fa-file-csv me-1"}),"CSV Format (Multiple Brokers)"]}),o.jsxs("ul",{className:"small mb-2",children:[o.jsx("li",{children:"Works with Sharesight, Hargreaves Lansdown, Fidelity, etc."}),o.jsx("li",{children:"Requires specific column format (see guide below)"}),o.jsx("li",{children:"Manual currency conversion may be needed"}),o.jsx("li",{children:"Good for non-IBKR brokers or custom data"})]}),o.jsx("button",{className:"btn btn-link btn-sm p-0 text-decoration-none",onClick:()=>window.location.hash="guide",children:"CSV Format Specification â†’"})]})})]}),o.jsx("div",{className:"alert alert-warning border-0 mt-3 mb-0",children:o.jsxs("small",{children:[o.jsx("strong",{children:"Important:"})," For accurate results, export data covering complete tax years. Include all transactions (buys, sells, dividends, fees) from your chosen period."]})})]})})})})}),o.jsx("div",{className:"container",children:o.jsx("div",{className:"row justify-content-center",children:o.jsx("div",{className:"col-lg-8 col-xl-7",children:o.jsxs("div",{className:"calculator-form-card p-4 p-md-5 mb-5",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("h2",{className:"h4 mb-2",children:"Upload Your Portfolio Data"}),o.jsx("p",{className:"text-muted",children:"Get started by uploading your transaction file"})]}),o.jsxs("form",{onSubmit:x,children:[o.jsxs("div",{className:"modern-form-field",children:[o.jsxs("label",{className:"modern-form-label",children:[o.jsx("span",{className:"emoji",children:"ðŸ“"}),"Upload Your Portfolio File *"]}),u.file&&o.jsx("div",{className:"alert alert-danger py-2 px-3 mb-3",children:o.jsx("small",{children:u.file})}),o.jsxs("div",{className:"modern-file-upload",onClick:()=>{const v=document.createElement("input");v.type="file",v.accept=".csv,.qfx,.ofx",v.onchange=b=>{var w;const _=b.target;(w=_.files)!=null&&w[0]&&i(_.files[0])},v.click()},children:[o.jsx("div",{className:"file-upload-icon",children:o.jsx("i",{className:"bi bi-cloud-upload"})}),o.jsx("div",{className:"file-upload-text",children:t?"Change File":"Choose File to Upload"}),o.jsx("div",{className:"file-upload-subtext",children:"CSV or QFX files from IBKR, HL, Sharesight, etc. (Max 10MB)"}),o.jsx("button",{className:"btn btn-link btn-sm mt-2",onClick:v=>{v.stopPropagation(),h(!c)},children:"How to get my QFX file from IBKR?"})]}),c&&o.jsx(Xp,{}),t&&o.jsxs("div",{className:"selected-file-display",children:[o.jsx("div",{className:"file-icon",children:o.jsx("i",{className:"bi bi-file-earmark-text"})}),o.jsxs("div",{className:"flex-grow-1",children:[o.jsx("div",{className:"fw-semibold",children:t.name}),o.jsxs("div",{className:"text-muted small",children:[(t.size/1024).toFixed(1)," KB â€¢ ",t.type||"Unknown type"]})]}),o.jsx("div",{className:"text-success",children:o.jsx("i",{className:"bi bi-check-circle-fill"})})]})]}),o.jsxs("div",{className:"row",children:[o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"modern-form-field",children:[o.jsxs("label",{className:"modern-form-label",children:[o.jsx("span",{className:"emoji",children:"ðŸ“…"}),"Tax Year *"]}),u.taxYear&&o.jsx("div",{className:"alert alert-danger py-2 px-3 mb-2",children:o.jsx("small",{children:u.taxYear})}),o.jsx(ir,{value:n,onChange:v=>a(v.target.value),disabled:s.status==="submitting",className:"modern-select",options:[{value:"2024-2025",label:"2024-2025"},{value:"2023-2024",label:"2023-2024"},{value:"2022-2023",label:"2022-2023"},{value:"2021-2022",label:"2021-2022"}]})]})}),o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"modern-form-field",children:[o.jsxs("label",{className:"modern-form-label",children:[o.jsx("span",{className:"emoji",children:"ðŸ“Š"}),"Analysis Type *"]}),u.analysisType&&o.jsx("div",{className:"alert alert-danger py-2 px-3 mb-2",children:o.jsx("small",{children:u.analysisType})}),o.jsx(ir,{value:r,onChange:v=>l(v.target.value),disabled:s.status==="submitting",className:"modern-select",options:[{value:"both",label:"Tax & Portfolio Analysis"},{value:"tax",label:"Tax Analysis Only"},{value:"portfolio",label:"Portfolio Analysis Only"}]})]})})]}),o.jsxs("div",{className:"text-center mt-4",children:[o.jsx("button",{type:"submit",className:"calculator-submit-btn w-100",disabled:s.status==="submitting"||!t,children:s.status==="submitting"?o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"bi bi-arrow-repeat me-2 pulse"}),"Calculating Your Tax..."]}):o.jsxs(o.Fragment,{children:[o.jsx("i",{className:"bi bi-calculator me-2"}),"Calculate My Tax & Portfolio"]})}),o.jsxs("div",{className:"mt-3",children:[o.jsxs("small",{className:"text-muted",children:[o.jsx("i",{className:"bi bi-shield-check me-1"}),"Files processed securely & deleted immediately - no data retained"]}),o.jsx("br",{}),o.jsxs("small",{className:"text-warning",children:[o.jsx("i",{className:"bi bi-exclamation-triangle me-1"}),"For educational purposes only - verify all results independently"]})]})]})]}),s.error&&o.jsxs(Lt,{variant:"danger",className:"mt-4",children:[o.jsx("strong",{children:"Error:"})," ",s.error]}),s.status==="submitting"&&!s.error&&o.jsxs("div",{className:"text-center mt-4",children:[o.jsx(Ln,{size:"lg"}),o.jsx("p",{className:"mt-2 text-muted",children:"Analyzing your portfolio..."})]}),s.result&&o.jsxs(Lt,{variant:"success",className:"mt-4",children:[o.jsx("strong",{children:"Success!"})," Calculation completed.",o.jsx("a",{href:"#results",className:"alert-link ms-2",children:"View Results â†’"})]})]})})})}),o.jsx("section",{className:"features-section",children:o.jsxs("div",{className:"container",children:[o.jsx("div",{className:"row justify-content-center mb-5",children:o.jsxs("div",{className:"col-lg-8 text-center",children:[o.jsx("h2",{className:"h3 mb-3",children:"Calculator Features"}),o.jsx("p",{className:"text-muted",children:"Free educational tool to help you understand UK tax calculations"})]})}),o.jsxs("div",{className:"row g-4 mb-5",children:[o.jsx("div",{className:"col-md-6 col-lg-3",children:o.jsxs("div",{className:"feature-card text-center",children:[o.jsx("div",{className:"feature-icon mx-auto",children:o.jsx("i",{className:"bi bi-shield-check"})}),o.jsx("h3",{className:"feature-title",children:"HMRC Guidelines"}),o.jsx("p",{className:"feature-description",children:"Follows HMRC guidelines for educational purposes. Always verify calculations independently"})]})}),o.jsx("div",{className:"col-md-6 col-lg-3",children:o.jsxs("div",{className:"feature-card text-center",children:[o.jsx("div",{className:"feature-icon mx-auto",children:o.jsx("i",{className:"bi bi-lightning-charge"})}),o.jsx("h3",{className:"feature-title",children:"Instant Results"}),o.jsx("p",{className:"feature-description",children:"Get detailed tax calculations and portfolio analysis in seconds, not hours"})]})}),o.jsx("div",{className:"col-md-6 col-lg-3",children:o.jsxs("div",{className:"feature-card text-center",children:[o.jsx("div",{className:"feature-icon mx-auto",children:o.jsx("i",{className:"bi bi-lock-fill"})}),o.jsx("h3",{className:"feature-title",children:"Data Privacy"}),o.jsx("p",{className:"feature-description",children:"Files processed securely on AWS and immediately deleted. No personal data is stored or retained"})]})}),o.jsx("div",{className:"col-md-6 col-lg-3",children:o.jsxs("div",{className:"feature-card text-center",children:[o.jsx("div",{className:"feature-icon mx-auto",children:o.jsx("i",{className:"bi bi-file-earmark-text"})}),o.jsx("h3",{className:"feature-title",children:"Multiple Formats"}),o.jsx("p",{className:"feature-description",children:"Support for IBKR QFX files, Sharesight CSV, and other major broker formats"})]})})]}),o.jsx("div",{className:"row justify-content-center",children:o.jsx("div",{className:"col-lg-10",children:o.jsx("div",{className:"disclaimer-section",children:o.jsxs("div",{className:"alert alert-info border-0 p-4",children:[o.jsxs("h4",{className:"alert-heading mb-3",children:[o.jsx("i",{className:"bi bi-info-circle me-2"}),"Important Disclaimers"]}),o.jsxs("div",{className:"row g-4",children:[o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"d-flex",children:[o.jsx("div",{className:"flex-shrink-0 me-3",children:o.jsx("i",{className:"bi bi-exclamation-triangle text-warning"})}),o.jsxs("div",{children:[o.jsx("strong",{children:"Use at Your Own Risk:"})," This calculator is provided for educational purposes only. You are solely responsible for verifying all calculations and ensuring accuracy before submitting to HMRC."]})]})}),o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"d-flex",children:[o.jsx("div",{className:"flex-shrink-0 me-3",children:o.jsx("i",{className:"bi bi-person-check text-primary"})}),o.jsxs("div",{children:[o.jsx("strong",{children:"Professional Advice:"})," Always consult with a qualified tax advisor or accountant for official tax advice and complex situations."]})]})}),o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"d-flex",children:[o.jsx("div",{className:"flex-shrink-0 me-3",children:o.jsx("i",{className:"bi bi-currency-pound text-success"})}),o.jsxs("div",{children:[o.jsx("strong",{children:"Free to Use:"})," This tool is completely free. We earn from affiliate links to tax-related books and resources to keep this service running."]})]})}),o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"d-flex",children:[o.jsx("div",{className:"flex-shrink-0 me-3",children:o.jsx("i",{className:"bi bi-shield-check text-info"})}),o.jsxs("div",{children:[o.jsx("strong",{children:"Data Privacy:"})," Files are processed securely on AWS and immediately deleted. No personal or financial data is stored or retained on our servers."]})]})})]})]})})})})]})}),o.jsx("div",{className:"container",children:o.jsx("div",{className:"row justify-content-center",children:o.jsx("div",{className:"col-lg-10",children:o.jsxs("div",{className:"mt-5",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("h2",{className:"h3 text-dark mb-2",children:"ðŸ“š Recommended Tax Resources"}),o.jsx("p",{className:"text-muted",children:"Enhance your tax knowledge with these expert-recommended guides"})]}),o.jsx(Dt,{category:"tax",limit:3,columns:{xs:1,sm:3,md:3,lg:3,xl:3},showRatings:!0,showCategories:!1,layout:"vertical"})]})})})})]})})},Tt=({children:s,className:e="",variant:t="primary",size:i="md",disabled:n=!1,loading:a=!1,type:r="button",onClick:l,icon:c,iconPosition:h="left","data-testid":u,...m})=>{const p="btn",x=`btn-${t}`,v=i!=="md"?`btn-${i}`:"",_=[p,x,v,n?"disabled":"",e].filter(Boolean).join(" "),w=A=>{if(n||a){A.preventDefault();return}l==null||l(A)},j=()=>o.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true","data-testid":"loading-spinner"}),C=()=>c?o.jsx("i",{className:`fa ${c} ${s?h==="left"?"me-2":"ms-2":""}`,"data-testid":"button-icon","aria-hidden":"true"}):null,P=()=>{if(a)return j();const A=C();return s?h==="right"?o.jsxs(o.Fragment,{children:[s,A]}):o.jsxs(o.Fragment,{children:[A,s]}):A};return o.jsx("button",{type:r,className:_,disabled:n||a,onClick:w,"aria-disabled":n||a,"aria-busy":a,"data-testid":u,...m,children:P()})};Tt.displayName="Button";const xi=({children:s,variant:e="primary",size:t,pill:i=!1,className:n="",...a})=>{const r=["badge",`bg-${e}`,t&&`badge-${t}`,i&&"rounded-pill",n].filter(Boolean).join(" ");return o.jsx("span",{className:r,...a,children:s})},Zp=({portfolioAnalysis:s,className:e=""})=>{const t=(c,h="USD")=>new Intl.NumberFormat("en-US",{style:"currency",currency:h,minimumFractionDigits:2,maximumFractionDigits:2}).format(c),i=c=>`${c>=0?"+":""}${c.toFixed(2)}%`,n=c=>c>=0?"success":"danger",a=Object.values(s.market_summaries).reduce((c,h)=>c+h.holdings.length,0),r=(c,h)=>{const u=h-c;return u>0?c/u*100:0},l=r(s.total_unrealized_gain_loss||0,s.total_portfolio_value||0);return o.jsxs(Be,{className:`portfolio-summary ${e}`,title:"Portfolio Summary",header:o.jsxs("div",{className:"d-flex align-items-center",children:[o.jsx("i",{className:"fas fa-chart-line me-2 text-primary"}),o.jsx("span",{children:"Portfolio Summary"})]}),children:[o.jsxs("div",{className:"row g-3",children:[o.jsx("div",{className:"col-md-4",children:o.jsxs("div",{className:"summary-metric",children:[o.jsx("div",{className:"metric-label text-muted small",children:"Total Portfolio Value"}),o.jsx("div",{className:"metric-value h4 mb-0 text-primary fw-bold",children:t(s.total_portfolio_value)})]})}),o.jsx("div",{className:"col-md-4",children:o.jsxs("div",{className:"summary-metric",children:[o.jsx("div",{className:"metric-label text-muted small",children:"Total Holdings"}),o.jsx("div",{className:"metric-value h4 mb-0 fw-bold",children:a})]})}),o.jsx("div",{className:"col-md-4",children:o.jsxs("div",{className:"summary-metric",children:[o.jsx("div",{className:"metric-label text-muted small",children:"Currencies"}),o.jsx("div",{className:"metric-value",children:Object.keys(s.market_summaries).map(c=>o.jsx(xi,{variant:"outline-secondary",className:"me-1 mb-1",children:c},c))})]})}),o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"summary-metric",children:[o.jsx("div",{className:"metric-label text-muted small",children:"Unrealized Gain/Loss"}),o.jsx("div",{className:"d-flex align-items-center",children:o.jsx("div",{className:`metric-value h5 mb-0 fw-bold text-${n(s.total_unrealized_gain_loss)}`,children:t(s.total_unrealized_gain_loss)})})]})}),o.jsx("div",{className:"col-md-6",children:o.jsxs("div",{className:"summary-metric",children:[o.jsx("div",{className:"metric-label text-muted small",children:"Unrealized Gain/Loss %"}),o.jsxs("div",{className:"d-flex align-items-center",children:[o.jsx(xi,{variant:n(l),className:"fs-6",children:i(l)}),o.jsx("i",{className:`fas fa-trending-${l>=0?"up":"down"} ms-2`})]})]})})]}),Object.keys(s.market_summaries).length>1&&o.jsxs("div",{className:"mt-4",children:[o.jsxs("h6",{className:"text-muted mb-3",children:[o.jsx("i",{className:"fas fa-globe me-2"}),"Breakdown by Currency"]}),o.jsx("div",{className:"row g-3",children:Object.entries(s.market_summaries).map(([c,h])=>o.jsx("div",{className:"col-md-6 col-lg-4",children:o.jsxs("div",{className:"border rounded p-3",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[o.jsx(xi,{variant:"primary",children:c}),o.jsxs("small",{className:"text-muted",children:[h.holdings.length," holdings"]})]}),o.jsx("div",{className:"metric-value h6 mb-1",children:t(h.total_market_value,c)}),o.jsxs("div",{className:`small text-${n(h.total_unrealized_gain_loss)}`,children:[t(h.total_unrealized_gain_loss,c),"(",i(r(h.total_unrealized_gain_loss||0,h.total_market_value||0)),")"]})]})},c))})]})]})},nr=(s,e)=>typeof e=="function"?e(s):typeof e=="string"?e.split(".").reduce((t,i)=>t&&t[i]!==void 0?t[i]:"",s):(typeof e=="symbol"||typeof e=="number")&&s[e]||"",Jp=(s,e,t)=>{if(!e.column||!e.direction)return s;const i=t.find(n=>n.key===e.column);return!i||!i.accessor?s:[...s].sort((n,a)=>{const r=nr(n,i.accessor),l=nr(a,i.accessor);if(r==null&&l==null)return 0;if(r==null)return e.direction==="asc"?-1:1;if(l==null)return e.direction==="asc"?1:-1;const c=String(r).toLowerCase(),h=String(l).toLowerCase(),u=Number(r),m=Number(l);return!isNaN(u)&&!isNaN(m)?e.direction==="asc"?u-m:m-u:c<h?e.direction==="asc"?-1:1:c>h?e.direction==="asc"?1:-1:0})},eg=(s,e,t)=>{const i=e*t,n=i+t;return s.slice(i,n)},tg=({currentPage:s,totalPages:e,totalItems:t,pageSize:i,onPageChange:n})=>{if(e<=1)return null;const a=s*i+1,r=Math.min((s+1)*i,t);return o.jsxs("nav",{"aria-label":"Table pagination",className:"d-flex justify-content-between align-items-center mt-3",children:[o.jsxs("div",{className:"text-muted small",children:["Showing ",a," to ",r," of ",t," entries"]}),o.jsxs("ul",{className:"pagination mb-0",children:[o.jsx("li",{className:`page-item ${s===0?"disabled":""}`,children:o.jsx("button",{className:"page-link",onClick:()=>n(s-1),disabled:s===0,"aria-label":"Previous page",children:o.jsx("i",{className:"fas fa-chevron-left","aria-hidden":"true"})})}),Array.from({length:Math.min(5,e)},(l,c)=>{let h;return e<=5||s<3?h=c:s>e-4?h=e-5+c:h=s-2+c,o.jsx("li",{className:`page-item ${s===h?"active":""}`,children:o.jsx("button",{className:"page-link",onClick:()=>n(h),"aria-label":`Go to page ${h+1}`,children:h+1})},h)}),o.jsx("li",{className:`page-item ${s===e-1?"disabled":""}`,children:o.jsx("button",{className:"page-link",onClick:()=>n(s+1),disabled:s===e-1,"aria-label":"Next page",children:o.jsx("i",{className:"fas fa-chevron-right","aria-hidden":"true"})})})]})]})},sg=({data:s,columns:e,loading:t=!1,emptyMessage:i="No data available",size:n="md",striped:a=!1,bordered:r=!1,hover:l=!1,responsive:c=!0,sortable:h=!1,defaultSort:u,onSort:m,pagination:p=!1,paginationConfig:x,currentPage:v=0,pageSize:b=10,totalItems:_,onPageChange:w,onRowClick:j,rowClassName:C,className:P="",children:A,"data-testid":O,...B})=>{const[F,$]=S.useState(u||{column:null,direction:null}),H=m?u||{column:null,direction:null}:F,Y=S.useCallback(q=>{if(!h)return;const M=H.column===q&&H.direction==="asc"?"desc":"asc",Le={column:q,direction:M};m?m(Le):$(Le)},[h,H,m]),Z=S.useMemo(()=>{let q=[...s];return h&&H.column&&H.direction&&(q=Jp(q,H,e)),p&&(q=eg(q,v,b)),q},[s,H,e,h,p,v,b]),ye=Math.ceil((_||s.length)/b),Te=["table",n==="sm"&&"table-sm",a&&"table-striped",r&&"table-bordered",l&&"table-hover"].filter(Boolean).join(" "),se=[c&&"table-responsive",t&&"position-relative opacity-50",P].filter(Boolean).join(" "),ae=S.useCallback((q,M)=>{j&&j(q,M)},[j]),me=q=>{switch(q){case"left":return"text-start";case"center":return"text-center";case"right":return"text-end";default:return""}},Me=(q,M)=>M?H.column===q?H.direction==="asc"?o.jsx("i",{className:"fas fa-sort-up ms-1","aria-hidden":"true"}):o.jsx("i",{className:"fas fa-sort-down ms-1","aria-hidden":"true"}):o.jsx("i",{className:"fas fa-sort ms-1 text-muted","aria-hidden":"true"}):null,Ne=q=>{if(H.column===q)return H.direction==="asc"?"ascending":"descending"};return o.jsxs("div",{className:se,"data-testid":O,...B,children:[t&&o.jsx("div",{className:"position-absolute top-50 start-50 translate-middle",style:{zIndex:10},children:o.jsx("div",{role:"status","aria-live":"polite","aria-label":"Loading table data",children:o.jsx(Ln,{size:"lg",text:"Loading data..."})})}),o.jsxs("table",{className:Te,role:"table",children:[o.jsx("thead",{children:o.jsx("tr",{children:e.map(q=>o.jsxs("th",{scope:"col",className:[me(q.align),q.hiddenOnMobile&&"d-none d-md-table-cell",q.sortable&&h&&"user-select-none cursor-pointer"].filter(Boolean).join(" "),style:{width:q.width},onClick:()=>q.sortable&&Y(q.key),"aria-sort":Ne(q.key),role:"columnheader",children:[q.header,Me(q.key,q.sortable&&h)]},q.key))})}),o.jsx("tbody",{children:Z.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:e.length,className:"text-center text-muted py-4",children:t?o.jsx("div",{role:"status","aria-live":"polite","aria-label":"Loading table content",children:o.jsx(Ln,{size:"sm",text:"Loading..."})}):i})}):Z.map((q,M)=>{const Le=[j&&"cursor-pointer",C&&C(q,M)].filter(Boolean).join(" ");return o.jsx("tr",{className:Le,onClick:()=>ae(q,M),role:"row",children:e.map(Pe=>{const He=Pe.accessor?nr(q,Pe.accessor):"",Ee=Pe.render?Pe.render(He,q,M):He;return o.jsx("td",{className:[me(Pe.align),Pe.hiddenOnMobile&&"d-none d-md-table-cell"].filter(Boolean).join(" "),role:"cell",children:Ee},Pe.key)})},M)})})]}),p&&ye>1&&o.jsx(tg,{currentPage:v,totalPages:ye,totalItems:_||s.length,pageSize:b,onPageChange:w||(()=>{})})]})},ig=({columns:s,...e})=>{const t=[{key:"symbol",header:"Symbol",accessor:i=>i.security.symbol,sortable:!0,width:"120px"},{key:"name",header:"Security",accessor:i=>i.security.name||i.security.symbol,sortable:!0},{key:"quantity",header:"Quantity",accessor:"quantity",sortable:!0,align:"right",render:i=>i.toLocaleString("en-GB",{maximumFractionDigits:0})},{key:"average_cost",header:"Avg Cost",accessor:"average_cost_gbp",sortable:!0,align:"right",render:i=>`Â£${i.toLocaleString("en-GB",{minimumFractionDigits:2})}`},{key:"current_value",header:"Current Value",accessor:"current_value_gbp",sortable:!0,align:"right",render:i=>`Â£${i.toLocaleString("en-GB",{minimumFractionDigits:2})}`},{key:"gain_loss",header:"Gain/Loss",accessor:"unrealized_gain_loss",sortable:!0,align:"right",render:(i,n)=>o.jsxs("span",{className:i>=0?"text-success fw-semibold":"text-danger fw-semibold",children:[i>=0?"+":"","Â£",i.toLocaleString("en-GB",{minimumFractionDigits:2}),n.total_return_pct!==void 0&&o.jsxs("small",{className:"d-block text-muted",children:["(",n.total_return_pct>=0?"+":"",n.total_return_pct.toFixed(2),"%)"]})]})}];return o.jsx(sg,{columns:s||t,...e})},ng=({marketSummaries:s,className:e=""})=>{const t=Gn.useMemo(()=>{const a=[];return Object.entries(s).forEach(([,r])=>{r.holdings.forEach(l=>{var u,m,p;const h={security:{symbol:((u=l.security)==null?void 0:u.symbol)||"N/A",name:((m=l.security)==null?void 0:m.name)||((p=l.security)==null?void 0:p.symbol)||"N/A"},quantity:l.quantity,average_cost_gbp:l.average_cost_gbp||l.current_value_gbp/l.quantity,current_value_gbp:l.current_value_gbp,total_cost_gbp:(l.average_cost_gbp||l.current_value_gbp/l.quantity)*l.quantity,unrealized_gain_loss:l.unrealized_gain_loss||0,total_return_pct:l.total_return_pct||0};a.push(h)})}),a},[s]),i=t.reduce((a,r)=>a+r.current_value_gbp,0),n=t.reduce((a,r)=>a+r.unrealized_gain_loss,0);return o.jsx(Be,{className:`holdings-table-card ${e}`,title:"Holdings Details",header:o.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[o.jsxs("div",{className:"d-flex align-items-center",children:[o.jsx("i",{className:"fas fa-table me-2 text-primary"}),o.jsx("span",{children:"Holdings Details"})]}),o.jsxs("div",{className:"d-flex gap-3",children:[o.jsxs("small",{className:"text-muted",children:[o.jsx("strong",{children:"Total Value:"})," Â£",i.toLocaleString("en-GB",{minimumFractionDigits:2})]}),o.jsxs("small",{className:`fw-bold ${n>=0?"text-success":"text-danger"}`,children:[o.jsx("strong",{children:"Total P&L:"})," ",n>=0?"+":"","Â£",n.toLocaleString("en-GB",{minimumFractionDigits:2})]})]})]}),children:o.jsx(ig,{data:t,loading:!1,pagination:!0,emptyMessage:"No holdings found",className:"holdings-results-table"})})},ag=({taxCalculations:s,className:e=""})=>{const t=l=>{const c=typeof l=="number"&&isFinite(l)?l:0;return new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP",minimumFractionDigits:2,maximumFractionDigits:2}).format(c)},i=[{label:"Capital Gains Tax",amount:Number(s.capital_gains_tax)||0,description:"Tax on capital gains from share disposals",type:"tax"},{label:"Dividend Tax",amount:Number(s.dividend_tax)||0,description:"Tax on dividend income received",type:"tax"},{label:"Total Tax Liability",amount:Number(s.total_tax_liability)||0,description:"Total tax owed to HMRC",type:"total"}],n=s.total_tax_liability>0,a=s.section_104_pools||{},r=s.disposal_calculations||[];return o.jsxs("div",{className:`tax-calculations ${e}`,children:[o.jsxs(Be,{className:"tax-summary-card mb-4",title:"Tax Summary",header:o.jsxs("div",{className:"d-flex align-items-center",children:[o.jsx("i",{className:"fas fa-calculator me-2 text-warning"}),o.jsx("span",{children:"UK Tax Calculations"})]}),children:[n&&o.jsx(Lt,{variant:"warning",className:"mb-3",dismissible:!1,children:o.jsxs("div",{className:"d-flex align-items-center",children:[o.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),o.jsxs("div",{children:[o.jsx("strong",{children:"Tax Liability Identified"}),o.jsx("div",{className:"small mt-1",children:"You may need to report these gains and pay tax. Please consult with a tax advisor."})]})]})}),o.jsx("div",{className:"row g-3",children:i.map((l,c)=>o.jsx("div",{className:"col-md-4",children:o.jsxs("div",{className:"tax-item",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[o.jsxs("div",{children:[o.jsx("div",{className:"tax-label small text-muted",children:l.label}),l.description&&o.jsx("div",{className:"tax-description small text-muted",children:l.description})]}),o.jsx(xi,{variant:l.type==="total"?l.amount>0?"danger":"success":l.amount>0?"warning":"secondary",className:"ms-2",children:l.amount>0?"Tax Due":"No Tax"})]}),o.jsx("div",{className:`tax-amount h5 mb-0 fw-bold ${l.type==="total"?l.amount>0?"text-danger":"text-success":l.amount>0?"text-warning":"text-muted"}`,children:t(l.amount)})]})},c))})]}),Object.keys(a).length>0&&o.jsxs(Be,{className:"section-104-card mb-4",title:"Section 104 Pools",header:o.jsxs("div",{className:"d-flex align-items-center",children:[o.jsx("i",{className:"fas fa-layer-group me-2 text-info"}),o.jsx("span",{children:"Section 104 Pools"})]}),children:[o.jsx("div",{className:"mb-3",children:o.jsx(Lt,{variant:"info",dismissible:!1,children:o.jsxs("div",{className:"small",children:[o.jsx("strong",{children:"Section 104 Pools"})," track the average cost of identical shares. These pools are used to calculate capital gains when shares are disposed of."]})})}),o.jsx("div",{className:"row g-3",children:Object.entries(a).map(([l,c],h)=>o.jsx("div",{className:"col-md-6 col-lg-4",children:o.jsxs("div",{className:"border rounded p-3",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[o.jsx(xi,{variant:"primary",children:l}),o.jsx("small",{className:"text-muted",children:"Pool"})]}),o.jsxs("div",{className:"pool-details",children:[o.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[o.jsx("small",{className:"text-muted",children:"Quantity:"}),o.jsx("small",{className:"fw-semibold",children:c.quantity||0})]}),o.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[o.jsx("small",{className:"text-muted",children:"Total Cost:"}),o.jsx("small",{className:"fw-semibold",children:t(c.total_cost||0)})]}),o.jsxs("div",{className:"d-flex justify-content-between",children:[o.jsx("small",{className:"text-muted",children:"Avg Cost:"}),o.jsx("small",{className:"fw-semibold",children:c.quantity>0?t((c.total_cost||0)/c.quantity):t(0)})]})]})]})},h))})]}),r.length>0&&o.jsxs(Be,{className:"disposal-calculations-card",title:"Disposal Calculations",header:o.jsxs("div",{className:"d-flex align-items-center",children:[o.jsx("i",{className:"fas fa-exchange-alt me-2 text-secondary"}),o.jsx("span",{children:"Share Disposals"})]}),children:[o.jsx("div",{className:"mb-3",children:o.jsx(Lt,{variant:"info",dismissible:!1,children:o.jsx("div",{className:"small",children:"Detailed calculations for each share disposal, showing gains/losses and tax implications."})})}),o.jsxs("div",{className:"disposal-list",children:[r.slice(0,5).map((l,c)=>o.jsx("div",{className:"disposal-item border-bottom pb-2 mb-2",children:o.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[o.jsxs("div",{children:[o.jsx("div",{className:"fw-semibold",children:l.symbol||"Unknown"}),o.jsx("small",{className:"text-muted",children:l.disposal_date||"Date not available"})]}),o.jsxs("div",{className:"text-end",children:[o.jsxs("div",{className:`fw-semibold ${(l.gain_loss||0)>=0?"text-success":"text-danger"}`,children:[(l.gain_loss||0)>=0?"+":"",t(l.gain_loss||0)]}),o.jsxs("small",{className:"text-muted",children:[l.quantity||0," shares"]})]})]})},c)),r.length>5&&o.jsx("div",{className:"text-center",children:o.jsxs("small",{className:"text-muted",children:["... and ",r.length-5," more disposals"]})})]})]})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Li(s){return s+.5|0}const Ut=(s,e,t)=>Math.max(Math.min(s,t),e);function di(s){return Ut(Li(s*2.55),0,255)}function Gt(s){return Ut(Li(s*255),0,255)}function Et(s){return Ut(Li(s/2.55)/100,0,1)}function Ol(s){return Ut(Li(s*100),0,100)}const it={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ar=[..."0123456789ABCDEF"],rg=s=>ar[s&15],og=s=>ar[(s&240)>>4]+ar[s&15],cn=s=>(s&240)>>4===(s&15),lg=s=>cn(s.r)&&cn(s.g)&&cn(s.b)&&cn(s.a);function cg(s){var e=s.length,t;return s[0]==="#"&&(e===4||e===5?t={r:255&it[s[1]]*17,g:255&it[s[2]]*17,b:255&it[s[3]]*17,a:e===5?it[s[4]]*17:255}:(e===7||e===9)&&(t={r:it[s[1]]<<4|it[s[2]],g:it[s[3]]<<4|it[s[4]],b:it[s[5]]<<4|it[s[6]],a:e===9?it[s[7]]<<4|it[s[8]]:255})),t}const dg=(s,e)=>s<255?e(s):"";function hg(s){var e=lg(s)?rg:og;return s?"#"+e(s.r)+e(s.g)+e(s.b)+dg(s.a,e):void 0}const ug=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Pd(s,e,t){const i=e*Math.min(t,1-t),n=(a,r=(a+s/30)%12)=>t-i*Math.max(Math.min(r-3,9-r,1),-1);return[n(0),n(8),n(4)]}function fg(s,e,t){const i=(n,a=(n+s/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[i(5),i(3),i(1)]}function mg(s,e,t){const i=Pd(s,1,.5);let n;for(e+t>1&&(n=1/(e+t),e*=n,t*=n),n=0;n<3;n++)i[n]*=1-e-t,i[n]+=e;return i}function pg(s,e,t,i,n){return s===n?(e-t)/i+(e<t?6:0):e===n?(t-s)/i+2:(s-e)/i+4}function kr(s){const t=s.r/255,i=s.g/255,n=s.b/255,a=Math.max(t,i,n),r=Math.min(t,i,n),l=(a+r)/2;let c,h,u;return a!==r&&(u=a-r,h=l>.5?u/(2-a-r):u/(a+r),c=pg(t,i,n,u,a),c=c*60+.5),[c|0,h||0,l]}function Nr(s,e,t,i){return(Array.isArray(e)?s(e[0],e[1],e[2]):s(e,t,i)).map(Gt)}function Cr(s,e,t){return Nr(Pd,s,e,t)}function gg(s,e,t){return Nr(mg,s,e,t)}function xg(s,e,t){return Nr(fg,s,e,t)}function Rd(s){return(s%360+360)%360}function bg(s){const e=ug.exec(s);let t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?di(+e[5]):Gt(+e[5]));const n=Rd(+e[2]),a=+e[3]/100,r=+e[4]/100;return e[1]==="hwb"?i=gg(n,a,r):e[1]==="hsv"?i=xg(n,a,r):i=Cr(n,a,r),{r:i[0],g:i[1],b:i[2],a:t}}function yg(s,e){var t=kr(s);t[0]=Rd(t[0]+e),t=Cr(t),s.r=t[0],s.g=t[1],s.b=t[2]}function vg(s){if(!s)return;const e=kr(s),t=e[0],i=Ol(e[1]),n=Ol(e[2]);return s.a<255?`hsla(${t}, ${i}%, ${n}%, ${Et(s.a)})`:`hsl(${t}, ${i}%, ${n}%)`}const Il={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Fl={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function _g(){const s={},e=Object.keys(Fl),t=Object.keys(Il);let i,n,a,r,l;for(i=0;i<e.length;i++){for(r=l=e[i],n=0;n<t.length;n++)a=t[n],l=l.replace(a,Il[a]);a=parseInt(Fl[r],16),s[l]=[a>>16&255,a>>8&255,a&255]}return s}let dn;function wg(s){dn||(dn=_g(),dn.transparent=[0,0,0,0]);const e=dn[s.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const jg=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function kg(s){const e=jg.exec(s);let t=255,i,n,a;if(e){if(e[7]!==i){const r=+e[7];t=e[8]?di(r):Ut(r*255,0,255)}return i=+e[1],n=+e[3],a=+e[5],i=255&(e[2]?di(i):Ut(i,0,255)),n=255&(e[4]?di(n):Ut(n,0,255)),a=255&(e[6]?di(a):Ut(a,0,255)),{r:i,g:n,b:a,a:t}}}function Ng(s){return s&&(s.a<255?`rgba(${s.r}, ${s.g}, ${s.b}, ${Et(s.a)})`:`rgb(${s.r}, ${s.g}, ${s.b})`)}const Ba=s=>s<=.0031308?s*12.92:Math.pow(s,1/2.4)*1.055-.055,Fs=s=>s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4);function Cg(s,e,t){const i=Fs(Et(s.r)),n=Fs(Et(s.g)),a=Fs(Et(s.b));return{r:Gt(Ba(i+t*(Fs(Et(e.r))-i))),g:Gt(Ba(n+t*(Fs(Et(e.g))-n))),b:Gt(Ba(a+t*(Fs(Et(e.b))-a))),a:s.a+t*(e.a-s.a)}}function hn(s,e,t){if(s){let i=kr(s);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=Cr(i),s.r=i[0],s.g=i[1],s.b=i[2]}}function Dd(s,e){return s&&Object.assign(e||{},s)}function zl(s){var e={r:0,g:0,b:0,a:255};return Array.isArray(s)?s.length>=3&&(e={r:s[0],g:s[1],b:s[2],a:255},s.length>3&&(e.a=Gt(s[3]))):(e=Dd(s,{r:0,g:0,b:0,a:1}),e.a=Gt(e.a)),e}function Sg(s){return s.charAt(0)==="r"?kg(s):bg(s)}class Ni{constructor(e){if(e instanceof Ni)return e;const t=typeof e;let i;t==="object"?i=zl(e):t==="string"&&(i=cg(e)||wg(e)||Sg(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=Dd(this._rgb);return e&&(e.a=Et(e.a)),e}set rgb(e){this._rgb=zl(e)}rgbString(){return this._valid?Ng(this._rgb):void 0}hexString(){return this._valid?hg(this._rgb):void 0}hslString(){return this._valid?vg(this._rgb):void 0}mix(e,t){if(e){const i=this.rgb,n=e.rgb;let a;const r=t===a?.5:t,l=2*r-1,c=i.a-n.a,h=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;a=1-h,i.r=255&h*i.r+a*n.r+.5,i.g=255&h*i.g+a*n.g+.5,i.b=255&h*i.b+a*n.b+.5,i.a=r*i.a+(1-r)*n.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=Cg(this._rgb,e._rgb,t)),this}clone(){return new Ni(this.rgb)}alpha(e){return this._rgb.a=Gt(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=Li(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return hn(this._rgb,2,e),this}darken(e){return hn(this._rgb,2,-e),this}saturate(e){return hn(this._rgb,1,e),this}desaturate(e){return hn(this._rgb,1,-e),this}rotate(e){return yg(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ct(){}const Tg=(()=>{let s=0;return()=>s++})();function ge(s){return s==null}function Ce(s){if(Array.isArray&&Array.isArray(s))return!0;const e=Object.prototype.toString.call(s);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ie(s){return s!==null&&Object.prototype.toString.call(s)==="[object Object]"}function at(s){return(typeof s=="number"||s instanceof Number)&&isFinite(+s)}function gt(s,e){return at(s)?s:e}function J(s,e){return typeof s>"u"?e:s}const Ag=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100:+s/e,Ld=(s,e)=>typeof s=="string"&&s.endsWith("%")?parseFloat(s)/100*e:+s;function be(s,e,t){if(s&&typeof s.call=="function")return s.apply(t,e)}function le(s,e,t,i){let n,a,r;if(Ce(s))for(a=s.length,n=0;n<a;n++)e.call(t,s[n],n);else if(ie(s))for(r=Object.keys(s),a=r.length,n=0;n<a;n++)e.call(t,s[r[n]],r[n])}function On(s,e){let t,i,n,a;if(!s||!e||s.length!==e.length)return!1;for(t=0,i=s.length;t<i;++t)if(n=s[t],a=e[t],n.datasetIndex!==a.datasetIndex||n.index!==a.index)return!1;return!0}function In(s){if(Ce(s))return s.map(In);if(ie(s)){const e=Object.create(null),t=Object.keys(s),i=t.length;let n=0;for(;n<i;++n)e[t[n]]=In(s[t[n]]);return e}return s}function Od(s){return["__proto__","prototype","constructor"].indexOf(s)===-1}function Mg(s,e,t,i){if(!Od(s))return;const n=e[s],a=t[s];ie(n)&&ie(a)?Ci(n,a,i):e[s]=In(a)}function Ci(s,e,t){const i=Ce(e)?e:[e],n=i.length;if(!ie(s))return s;t=t||{};const a=t.merger||Mg;let r;for(let l=0;l<n;++l){if(r=i[l],!ie(r))continue;const c=Object.keys(r);for(let h=0,u=c.length;h<u;++h)a(c[h],s,r,t)}return s}function bi(s,e){return Ci(s,e,{merger:Eg})}function Eg(s,e,t){if(!Od(s))return;const i=e[s],n=t[s];ie(i)&&ie(n)?bi(i,n):Object.prototype.hasOwnProperty.call(e,s)||(e[s]=In(n))}const $l={"":s=>s,x:s=>s.x,y:s=>s.y};function Pg(s){const e=s.split("."),t=[];let i="";for(const n of e)i+=n,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function Rg(s){const e=Pg(s);return t=>{for(const i of e){if(i==="")break;t=t&&t[i]}return t}}function ms(s,e){return($l[e]||($l[e]=Rg(e)))(s)}function Sr(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Si=s=>typeof s<"u",qt=s=>typeof s=="function",Bl=(s,e)=>{if(s.size!==e.size)return!1;for(const t of s)if(!e.has(t))return!1;return!0};function Dg(s){return s.type==="mouseup"||s.type==="click"||s.type==="contextmenu"}const ce=Math.PI,we=2*ce,Lg=we+ce,Fn=Number.POSITIVE_INFINITY,Og=ce/180,Se=ce/2,os=ce/4,Hl=ce*2/3,Id=Math.log10,_t=Math.sign;function yi(s,e,t){return Math.abs(s-e)<t}function Wl(s){const e=Math.round(s);s=yi(s,e,s/1e3)?e:s;const t=Math.pow(10,Math.floor(Id(s))),i=s/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function Ig(s){const e=[],t=Math.sqrt(s);let i;for(i=1;i<t;i++)s%i===0&&(e.push(i),e.push(s/i));return t===(t|0)&&e.push(t),e.sort((n,a)=>n-a).pop(),e}function Fg(s){return typeof s=="symbol"||typeof s=="object"&&s!==null&&!(Symbol.toPrimitive in s||"toString"in s||"valueOf"in s)}function zn(s){return!Fg(s)&&!isNaN(parseFloat(s))&&isFinite(s)}function zg(s,e){const t=Math.round(s);return t-e<=s&&t+e>=s}function $g(s,e,t){let i,n,a;for(i=0,n=s.length;i<n;i++)a=s[i][t],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Pt(s){return s*(ce/180)}function Bg(s){return s*(180/ce)}function Ul(s){if(!at(s))return;let e=1,t=0;for(;Math.round(s*e)/e!==s;)e*=10,t++;return t}function Fd(s,e){const t=e.x-s.x,i=e.y-s.y,n=Math.sqrt(t*t+i*i);let a=Math.atan2(i,t);return a<-.5*ce&&(a+=we),{angle:a,distance:n}}function rr(s,e){return Math.sqrt(Math.pow(e.x-s.x,2)+Math.pow(e.y-s.y,2))}function Hg(s,e){return(s-e+Lg)%we-ce}function dt(s){return(s%we+we)%we}function Ti(s,e,t,i){const n=dt(s),a=dt(e),r=dt(t),l=dt(a-n),c=dt(r-n),h=dt(n-a),u=dt(n-r);return n===a||n===r||i&&a===r||l>c&&h<u}function Ve(s,e,t){return Math.max(e,Math.min(t,s))}function Wg(s){return Ve(s,-32768,32767)}function Vt(s,e,t,i=1e-6){return s>=Math.min(e,t)-i&&s<=Math.max(e,t)+i}function Tr(s,e,t){t=t||(r=>s[r]<e);let i=s.length-1,n=0,a;for(;i-n>1;)a=n+i>>1,t(a)?n=a:i=a;return{lo:n,hi:i}}const or=(s,e,t,i)=>Tr(s,t,i?n=>{const a=s[n][e];return a<t||a===t&&s[n+1][e]===t}:n=>s[n][e]<t),Ug=(s,e,t)=>Tr(s,t,i=>s[i][e]>=t);function Vg(s,e,t){let i=0,n=s.length;for(;i<n&&s[i]<e;)i++;for(;n>i&&s[n-1]>t;)n--;return i>0||n<s.length?s.slice(i,n):s}const zd=["push","pop","shift","splice","unshift"];function Yg(s,e){if(s._chartjs){s._chartjs.listeners.push(e);return}Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),zd.forEach(t=>{const i="_onData"+Sr(t),n=s[t];Object.defineProperty(s,t,{configurable:!0,enumerable:!1,value(...a){const r=n.apply(this,a);return s._chartjs.listeners.forEach(l=>{typeof l[i]=="function"&&l[i](...a)}),r}})})}function Vl(s,e){const t=s._chartjs;if(!t)return;const i=t.listeners,n=i.indexOf(e);n!==-1&&i.splice(n,1),!(i.length>0)&&(zd.forEach(a=>{delete s[a]}),delete s._chartjs)}function $d(s){const e=new Set(s);return e.size===s.length?s:Array.from(e)}const Bd=function(){return typeof window>"u"?function(s){return s()}:window.requestAnimationFrame}();function Hd(s,e){let t=[],i=!1;return function(...n){t=n,i||(i=!0,Bd.call(window,()=>{i=!1,s.apply(e,t)}))}}function Kg(s,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(s,e,i)):s.apply(this,i),e}}const Ar=s=>s==="start"?"left":s==="end"?"right":"center",Re=(s,e,t)=>s==="start"?e:s==="end"?t:(e+t)/2,Gg=(s,e,t,i)=>s===(i?"left":"right")?t:s==="center"?(e+t)/2:e,un=s=>s===0||s===1,Yl=(s,e,t)=>-(Math.pow(2,10*(s-=1))*Math.sin((s-e)*we/t)),Kl=(s,e,t)=>Math.pow(2,-10*s)*Math.sin((s-e)*we/t)+1,vi={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>-s*(s-2),easeInOutQuad:s=>(s/=.5)<1?.5*s*s:-.5*(--s*(s-2)-1),easeInCubic:s=>s*s*s,easeOutCubic:s=>(s-=1)*s*s+1,easeInOutCubic:s=>(s/=.5)<1?.5*s*s*s:.5*((s-=2)*s*s+2),easeInQuart:s=>s*s*s*s,easeOutQuart:s=>-((s-=1)*s*s*s-1),easeInOutQuart:s=>(s/=.5)<1?.5*s*s*s*s:-.5*((s-=2)*s*s*s-2),easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>(s-=1)*s*s*s*s+1,easeInOutQuint:s=>(s/=.5)<1?.5*s*s*s*s*s:.5*((s-=2)*s*s*s*s+2),easeInSine:s=>-Math.cos(s*Se)+1,easeOutSine:s=>Math.sin(s*Se),easeInOutSine:s=>-.5*(Math.cos(ce*s)-1),easeInExpo:s=>s===0?0:Math.pow(2,10*(s-1)),easeOutExpo:s=>s===1?1:-Math.pow(2,-10*s)+1,easeInOutExpo:s=>un(s)?s:s<.5?.5*Math.pow(2,10*(s*2-1)):.5*(-Math.pow(2,-10*(s*2-1))+2),easeInCirc:s=>s>=1?s:-(Math.sqrt(1-s*s)-1),easeOutCirc:s=>Math.sqrt(1-(s-=1)*s),easeInOutCirc:s=>(s/=.5)<1?-.5*(Math.sqrt(1-s*s)-1):.5*(Math.sqrt(1-(s-=2)*s)+1),easeInElastic:s=>un(s)?s:Yl(s,.075,.3),easeOutElastic:s=>un(s)?s:Kl(s,.075,.3),easeInOutElastic(s){return un(s)?s:s<.5?.5*Yl(s*2,.1125,.45):.5+.5*Kl(s*2-1,.1125,.45)},easeInBack(s){return s*s*((1.70158+1)*s-1.70158)},easeOutBack(s){return(s-=1)*s*((1.70158+1)*s+1.70158)+1},easeInOutBack(s){let e=1.70158;return(s/=.5)<1?.5*(s*s*(((e*=1.525)+1)*s-e)):.5*((s-=2)*s*(((e*=1.525)+1)*s+e)+2)},easeInBounce:s=>1-vi.easeOutBounce(1-s),easeOutBounce(s){return s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375},easeInOutBounce:s=>s<.5?vi.easeInBounce(s*2)*.5:vi.easeOutBounce(s*2-1)*.5+.5};function Mr(s){if(s&&typeof s=="object"){const e=s.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function Gl(s){return Mr(s)?s:new Ni(s)}function Ha(s){return Mr(s)?s:new Ni(s).saturate(.5).darken(.1).hexString()}const qg=["x","y","borderWidth","radius","tension"],Xg=["color","borderColor","backgroundColor"];function Qg(s){s.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),s.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),s.set("animations",{colors:{type:"color",properties:Xg},numbers:{type:"number",properties:qg}}),s.describe("animations",{_fallback:"animation"}),s.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Zg(s){s.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ql=new Map;function Jg(s,e){e=e||{};const t=s+JSON.stringify(e);let i=ql.get(t);return i||(i=new Intl.NumberFormat(s,e),ql.set(t,i)),i}function Er(s,e,t){return Jg(e,t).format(s)}const ex={values(s){return Ce(s)?s:""+s},numeric(s,e,t){if(s===0)return"0";const i=this.chart.options.locale;let n,a=s;if(t.length>1){const h=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(h<1e-4||h>1e15)&&(n="scientific"),a=tx(s,t)}const r=Id(Math.abs(a)),l=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),c={notation:n,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Er(s,i,c)}};function tx(s,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&s!==Math.floor(s)&&(t=s-Math.floor(s)),t}var Wd={formatters:ex};function sx(s){s.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Wd.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),s.route("scale.ticks","color","","color"),s.route("scale.grid","color","","borderColor"),s.route("scale.border","color","","borderColor"),s.route("scale.title","color","","color"),s.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),s.describe("scales",{_fallback:"scale"}),s.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const ps=Object.create(null),lr=Object.create(null);function _i(s,e){if(!e)return s;const t=e.split(".");for(let i=0,n=t.length;i<n;++i){const a=t[i];s=s[a]||(s[a]=Object.create(null))}return s}function Wa(s,e,t){return typeof e=="string"?Ci(_i(s,e),t):Ci(_i(s,""),e)}class ix{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,n)=>Ha(n.backgroundColor),this.hoverBorderColor=(i,n)=>Ha(n.borderColor),this.hoverColor=(i,n)=>Ha(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Wa(this,e,t)}get(e){return _i(this,e)}describe(e,t){return Wa(lr,e,t)}override(e,t){return Wa(ps,e,t)}route(e,t,i,n){const a=_i(this,e),r=_i(this,i),l="_"+t;Object.defineProperties(a,{[l]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[l],h=r[n];return ie(c)?Object.assign({},h,c):J(c,h)},set(c){this[l]=c}}})}apply(e){e.forEach(t=>t(this))}}var ke=new ix({_scriptable:s=>!s.startsWith("on"),_indexable:s=>s!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Qg,Zg,sx]);function nx(s){return!s||ge(s.size)||ge(s.family)?null:(s.style?s.style+" ":"")+(s.weight?s.weight+" ":"")+s.size+"px "+s.family}function Xl(s,e,t,i,n){let a=e[n];return a||(a=e[n]=s.measureText(n).width,t.push(n)),a>i&&(i=a),i}function ls(s,e,t){const i=s.currentDevicePixelRatio,n=t!==0?Math.max(t/2,.5):0;return Math.round((e-n)*i)/i+n}function Ql(s,e){!e&&!s||(e=e||s.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,s.width,s.height),e.restore())}function cr(s,e,t,i){Ud(s,e,t,i,null)}function Ud(s,e,t,i,n){let a,r,l,c,h,u,m,p;const x=e.pointStyle,v=e.rotation,b=e.radius;let _=(v||0)*Og;if(x&&typeof x=="object"&&(a=x.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){s.save(),s.translate(t,i),s.rotate(_),s.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),s.restore();return}if(!(isNaN(b)||b<=0)){switch(s.beginPath(),x){default:n?s.ellipse(t,i,n/2,b,0,0,we):s.arc(t,i,b,0,we),s.closePath();break;case"triangle":u=n?n/2:b,s.moveTo(t+Math.sin(_)*u,i-Math.cos(_)*b),_+=Hl,s.lineTo(t+Math.sin(_)*u,i-Math.cos(_)*b),_+=Hl,s.lineTo(t+Math.sin(_)*u,i-Math.cos(_)*b),s.closePath();break;case"rectRounded":h=b*.516,c=b-h,r=Math.cos(_+os)*c,m=Math.cos(_+os)*(n?n/2-h:c),l=Math.sin(_+os)*c,p=Math.sin(_+os)*(n?n/2-h:c),s.arc(t-m,i-l,h,_-ce,_-Se),s.arc(t+p,i-r,h,_-Se,_),s.arc(t+m,i+l,h,_,_+Se),s.arc(t-p,i+r,h,_+Se,_+ce),s.closePath();break;case"rect":if(!v){c=Math.SQRT1_2*b,u=n?n/2:c,s.rect(t-u,i-c,2*u,2*c);break}_+=os;case"rectRot":m=Math.cos(_)*(n?n/2:b),r=Math.cos(_)*b,l=Math.sin(_)*b,p=Math.sin(_)*(n?n/2:b),s.moveTo(t-m,i-l),s.lineTo(t+p,i-r),s.lineTo(t+m,i+l),s.lineTo(t-p,i+r),s.closePath();break;case"crossRot":_+=os;case"cross":m=Math.cos(_)*(n?n/2:b),r=Math.cos(_)*b,l=Math.sin(_)*b,p=Math.sin(_)*(n?n/2:b),s.moveTo(t-m,i-l),s.lineTo(t+m,i+l),s.moveTo(t+p,i-r),s.lineTo(t-p,i+r);break;case"star":m=Math.cos(_)*(n?n/2:b),r=Math.cos(_)*b,l=Math.sin(_)*b,p=Math.sin(_)*(n?n/2:b),s.moveTo(t-m,i-l),s.lineTo(t+m,i+l),s.moveTo(t+p,i-r),s.lineTo(t-p,i+r),_+=os,m=Math.cos(_)*(n?n/2:b),r=Math.cos(_)*b,l=Math.sin(_)*b,p=Math.sin(_)*(n?n/2:b),s.moveTo(t-m,i-l),s.lineTo(t+m,i+l),s.moveTo(t+p,i-r),s.lineTo(t-p,i+r);break;case"line":r=n?n/2:Math.cos(_)*b,l=Math.sin(_)*b,s.moveTo(t-r,i-l),s.lineTo(t+r,i+l);break;case"dash":s.moveTo(t,i),s.lineTo(t+Math.cos(_)*(n?n/2:b),i+Math.sin(_)*b);break;case!1:s.closePath();break}s.fill(),e.borderWidth>0&&s.stroke()}}function Ai(s,e,t){return t=t||.5,!e||s&&s.x>e.left-t&&s.x<e.right+t&&s.y>e.top-t&&s.y<e.bottom+t}function Pr(s,e){s.save(),s.beginPath(),s.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),s.clip()}function Rr(s){s.restore()}function ax(s,e,t,i,n){if(!e)return s.lineTo(t.x,t.y);if(n==="middle"){const a=(e.x+t.x)/2;s.lineTo(a,e.y),s.lineTo(a,t.y)}else n==="after"!=!!i?s.lineTo(e.x,t.y):s.lineTo(t.x,e.y);s.lineTo(t.x,t.y)}function rx(s,e,t,i){if(!e)return s.lineTo(t.x,t.y);s.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function ox(s,e){e.translation&&s.translate(e.translation[0],e.translation[1]),ge(e.rotation)||s.rotate(e.rotation),e.color&&(s.fillStyle=e.color),e.textAlign&&(s.textAlign=e.textAlign),e.textBaseline&&(s.textBaseline=e.textBaseline)}function lx(s,e,t,i,n){if(n.strikethrough||n.underline){const a=s.measureText(i),r=e-a.actualBoundingBoxLeft,l=e+a.actualBoundingBoxRight,c=t-a.actualBoundingBoxAscent,h=t+a.actualBoundingBoxDescent,u=n.strikethrough?(c+h)/2:h;s.strokeStyle=s.fillStyle,s.beginPath(),s.lineWidth=n.decorationWidth||2,s.moveTo(r,u),s.lineTo(l,u),s.stroke()}}function cx(s,e){const t=s.fillStyle;s.fillStyle=e.color,s.fillRect(e.left,e.top,e.width,e.height),s.fillStyle=t}function Mi(s,e,t,i,n,a={}){const r=Ce(e)?e:[e],l=a.strokeWidth>0&&a.strokeColor!=="";let c,h;for(s.save(),s.font=n.string,ox(s,a),c=0;c<r.length;++c)h=r[c],a.backdrop&&cx(s,a.backdrop),l&&(a.strokeColor&&(s.strokeStyle=a.strokeColor),ge(a.strokeWidth)||(s.lineWidth=a.strokeWidth),s.strokeText(h,t,i,a.maxWidth)),s.fillText(h,t,i,a.maxWidth),lx(s,t,i,h,a),i+=Number(n.lineHeight);s.restore()}function $n(s,e){const{x:t,y:i,w:n,h:a,radius:r}=e;s.arc(t+r.topLeft,i+r.topLeft,r.topLeft,1.5*ce,ce,!0),s.lineTo(t,i+a-r.bottomLeft),s.arc(t+r.bottomLeft,i+a-r.bottomLeft,r.bottomLeft,ce,Se,!0),s.lineTo(t+n-r.bottomRight,i+a),s.arc(t+n-r.bottomRight,i+a-r.bottomRight,r.bottomRight,Se,0,!0),s.lineTo(t+n,i+r.topRight),s.arc(t+n-r.topRight,i+r.topRight,r.topRight,0,-Se,!0),s.lineTo(t+r.topLeft,i)}const dx=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,hx=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ux(s,e){const t=(""+s).match(dx);if(!t||t[1]==="normal")return e*1.2;switch(s=+t[2],t[3]){case"px":return s;case"%":s/=100;break}return e*s}const fx=s=>+s||0;function Dr(s,e){const t={},i=ie(e),n=i?Object.keys(e):e,a=ie(s)?i?r=>J(s[r],s[e[r]]):r=>s[r]:()=>s;for(const r of n)t[r]=fx(a(r));return t}function Vd(s){return Dr(s,{top:"y",right:"x",bottom:"y",left:"x"})}function $s(s){return Dr(s,["topLeft","topRight","bottomLeft","bottomRight"])}function rt(s){const e=Vd(s);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function De(s,e){s=s||{},e=e||ke.font;let t=J(s.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=J(s.style,e.style);i&&!(""+i).match(hx)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const n={family:J(s.family,e.family),lineHeight:ux(J(s.lineHeight,e.lineHeight),t),size:t,style:i,weight:J(s.weight,e.weight),string:""};return n.string=nx(n),n}function fn(s,e,t,i){let n,a,r;for(n=0,a=s.length;n<a;++n)if(r=s[n],r!==void 0&&r!==void 0)return r}function mx(s,e,t){const{min:i,max:n}=s,a=Ld(e,(n-i)/2),r=(l,c)=>t&&l===0?0:l+c;return{min:r(i,-Math.abs(a)),max:r(n,a)}}function vs(s,e){return Object.assign(Object.create(s),e)}function Lr(s,e=[""],t,i,n=()=>s[0]){const a=t||s;typeof i>"u"&&(i=qd("_fallback",s));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:s,_rootScopes:a,_fallback:i,_getTarget:n,override:l=>Lr([l,...s],e,a,i)};return new Proxy(r,{deleteProperty(l,c){return delete l[c],delete l._keys,delete s[0][c],!0},get(l,c){return Kd(l,c,()=>wx(c,e,s,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(s[0])},has(l,c){return Jl(l).includes(c)},ownKeys(l){return Jl(l)},set(l,c,h){const u=l._storage||(l._storage=n());return l[c]=u[c]=h,delete l._keys,!0}})}function Ws(s,e,t,i){const n={_cacheable:!1,_proxy:s,_context:e,_subProxy:t,_stack:new Set,_descriptors:Yd(s,i),setContext:a=>Ws(s,a,t,i),override:a=>Ws(s.override(a),e,t,i)};return new Proxy(n,{deleteProperty(a,r){return delete a[r],delete s[r],!0},get(a,r,l){return Kd(a,r,()=>gx(a,r,l))},getOwnPropertyDescriptor(a,r){return a._descriptors.allKeys?Reflect.has(s,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(s,r)},getPrototypeOf(){return Reflect.getPrototypeOf(s)},has(a,r){return Reflect.has(s,r)},ownKeys(){return Reflect.ownKeys(s)},set(a,r,l){return s[r]=l,delete a[r],!0}})}function Yd(s,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:n=e.allKeys}=s;return{allKeys:n,scriptable:t,indexable:i,isScriptable:qt(t)?t:()=>t,isIndexable:qt(i)?i:()=>i}}const px=(s,e)=>s?s+Sr(e):e,Or=(s,e)=>ie(e)&&s!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Kd(s,e,t){if(Object.prototype.hasOwnProperty.call(s,e)||e==="constructor")return s[e];const i=t();return s[e]=i,i}function gx(s,e,t){const{_proxy:i,_context:n,_subProxy:a,_descriptors:r}=s;let l=i[e];return qt(l)&&r.isScriptable(e)&&(l=xx(e,l,s,t)),Ce(l)&&l.length&&(l=bx(e,l,s,r.isIndexable)),Or(e,l)&&(l=Ws(l,n,a&&a[e],r)),l}function xx(s,e,t,i){const{_proxy:n,_context:a,_subProxy:r,_stack:l}=t;if(l.has(s))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+s);l.add(s);let c=e(a,r||i);return l.delete(s),Or(s,c)&&(c=Ir(n._scopes,n,s,c)),c}function bx(s,e,t,i){const{_proxy:n,_context:a,_subProxy:r,_descriptors:l}=t;if(typeof a.index<"u"&&i(s))return e[a.index%e.length];if(ie(e[0])){const c=e,h=n._scopes.filter(u=>u!==c);e=[];for(const u of c){const m=Ir(h,n,s,u);e.push(Ws(m,a,r&&r[s],l))}}return e}function Gd(s,e,t){return qt(s)?s(e,t):s}const yx=(s,e)=>s===!0?e:typeof s=="string"?ms(e,s):void 0;function vx(s,e,t,i,n){for(const a of e){const r=yx(t,a);if(r){s.add(r);const l=Gd(r._fallback,t,n);if(typeof l<"u"&&l!==t&&l!==i)return l}else if(r===!1&&typeof i<"u"&&t!==i)return null}return!1}function Ir(s,e,t,i){const n=e._rootScopes,a=Gd(e._fallback,t,i),r=[...s,...n],l=new Set;l.add(i);let c=Zl(l,r,t,a||t,i);return c===null||typeof a<"u"&&a!==t&&(c=Zl(l,r,a,c,i),c===null)?!1:Lr(Array.from(l),[""],n,a,()=>_x(e,t,i))}function Zl(s,e,t,i,n){for(;t;)t=vx(s,e,t,i,n);return t}function _x(s,e,t){const i=s._getTarget();e in i||(i[e]={});const n=i[e];return Ce(n)&&ie(t)?t:n||{}}function wx(s,e,t,i){let n;for(const a of e)if(n=qd(px(a,s),t),typeof n<"u")return Or(s,n)?Ir(t,i,s,n):n}function qd(s,e){for(const t of e){if(!t)continue;const i=t[s];if(typeof i<"u")return i}}function Jl(s){let e=s._keys;return e||(e=s._keys=jx(s._scopes)),e}function jx(s){const e=new Set;for(const t of s)for(const i of Object.keys(t).filter(n=>!n.startsWith("_")))e.add(i);return Array.from(e)}const kx=Number.EPSILON||1e-14,Us=(s,e)=>e<s.length&&!s[e].skip&&s[e],Xd=s=>s==="x"?"y":"x";function Nx(s,e,t,i){const n=s.skip?e:s,a=e,r=t.skip?e:t,l=rr(a,n),c=rr(r,a);let h=l/(l+c),u=c/(l+c);h=isNaN(h)?0:h,u=isNaN(u)?0:u;const m=i*h,p=i*u;return{previous:{x:a.x-m*(r.x-n.x),y:a.y-m*(r.y-n.y)},next:{x:a.x+p*(r.x-n.x),y:a.y+p*(r.y-n.y)}}}function Cx(s,e,t){const i=s.length;let n,a,r,l,c,h=Us(s,0);for(let u=0;u<i-1;++u)if(c=h,h=Us(s,u+1),!(!c||!h)){if(yi(e[u],0,kx)){t[u]=t[u+1]=0;continue}n=t[u]/e[u],a=t[u+1]/e[u],l=Math.pow(n,2)+Math.pow(a,2),!(l<=9)&&(r=3/Math.sqrt(l),t[u]=n*r*e[u],t[u+1]=a*r*e[u])}}function Sx(s,e,t="x"){const i=Xd(t),n=s.length;let a,r,l,c=Us(s,0);for(let h=0;h<n;++h){if(r=l,l=c,c=Us(s,h+1),!l)continue;const u=l[t],m=l[i];r&&(a=(u-r[t])/3,l[`cp1${t}`]=u-a,l[`cp1${i}`]=m-a*e[h]),c&&(a=(c[t]-u)/3,l[`cp2${t}`]=u+a,l[`cp2${i}`]=m+a*e[h])}}function Tx(s,e="x"){const t=Xd(e),i=s.length,n=Array(i).fill(0),a=Array(i);let r,l,c,h=Us(s,0);for(r=0;r<i;++r)if(l=c,c=h,h=Us(s,r+1),!!c){if(h){const u=h[e]-c[e];n[r]=u!==0?(h[t]-c[t])/u:0}a[r]=l?h?_t(n[r-1])!==_t(n[r])?0:(n[r-1]+n[r])/2:n[r-1]:n[r]}Cx(s,n,a),Sx(s,a,e)}function mn(s,e,t){return Math.max(Math.min(s,t),e)}function Ax(s,e){let t,i,n,a,r,l=Ai(s[0],e);for(t=0,i=s.length;t<i;++t)r=a,a=l,l=t<i-1&&Ai(s[t+1],e),a&&(n=s[t],r&&(n.cp1x=mn(n.cp1x,e.left,e.right),n.cp1y=mn(n.cp1y,e.top,e.bottom)),l&&(n.cp2x=mn(n.cp2x,e.left,e.right),n.cp2y=mn(n.cp2y,e.top,e.bottom)))}function Mx(s,e,t,i,n){let a,r,l,c;if(e.spanGaps&&(s=s.filter(h=>!h.skip)),e.cubicInterpolationMode==="monotone")Tx(s,n);else{let h=i?s[s.length-1]:s[0];for(a=0,r=s.length;a<r;++a)l=s[a],c=Nx(h,l,s[Math.min(a+1,r-(i?0:1))%r],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,h=l}e.capBezierPoints&&Ax(s,t)}function Fr(){return typeof window<"u"&&typeof document<"u"}function zr(s){let e=s.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Bn(s,e,t){let i;return typeof s=="string"?(i=parseInt(s,10),s.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=s,i}const Zn=s=>s.ownerDocument.defaultView.getComputedStyle(s,null);function Ex(s,e){return Zn(s).getPropertyValue(e)}const Px=["top","right","bottom","left"];function fs(s,e,t){const i={};t=t?"-"+t:"";for(let n=0;n<4;n++){const a=Px[n];i[a]=parseFloat(s[e+"-"+a+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Rx=(s,e,t)=>(s>0||e>0)&&(!t||!t.shadowRoot);function Dx(s,e){const t=s.touches,i=t&&t.length?t[0]:s,{offsetX:n,offsetY:a}=i;let r=!1,l,c;if(Rx(n,a,s.target))l=n,c=a;else{const h=e.getBoundingClientRect();l=i.clientX-h.left,c=i.clientY-h.top,r=!0}return{x:l,y:c,box:r}}function ds(s,e){if("native"in s)return s;const{canvas:t,currentDevicePixelRatio:i}=e,n=Zn(t),a=n.boxSizing==="border-box",r=fs(n,"padding"),l=fs(n,"border","width"),{x:c,y:h,box:u}=Dx(s,t),m=r.left+(u&&l.left),p=r.top+(u&&l.top);let{width:x,height:v}=e;return a&&(x-=r.width+l.width,v-=r.height+l.height),{x:Math.round((c-m)/x*t.width/i),y:Math.round((h-p)/v*t.height/i)}}function Lx(s,e,t){let i,n;if(e===void 0||t===void 0){const a=s&&zr(s);if(!a)e=s.clientWidth,t=s.clientHeight;else{const r=a.getBoundingClientRect(),l=Zn(a),c=fs(l,"border","width"),h=fs(l,"padding");e=r.width-h.width-c.width,t=r.height-h.height-c.height,i=Bn(l.maxWidth,a,"clientWidth"),n=Bn(l.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:i||Fn,maxHeight:n||Fn}}const pn=s=>Math.round(s*10)/10;function Ox(s,e,t,i){const n=Zn(s),a=fs(n,"margin"),r=Bn(n.maxWidth,s,"clientWidth")||Fn,l=Bn(n.maxHeight,s,"clientHeight")||Fn,c=Lx(s,e,t);let{width:h,height:u}=c;if(n.boxSizing==="content-box"){const p=fs(n,"border","width"),x=fs(n,"padding");h-=x.width+p.width,u-=x.height+p.height}return h=Math.max(0,h-a.width),u=Math.max(0,i?h/i:u-a.height),h=pn(Math.min(h,r,c.maxWidth)),u=pn(Math.min(u,l,c.maxHeight)),h&&!u&&(u=pn(h/2)),(e!==void 0||t!==void 0)&&i&&c.height&&u>c.height&&(u=c.height,h=pn(Math.floor(u*i))),{width:h,height:u}}function ec(s,e,t){const i=e||1,n=Math.floor(s.height*i),a=Math.floor(s.width*i);s.height=Math.floor(s.height),s.width=Math.floor(s.width);const r=s.canvas;return r.style&&(t||!r.style.height&&!r.style.width)&&(r.style.height=`${s.height}px`,r.style.width=`${s.width}px`),s.currentDevicePixelRatio!==i||r.height!==n||r.width!==a?(s.currentDevicePixelRatio=i,r.height=n,r.width=a,s.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Ix=function(){let s=!1;try{const e={get passive(){return s=!0,!1}};Fr()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return s}();function tc(s,e){const t=Ex(s,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function hs(s,e,t,i){return{x:s.x+t*(e.x-s.x),y:s.y+t*(e.y-s.y)}}function Fx(s,e,t,i){return{x:s.x+t*(e.x-s.x),y:i==="middle"?t<.5?s.y:e.y:i==="after"?t<1?s.y:e.y:t>0?e.y:s.y}}function zx(s,e,t,i){const n={x:s.cp2x,y:s.cp2y},a={x:e.cp1x,y:e.cp1y},r=hs(s,n,t),l=hs(n,a,t),c=hs(a,e,t),h=hs(r,l,t),u=hs(l,c,t);return hs(h,u,t)}const $x=function(s,e){return{x(t){return s+s+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},Bx=function(){return{x(s){return s},setWidth(s){},textAlign(s){return s},xPlus(s,e){return s+e},leftForLtr(s,e){return s}}};function Bs(s,e,t){return s?$x(e,t):Bx()}function Qd(s,e){let t,i;(e==="ltr"||e==="rtl")&&(t=s.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),s.prevTextDirection=i)}function Zd(s,e){e!==void 0&&(delete s.prevTextDirection,s.canvas.style.setProperty("direction",e[0],e[1]))}function Jd(s){return s==="angle"?{between:Ti,compare:Hg,normalize:dt}:{between:Vt,compare:(e,t)=>e-t,normalize:e=>e}}function sc({start:s,end:e,count:t,loop:i,style:n}){return{start:s%t,end:e%t,loop:i&&(e-s+1)%t===0,style:n}}function Hx(s,e,t){const{property:i,start:n,end:a}=t,{between:r,normalize:l}=Jd(i),c=e.length;let{start:h,end:u,loop:m}=s,p,x;if(m){for(h+=c,u+=c,p=0,x=c;p<x&&r(l(e[h%c][i]),n,a);++p)h--,u--;h%=c,u%=c}return u<h&&(u+=c),{start:h,end:u,loop:m,style:s.style}}function Wx(s,e,t){if(!t)return[s];const{property:i,start:n,end:a}=t,r=e.length,{compare:l,between:c,normalize:h}=Jd(i),{start:u,end:m,loop:p,style:x}=Hx(s,e,t),v=[];let b=!1,_=null,w,j,C;const P=()=>c(n,C,w)&&l(n,C)!==0,A=()=>l(a,w)===0||c(a,C,w),O=()=>b||P(),B=()=>!b||A();for(let F=u,$=u;F<=m;++F)j=e[F%r],!j.skip&&(w=h(j[i]),w!==C&&(b=c(w,n,a),_===null&&O()&&(_=l(w,n)===0?F:$),_!==null&&B()&&(v.push(sc({start:_,end:F,loop:p,count:r,style:x})),_=null),$=F,C=w));return _!==null&&v.push(sc({start:_,end:m,loop:p,count:r,style:x})),v}function Ux(s,e){const t=[],i=s.segments;for(let n=0;n<i.length;n++){const a=Wx(i[n],s.points,e);a.length&&t.push(...a)}return t}function Vx(s,e,t,i){let n=0,a=e-1;if(t&&!i)for(;n<e&&!s[n].skip;)n++;for(;n<e&&s[n].skip;)n++;for(n%=e,t&&(a+=n);a>n&&s[a%e].skip;)a--;return a%=e,{start:n,end:a}}function Yx(s,e,t,i){const n=s.length,a=[];let r=e,l=s[e],c;for(c=e+1;c<=t;++c){const h=s[c%n];h.skip||h.stop?l.skip||(i=!1,a.push({start:e%n,end:(c-1)%n,loop:i}),e=r=h.stop?c:null):(r=c,l.skip&&(e=c)),l=h}return r!==null&&a.push({start:e%n,end:r%n,loop:i}),a}function Kx(s,e){const t=s.points,i=s.options.spanGaps,n=t.length;if(!n)return[];const a=!!s._loop,{start:r,end:l}=Vx(t,n,a,i);if(i===!0)return ic(s,[{start:r,end:l,loop:a}],t,e);const c=l<r?l+n:l,h=!!s._fullLoop&&r===0&&l===n-1;return ic(s,Yx(t,r,c,h),t,e)}function ic(s,e,t,i){return!i||!i.setContext||!t?e:Gx(s,e,t,i)}function Gx(s,e,t,i){const n=s._chart.getContext(),a=nc(s.options),{_datasetIndex:r,options:{spanGaps:l}}=s,c=t.length,h=[];let u=a,m=e[0].start,p=m;function x(v,b,_,w){const j=l?-1:1;if(v!==b){for(v+=c;t[v%c].skip;)v-=j;for(;t[b%c].skip;)b+=j;v%c!==b%c&&(h.push({start:v%c,end:b%c,loop:_,style:w}),u=w,m=b%c)}}for(const v of e){m=l?m:v.start;let b=t[m%c],_;for(p=m+1;p<=v.end;p++){const w=t[p%c];_=nc(i.setContext(vs(n,{type:"segment",p0:b,p1:w,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:r}))),qx(_,u)&&x(m,p-1,v.loop,u),b=w,u=_}m<p-1&&x(m,p-1,v.loop,u)}return h}function nc(s){return{backgroundColor:s.backgroundColor,borderCapStyle:s.borderCapStyle,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderJoinStyle:s.borderJoinStyle,borderWidth:s.borderWidth,borderColor:s.borderColor}}function qx(s,e){if(!e)return!1;const t=[],i=function(n,a){return Mr(a)?(t.includes(a)||t.push(a),t.indexOf(a)):a};return JSON.stringify(s,i)!==JSON.stringify(e,i)}function gn(s,e,t){return s.options.clip?s[t]:e[t]}function Xx(s,e){const{xScale:t,yScale:i}=s;return t&&i?{left:gn(t,e,"left"),right:gn(t,e,"right"),top:gn(i,e,"top"),bottom:gn(i,e,"bottom")}:e}function Qx(s,e){const t=e._clip;if(t.disabled)return!1;const i=Xx(e,s.chartArea);return{left:t.left===!1?0:i.left-(t.left===!0?0:t.left),right:t.right===!1?s.width:i.right+(t.right===!0?0:t.right),top:t.top===!1?0:i.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?s.height:i.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Zx{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,n){const a=t.listeners[n],r=t.duration;a.forEach(l=>l({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(i-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Bd.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,n)=>{if(!i.running||!i.items.length)return;const a=i.items;let r=a.length-1,l=!1,c;for(;r>=0;--r)c=a[r],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),l=!0):(a[r]=a[a.length-1],a.pop());l&&(n.draw(),this._notify(n,i,e,"progress")),a.length||(i.running=!1,this._notify(n,i,e,"complete"),i.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,n)=>Math.max(i,n._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const i=t.items;let n=i.length-1;for(;n>=0;--n)i[n].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var At=new Zx;const ac="transparent",Jx={boolean(s,e,t){return t>.5?e:s},color(s,e,t){const i=Gl(s||ac),n=i.valid&&Gl(e||ac);return n&&n.valid?n.mix(i,t).hexString():e},number(s,e,t){return s+(e-s)*t}};class eb{constructor(e,t,i,n){const a=t[i];n=fn([e.to,n,a,e.from]);const r=fn([e.from,a,n]);this._active=!0,this._fn=e.fn||Jx[e.type||typeof r],this._easing=vi[e.easing]||vi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=r,this._to=n,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);const n=this._target[this._prop],a=i-this._start,r=this._duration-a;this._start=i,this._duration=Math.floor(Math.max(r,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=fn([e.to,t,n,e.from]),this._from=fn([e.from,n,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,i=this._duration,n=this._prop,a=this._from,r=this._loop,l=this._to;let c;if(this._active=a!==l&&(r||t<i),!this._active){this._target[n]=l,this._notify(!0);return}if(t<0){this._target[n]=a;return}c=t/i%2,c=r&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[n]=this._fn(a,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){const t=e?"res":"rej",i=this._promises||[];for(let n=0;n<i.length;n++)i[n][t]()}}class eh{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ie(e))return;const t=Object.keys(ke.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const a=e[n];if(!ie(a))return;const r={};for(const l of t)r[l]=a[l];(Ce(a.properties)&&a.properties||[n]).forEach(l=>{(l===n||!i.has(l))&&i.set(l,r)})})}_animateOptions(e,t){const i=t.options,n=sb(e,i);if(!n)return[];const a=this._createAnimations(n,i);return i.$shared&&tb(e.options.$animations,i).then(()=>{e.options=i},()=>{}),a}_createAnimations(e,t){const i=this._properties,n=[],a=e.$animations||(e.$animations={}),r=Object.keys(t),l=Date.now();let c;for(c=r.length-1;c>=0;--c){const h=r[c];if(h.charAt(0)==="$")continue;if(h==="options"){n.push(...this._animateOptions(e,t));continue}const u=t[h];let m=a[h];const p=i.get(h);if(m)if(p&&m.active()){m.update(p,u,l);continue}else m.cancel();if(!p||!p.duration){e[h]=u;continue}a[h]=m=new eb(p,e,h,u),n.push(m)}return n}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const i=this._createAnimations(e,t);if(i.length)return At.add(this._chart,i),!0}}function tb(s,e){const t=[],i=Object.keys(e);for(let n=0;n<i.length;n++){const a=s[i[n]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function sb(s,e){if(!e)return;let t=s.options;if(!t){s.options=e;return}return t.$shared&&(s.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function rc(s,e){const t=s&&s.options||{},i=t.reverse,n=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:i?a:n,end:i?n:a}}function ib(s,e,t){if(t===!1)return!1;const i=rc(s,t),n=rc(e,t);return{top:n.end,right:i.end,bottom:n.start,left:i.start}}function nb(s){let e,t,i,n;return ie(s)?(e=s.top,t=s.right,i=s.bottom,n=s.left):e=t=i=n=s,{top:e,right:t,bottom:i,left:n,disabled:s===!1}}function th(s,e){const t=[],i=s._getSortedDatasetMetas(e);let n,a;for(n=0,a=i.length;n<a;++n)t.push(i[n].index);return t}function oc(s,e,t,i={}){const n=s.keys,a=i.mode==="single";let r,l,c,h;if(e===null)return;let u=!1;for(r=0,l=n.length;r<l;++r){if(c=+n[r],c===t){if(u=!0,i.all)continue;break}h=s.values[c],at(h)&&(a||e===0||_t(e)===_t(h))&&(e+=h)}return!u&&!i.all?0:e}function ab(s,e){const{iScale:t,vScale:i}=e,n=t.axis==="x"?"x":"y",a=i.axis==="x"?"x":"y",r=Object.keys(s),l=new Array(r.length);let c,h,u;for(c=0,h=r.length;c<h;++c)u=r[c],l[c]={[n]:u,[a]:s[u]};return l}function Ua(s,e){const t=s&&s.options.stacked;return t||t===void 0&&e.stack!==void 0}function rb(s,e,t){return`${s.id}.${e.id}.${t.stack||t.type}`}function ob(s){const{min:e,max:t,minDefined:i,maxDefined:n}=s.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:n?t:Number.POSITIVE_INFINITY}}function lb(s,e,t){const i=s[e]||(s[e]={});return i[t]||(i[t]={})}function lc(s,e,t,i){for(const n of e.getMatchingVisibleMetas(i).reverse()){const a=s[n.index];if(t&&a>0||!t&&a<0)return n.index}return null}function cc(s,e){const{chart:t,_cachedMeta:i}=s,n=t._stacks||(t._stacks={}),{iScale:a,vScale:r,index:l}=i,c=a.axis,h=r.axis,u=rb(a,r,i),m=e.length;let p;for(let x=0;x<m;++x){const v=e[x],{[c]:b,[h]:_}=v,w=v._stacks||(v._stacks={});p=w[h]=lb(n,u,b),p[l]=_,p._top=lc(p,r,!0,i.type),p._bottom=lc(p,r,!1,i.type);const j=p._visualValues||(p._visualValues={});j[l]=_}}function Va(s,e){const t=s.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function cb(s,e){return vs(s,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function db(s,e,t){return vs(s,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function ni(s,e){const t=s.controller.index,i=s.vScale&&s.vScale.axis;if(i){e=e||s._parsed;for(const n of e){const a=n._stacks;if(!a||a[i]===void 0||a[i][t]===void 0)return;delete a[i][t],a[i]._visualValues!==void 0&&a[i]._visualValues[t]!==void 0&&delete a[i]._visualValues[t]}}}const Ya=s=>s==="reset"||s==="none",dc=(s,e)=>e?s:Object.assign({},s),hb=(s,e,t)=>s&&!e.hidden&&e._stacked&&{keys:th(t,!0),values:null};class Hs{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ua(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ni(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,i=this.getDataset(),n=(m,p,x,v)=>m==="x"?p:m==="r"?v:x,a=t.xAxisID=J(i.xAxisID,Va(e,"x")),r=t.yAxisID=J(i.yAxisID,Va(e,"y")),l=t.rAxisID=J(i.rAxisID,Va(e,"r")),c=t.indexAxis,h=t.iAxisID=n(c,a,r,l),u=t.vAxisID=n(c,r,a,l);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(r),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(h),t.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Vl(this._data,this),e._stacked&&ni(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),i=this._data;if(ie(t)){const n=this._cachedMeta;this._data=ab(t,n)}else if(i!==t){if(i){Vl(i,this);const n=this._cachedMeta;ni(n),n._parsed=[]}t&&Object.isExtensible(t)&&Yg(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,i=this.getDataset();let n=!1;this._dataCheck();const a=t._stacked;t._stacked=Ua(t.vScale,t),t.stack!==i.stack&&(n=!0,ni(t),t.stack=i.stack),this._resyncElements(e),(n||a!==t._stacked)&&(cc(this,t._parsed),t._stacked=Ua(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:i,_data:n}=this,{iScale:a,_stacked:r}=i,l=a.axis;let c=e===0&&t===n.length?!0:i._sorted,h=e>0&&i._parsed[e-1],u,m,p;if(this._parsing===!1)i._parsed=n,i._sorted=!0,p=n;else{Ce(n[e])?p=this.parseArrayData(i,n,e,t):ie(n[e])?p=this.parseObjectData(i,n,e,t):p=this.parsePrimitiveData(i,n,e,t);const x=()=>m[l]===null||h&&m[l]<h[l];for(u=0;u<t;++u)i._parsed[u+e]=m=p[u],c&&(x()&&(c=!1),h=m);i._sorted=c}r&&cc(this,p)}parsePrimitiveData(e,t,i,n){const{iScale:a,vScale:r}=e,l=a.axis,c=r.axis,h=a.getLabels(),u=a===r,m=new Array(n);let p,x,v;for(p=0,x=n;p<x;++p)v=p+i,m[p]={[l]:u||a.parse(h[v],v),[c]:r.parse(t[v],v)};return m}parseArrayData(e,t,i,n){const{xScale:a,yScale:r}=e,l=new Array(n);let c,h,u,m;for(c=0,h=n;c<h;++c)u=c+i,m=t[u],l[c]={x:a.parse(m[0],u),y:r.parse(m[1],u)};return l}parseObjectData(e,t,i,n){const{xScale:a,yScale:r}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=new Array(n);let u,m,p,x;for(u=0,m=n;u<m;++u)p=u+i,x=t[p],h[u]={x:a.parse(ms(x,l),p),y:r.parse(ms(x,c),p)};return h}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,i){const n=this.chart,a=this._cachedMeta,r=t[e.axis],l={keys:th(n,!0),values:t._stacks[e.axis]._visualValues};return oc(l,r,a.index,{mode:i})}updateRangeFromParsed(e,t,i,n){const a=i[t.axis];let r=a===null?NaN:a;const l=n&&i._stacks[t.axis];n&&l&&(n.values=l,r=oc(n,a,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,t){const i=this._cachedMeta,n=i._parsed,a=i._sorted&&e===i.iScale,r=n.length,l=this._getOtherScale(e),c=hb(t,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:m}=ob(l);let p,x;function v(){x=n[p];const b=x[l.axis];return!at(x[e.axis])||u>b||m<b}for(p=0;p<r&&!(!v()&&(this.updateRangeFromParsed(h,e,x,c),a));++p);if(a){for(p=r-1;p>=0;--p)if(!v()){this.updateRangeFromParsed(h,e,x,c);break}}return h}getAllParsedValues(e){const t=this._cachedMeta._parsed,i=[];let n,a,r;for(n=0,a=t.length;n<a;++n)r=t[n][e.axis],at(r)&&i.push(r);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,i=t.iScale,n=t.vScale,a=this.getParsed(e);return{label:i?""+i.getLabelForValue(a[i.axis]):"",value:n?""+n.getLabelForValue(a[n.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=nb(J(this.options.clip,ib(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,i=this._cachedMeta,n=i.data||[],a=t.chartArea,r=[],l=this._drawStart||0,c=this._drawCount||n.length-l,h=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,a,l,c),u=l;u<l+c;++u){const m=n[u];m.hidden||(m.active&&h?r.push(m):m.draw(e,a))}for(u=0;u<r.length;++u)r[u].draw(e,a)}getStyle(e,t){const i=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,t,i){const n=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const r=this._cachedMeta.data[e];a=r.$context||(r.$context=db(this.getContext(),e,r)),a.parsed=this.getParsed(e),a.raw=n.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=cb(this.chart.getContext(),this.index)),a.dataset=n,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=i,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",i){const n=t==="active",a=this._cachedDataOpts,r=e+"-"+t,l=a[r],c=this.enableOptionSharing&&Si(i);if(l)return dc(l,c);const h=this.chart.config,u=h.datasetElementScopeKeys(this._type,e),m=n?[`${e}Hover`,"hover",e,""]:[e,""],p=h.getOptionScopes(this.getDataset(),u),x=Object.keys(ke.elements[e]),v=()=>this.getContext(i,n,t),b=h.resolveNamedOptions(p,x,v,m);return b.$shared&&(b.$shared=c,a[r]=Object.freeze(dc(b,c))),b}_resolveAnimations(e,t,i){const n=this.chart,a=this._cachedDataOpts,r=`animation-${t}`,l=a[r];if(l)return l;let c;if(n.options.animation!==!1){const u=this.chart.config,m=u.datasetAnimationScopeKeys(this._type,t),p=u.getOptionScopes(this.getDataset(),m);c=u.createResolver(p,this.getContext(e,i,t))}const h=new eh(n,c&&c.animations);return c&&c._cacheable&&(a[r]=Object.freeze(h)),h}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Ya(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const i=this.resolveDataElementOptions(e,t),n=this._sharedOptions,a=this.getSharedOptions(i),r=this.includeOptions(t,a)||a!==n;return this.updateSharedOptions(a,t,i),{sharedOptions:a,includeOptions:r}}updateElement(e,t,i,n){Ya(n)?Object.assign(e,i):this._resolveAnimations(t,n).update(e,i)}updateSharedOptions(e,t,i){e&&!Ya(t)&&this._resolveAnimations(void 0,t).update(e,i)}_setStyle(e,t,i,n){e.active=n;const a=this.getStyle(t,n);this._resolveAnimations(t,i,n).update(e,{options:!n&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,t,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,i=this._cachedMeta.data;for(const[l,c,h]of this._syncList)this[l](c,h);this._syncList=[];const n=i.length,a=t.length,r=Math.min(a,n);r&&this.parse(0,r),a>n?this._insertElements(n,a-n,e):a<n&&this._removeElements(a,n-a)}_insertElements(e,t,i=!0){const n=this._cachedMeta,a=n.data,r=e+t;let l;const c=h=>{for(h.length+=t,l=h.length-1;l>=r;l--)h[l]=h[l-t]};for(c(a),l=e;l<r;++l)a[l]=new this.dataElementType;this._parsing&&c(n._parsed),this.parse(e,t),i&&this.updateElements(a,e,t,"reset")}updateElements(e,t,i,n){}_removeElements(e,t){const i=this._cachedMeta;if(this._parsing){const n=i._parsed.splice(e,t);i._stacked&&ni(i,n)}i.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,i,n]=e;this[t](i,n)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}D(Hs,"defaults",{}),D(Hs,"datasetElementType",null),D(Hs,"dataElementType",null);function ub(s,e){if(!s._cache.$bar){const t=s.getMatchingVisibleMetas(e);let i=[];for(let n=0,a=t.length;n<a;n++)i=i.concat(t[n].controller.getAllParsedValues(s));s._cache.$bar=$d(i.sort((n,a)=>n-a))}return s._cache.$bar}function fb(s){const e=s.iScale,t=ub(e,s.type);let i=e._length,n,a,r,l;const c=()=>{r===32767||r===-32768||(Si(l)&&(i=Math.min(i,Math.abs(r-l)||i)),l=r)};for(n=0,a=t.length;n<a;++n)r=e.getPixelForValue(t[n]),c();for(l=void 0,n=0,a=e.ticks.length;n<a;++n)r=e.getPixelForTick(n),c();return i}function mb(s,e,t,i){const n=t.barThickness;let a,r;return ge(n)?(a=e.min*t.categoryPercentage,r=t.barPercentage):(a=n*i,r=1),{chunk:a/i,ratio:r,start:e.pixels[s]-a/2}}function pb(s,e,t,i){const n=e.pixels,a=n[s];let r=s>0?n[s-1]:null,l=s<n.length-1?n[s+1]:null;const c=t.categoryPercentage;r===null&&(r=a-(l===null?e.end-e.start:l-a)),l===null&&(l=a+a-r);const h=a-(a-Math.min(r,l))/2*c;return{chunk:Math.abs(l-r)/2*c/i,ratio:t.barPercentage,start:h}}function gb(s,e,t,i){const n=t.parse(s[0],i),a=t.parse(s[1],i),r=Math.min(n,a),l=Math.max(n,a);let c=r,h=l;Math.abs(r)>Math.abs(l)&&(c=l,h=r),e[t.axis]=h,e._custom={barStart:c,barEnd:h,start:n,end:a,min:r,max:l}}function sh(s,e,t,i){return Ce(s)?gb(s,e,t,i):e[t.axis]=t.parse(s,i),e}function hc(s,e,t,i){const n=s.iScale,a=s.vScale,r=n.getLabels(),l=n===a,c=[];let h,u,m,p;for(h=t,u=t+i;h<u;++h)p=e[h],m={},m[n.axis]=l||n.parse(r[h],h),c.push(sh(p,m,a,h));return c}function Ka(s){return s&&s.barStart!==void 0&&s.barEnd!==void 0}function xb(s,e,t){return s!==0?_t(s):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function bb(s){let e,t,i,n,a;return s.horizontal?(e=s.base>s.x,t="left",i="right"):(e=s.base<s.y,t="bottom",i="top"),e?(n="end",a="start"):(n="start",a="end"),{start:t,end:i,reverse:e,top:n,bottom:a}}function yb(s,e,t,i){let n=e.borderSkipped;const a={};if(!n){s.borderSkipped=a;return}if(n===!0){s.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:r,end:l,reverse:c,top:h,bottom:u}=bb(s);n==="middle"&&t&&(s.enableBorderRadius=!0,(t._top||0)===i?n=h:(t._bottom||0)===i?n=u:(a[uc(u,r,l,c)]=!0,n=h)),a[uc(n,r,l,c)]=!0,s.borderSkipped=a}function uc(s,e,t,i){return i?(s=vb(s,e,t),s=fc(s,t,e)):s=fc(s,e,t),s}function vb(s,e,t){return s===e?t:s===t?e:s}function fc(s,e,t){return s==="start"?e:s==="end"?t:s}function _b(s,{inflateAmount:e},t){s.inflateAmount=e==="auto"?t===1?.33:0:e}class An extends Hs{parsePrimitiveData(e,t,i,n){return hc(e,t,i,n)}parseArrayData(e,t,i,n){return hc(e,t,i,n)}parseObjectData(e,t,i,n){const{iScale:a,vScale:r}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,h=a.axis==="x"?l:c,u=r.axis==="x"?l:c,m=[];let p,x,v,b;for(p=i,x=i+n;p<x;++p)b=t[p],v={},v[a.axis]=a.parse(ms(b,h),p),m.push(sh(ms(b,u),v,r,p));return m}updateRangeFromParsed(e,t,i,n){super.updateRangeFromParsed(e,t,i,n);const a=i._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:i,vScale:n}=t,a=this.getParsed(e),r=a._custom,l=Ka(r)?"["+r.start+", "+r.end+"]":""+n.getLabelForValue(a[n.axis]);return{label:""+i.getLabelForValue(a[i.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,i,n){const a=n==="reset",{index:r,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),h=l.isHorizontal(),u=this._getRuler(),{sharedOptions:m,includeOptions:p}=this._getSharedOptions(t,n);for(let x=t;x<t+i;x++){const v=this.getParsed(x),b=a||ge(v[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(x),_=this._calculateBarIndexPixels(x,u),w=(v._stacks||{})[l.axis],j={horizontal:h,base:b.base,enableBorderRadius:!w||Ka(v._custom)||r===w._top||r===w._bottom,x:h?b.head:_.center,y:h?_.center:b.head,height:h?_.size:Math.abs(b.size),width:h?Math.abs(b.size):_.size};p&&(j.options=m||this.resolveDataElementOptions(x,e[x].active?"active":n));const C=j.options||e[x].options;yb(j,C,w,r),_b(j,C,u.ratio),this.updateElement(e[x],x,j,n)}}_getStacks(e,t){const{iScale:i}=this._cachedMeta,n=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),a=i.options.stacked,r=[],l=this._cachedMeta.controller.getParsed(t),c=l&&l[i.axis],h=u=>{const m=u._parsed.find(x=>x[i.axis]===c),p=m&&m[u.vScale.axis];if(ge(p)||isNaN(p))return!0};for(const u of n)if(!(t!==void 0&&h(u))&&((a===!1||r.indexOf(u.stack)===-1||a===void 0&&u.stack===void 0)&&r.push(u.stack),u.index===e))break;return r.length||r.push(void 0),r}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[J(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,i){const n=this._getStacks(e,i),a=t!==void 0?n.indexOf(t):-1;return a===-1?n.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,i=t.iScale,n=[];let a,r;for(a=0,r=t.data.length;a<r;++a)n.push(i.getPixelForValue(this.getParsed(a)[i.axis],a));const l=e.barThickness;return{min:l||fb(t),pixels:n,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:i,index:n},options:{base:a,minBarLength:r}}=this,l=a||0,c=this.getParsed(e),h=c._custom,u=Ka(h);let m=c[t.axis],p=0,x=i?this.applyStack(t,c,i):m,v,b;x!==m&&(p=x-m,x=m),u&&(m=h.barStart,x=h.barEnd-h.barStart,m!==0&&_t(m)!==_t(h.barEnd)&&(p=0),p+=m);const _=!ge(a)&&!u?a:p;let w=t.getPixelForValue(_);if(this.chart.getDataVisibility(e)?v=t.getPixelForValue(p+x):v=w,b=v-w,Math.abs(b)<r){b=xb(b,t,l)*r,m===l&&(w-=b/2);const j=t.getPixelForDecimal(0),C=t.getPixelForDecimal(1),P=Math.min(j,C),A=Math.max(j,C);w=Math.max(Math.min(w,A),P),v=w+b,i&&!u&&(c._stacks[t.axis]._visualValues[n]=t.getValueForPixel(v)-t.getValueForPixel(w))}if(w===t.getPixelForValue(l)){const j=_t(b)*t.getLineWidthForValue(l)/2;w+=j,b-=j}return{size:b,base:w,head:v,center:v+b/2}}_calculateBarIndexPixels(e,t){const i=t.scale,n=this.options,a=n.skipNull,r=J(n.maxBarThickness,1/0);let l,c;const h=this._getAxisCount();if(t.grouped){const u=a?this._getStackCount(e):t.stackCount,m=n.barThickness==="flex"?pb(e,t,n,u*h):mb(e,t,n,u*h),p=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,x=this._getAxis().indexOf(J(p,this.getFirstScaleIdForIndexAxis())),v=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+x;l=m.start+m.chunk*v+m.chunk/2,c=Math.min(r,m.chunk*m.ratio)}else l=i.getPixelForValue(this.getParsed(e)[i.axis],e),c=Math.min(r,t.min*t.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,t=e.vScale,i=e.data,n=i.length;let a=0;for(;a<n;++a)this.getParsed(a)[t.axis]!==null&&!i[a].hidden&&i[a].draw(this._ctx)}}D(An,"id","bar"),D(An,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),D(An,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});function wb(s,e,t){let i=1,n=1,a=0,r=0;if(e<we){const l=s,c=l+e,h=Math.cos(l),u=Math.sin(l),m=Math.cos(c),p=Math.sin(c),x=(C,P,A)=>Ti(C,l,c,!0)?1:Math.max(P,P*t,A,A*t),v=(C,P,A)=>Ti(C,l,c,!0)?-1:Math.min(P,P*t,A,A*t),b=x(0,h,m),_=x(Se,u,p),w=v(ce,h,m),j=v(ce+Se,u,p);i=(b-w)/2,n=(_-j)/2,a=-(b+w)/2,r=-(_+j)/2}return{ratioX:i,ratioY:n,offsetX:a,offsetY:r}}class hi extends Hs{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const i=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=i;else{let a=c=>+i[c];if(ie(i[e])){const{key:c="value"}=this._parsing;a=h=>+ms(i[h],c)}let r,l;for(r=e,l=e+t;r<l;++r)n._parsed[r]=a(r)}}_getRotation(){return Pt(this.options.rotation-90)}_getCircumference(){return Pt(this.options.circumference)}_getRotationExtents(){let e=we,t=-we;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const n=this.chart.getDatasetMeta(i).controller,a=n._getRotation(),r=n._getCircumference();e=Math.min(e,a),t=Math.max(t,a+r)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:i}=t,n=this._cachedMeta,a=n.data,r=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,l=Math.max((Math.min(i.width,i.height)-r)/2,0),c=Math.min(Ag(this.options.cutout,l),1),h=this._getRingWeight(this.index),{circumference:u,rotation:m}=this._getRotationExtents(),{ratioX:p,ratioY:x,offsetX:v,offsetY:b}=wb(m,u,c),_=(i.width-r)/p,w=(i.height-r)/x,j=Math.max(Math.min(_,w)/2,0),C=Ld(this.options.radius,j),P=Math.max(C*c,0),A=(C-P)/this._getVisibleDatasetWeightTotal();this.offsetX=v*C,this.offsetY=b*C,n.total=this.calculateTotal(),this.outerRadius=C-A*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-A*h,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const i=this.options,n=this._cachedMeta,a=this._getCircumference();return t&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||n._parsed[e]===null||n.data[e].hidden?0:this.calculateCircumference(n._parsed[e]*a/we)}updateElements(e,t,i,n){const a=n==="reset",r=this.chart,l=r.chartArea,h=r.options.animation,u=(l.left+l.right)/2,m=(l.top+l.bottom)/2,p=a&&h.animateScale,x=p?0:this.innerRadius,v=p?0:this.outerRadius,{sharedOptions:b,includeOptions:_}=this._getSharedOptions(t,n);let w=this._getRotation(),j;for(j=0;j<t;++j)w+=this._circumference(j,a);for(j=t;j<t+i;++j){const C=this._circumference(j,a),P=e[j],A={x:u+this.offsetX,y:m+this.offsetY,startAngle:w,endAngle:w+C,circumference:C,outerRadius:v,innerRadius:x};_&&(A.options=b||this.resolveDataElementOptions(j,P.active?"active":n)),w+=C,this.updateElement(P,j,A,n)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let i=0,n;for(n=0;n<t.length;n++){const a=e._parsed[n];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(n)&&!t[n].hidden&&(i+=Math.abs(a))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?we*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,i=this.chart,n=i.data.labels||[],a=Er(t._parsed[e],i.options.locale);return{label:n[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const i=this.chart;let n,a,r,l,c;if(!e){for(n=0,a=i.data.datasets.length;n<a;++n)if(i.isDatasetVisible(n)){r=i.getDatasetMeta(n),e=r.data,l=r.controller;break}}if(!e)return 0;for(n=0,a=e.length;n<a;++n)c=l.resolveDataElementOptions(n),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let i=0,n=e.length;i<n;++i){const a=this.resolveDataElementOptions(i);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(t+=this._getRingWeight(i));return t}_getRingWeight(e){return Math.max(J(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}D(hi,"id","doughnut"),D(hi,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),D(hi,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),D(hi,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:i,color:n}}=e.legend.options;return t.labels.map((a,r)=>{const c=e.getDatasetMeta(0).controller.getStyle(r);return{text:a,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:n,lineWidth:c.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,i){i.chart.toggleDataVisibility(t.index),i.chart.update()}}}});function cs(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $r{constructor(e){D(this,"options");this.options=e||{}}static override(e){Object.assign($r.prototype,e)}init(){}formats(){return cs()}parse(){return cs()}format(){return cs()}add(){return cs()}diff(){return cs()}startOf(){return cs()}endOf(){return cs()}}var jb={_date:$r};function kb(s,e,t,i){const{controller:n,data:a,_sorted:r}=s,l=n._cachedMeta.iScale,c=s.dataset&&s.dataset.options?s.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&r&&a.length){const h=l._reversePixels?Ug:or;if(i){if(n._sharedOptions){const u=a[0],m=typeof u.getRange=="function"&&u.getRange(e);if(m){const p=h(a,e,t-m),x=h(a,e,t+m);return{lo:p.lo,hi:x.hi}}}}else{const u=h(a,e,t);if(c){const{vScale:m}=n._cachedMeta,{_parsed:p}=s,x=p.slice(0,u.lo+1).reverse().findIndex(b=>!ge(b[m.axis]));u.lo-=Math.max(0,x);const v=p.slice(u.hi).findIndex(b=>!ge(b[m.axis]));u.hi+=Math.max(0,v)}return u}}return{lo:0,hi:a.length-1}}function Jn(s,e,t,i,n){const a=s.getSortedVisibleDatasetMetas(),r=t[e];for(let l=0,c=a.length;l<c;++l){const{index:h,data:u}=a[l],{lo:m,hi:p}=kb(a[l],e,r,n);for(let x=m;x<=p;++x){const v=u[x];v.skip||i(v,h,x)}}}function Nb(s){const e=s.indexOf("x")!==-1,t=s.indexOf("y")!==-1;return function(i,n){const a=e?Math.abs(i.x-n.x):0,r=t?Math.abs(i.y-n.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(r,2))}}function Ga(s,e,t,i,n){const a=[];return!n&&!s.isPointInArea(e)||Jn(s,t,e,function(l,c,h){!n&&!Ai(l,s.chartArea,0)||l.inRange(e.x,e.y,i)&&a.push({element:l,datasetIndex:c,index:h})},!0),a}function Cb(s,e,t,i){let n=[];function a(r,l,c){const{startAngle:h,endAngle:u}=r.getProps(["startAngle","endAngle"],i),{angle:m}=Fd(r,{x:e.x,y:e.y});Ti(m,h,u)&&n.push({element:r,datasetIndex:l,index:c})}return Jn(s,t,e,a),n}function Sb(s,e,t,i,n,a){let r=[];const l=Nb(t);let c=Number.POSITIVE_INFINITY;function h(u,m,p){const x=u.inRange(e.x,e.y,n);if(i&&!x)return;const v=u.getCenterPoint(n);if(!(!!a||s.isPointInArea(v))&&!x)return;const _=l(e,v);_<c?(r=[{element:u,datasetIndex:m,index:p}],c=_):_===c&&r.push({element:u,datasetIndex:m,index:p})}return Jn(s,t,e,h),r}function qa(s,e,t,i,n,a){return!a&&!s.isPointInArea(e)?[]:t==="r"&&!i?Cb(s,e,t,n):Sb(s,e,t,i,n,a)}function mc(s,e,t,i,n){const a=[],r=t==="x"?"inXRange":"inYRange";let l=!1;return Jn(s,t,e,(c,h,u)=>{c[r]&&c[r](e[t],n)&&(a.push({element:c,datasetIndex:h,index:u}),l=l||c.inRange(e.x,e.y,n))}),i&&!l?[]:a}var Tb={modes:{index(s,e,t,i){const n=ds(e,s),a=t.axis||"x",r=t.includeInvisible||!1,l=t.intersect?Ga(s,n,a,i,r):qa(s,n,a,!1,i,r),c=[];return l.length?(s.getSortedVisibleDatasetMetas().forEach(h=>{const u=l[0].index,m=h.data[u];m&&!m.skip&&c.push({element:m,datasetIndex:h.index,index:u})}),c):[]},dataset(s,e,t,i){const n=ds(e,s),a=t.axis||"xy",r=t.includeInvisible||!1;let l=t.intersect?Ga(s,n,a,i,r):qa(s,n,a,!1,i,r);if(l.length>0){const c=l[0].datasetIndex,h=s.getDatasetMeta(c).data;l=[];for(let u=0;u<h.length;++u)l.push({element:h[u],datasetIndex:c,index:u})}return l},point(s,e,t,i){const n=ds(e,s),a=t.axis||"xy",r=t.includeInvisible||!1;return Ga(s,n,a,i,r)},nearest(s,e,t,i){const n=ds(e,s),a=t.axis||"xy",r=t.includeInvisible||!1;return qa(s,n,a,t.intersect,i,r)},x(s,e,t,i){const n=ds(e,s);return mc(s,n,"x",t.intersect,i)},y(s,e,t,i){const n=ds(e,s);return mc(s,n,"y",t.intersect,i)}}};const ih=["left","top","right","bottom"];function ai(s,e){return s.filter(t=>t.pos===e)}function pc(s,e){return s.filter(t=>ih.indexOf(t.pos)===-1&&t.box.axis===e)}function ri(s,e){return s.sort((t,i)=>{const n=e?i:t,a=e?t:i;return n.weight===a.weight?n.index-a.index:n.weight-a.weight})}function Ab(s){const e=[];let t,i,n,a,r,l;for(t=0,i=(s||[]).length;t<i;++t)n=s[t],{position:a,options:{stack:r,stackWeight:l=1}}=n,e.push({index:t,box:n,pos:a,horizontal:n.isHorizontal(),weight:n.weight,stack:r&&a+r,stackWeight:l});return e}function Mb(s){const e={};for(const t of s){const{stack:i,pos:n,stackWeight:a}=t;if(!i||!ih.includes(n))continue;const r=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=a}return e}function Eb(s,e){const t=Mb(s),{vBoxMaxWidth:i,hBoxMaxHeight:n}=e;let a,r,l;for(a=0,r=s.length;a<r;++a){l=s[a];const{fullSize:c}=l.box,h=t[l.stack],u=h&&l.stackWeight/h.weight;l.horizontal?(l.width=u?u*i:c&&e.availableWidth,l.height=n):(l.width=i,l.height=u?u*n:c&&e.availableHeight)}return t}function Pb(s){const e=Ab(s),t=ri(e.filter(h=>h.box.fullSize),!0),i=ri(ai(e,"left"),!0),n=ri(ai(e,"right")),a=ri(ai(e,"top"),!0),r=ri(ai(e,"bottom")),l=pc(e,"x"),c=pc(e,"y");return{fullSize:t,leftAndTop:i.concat(a),rightAndBottom:n.concat(c).concat(r).concat(l),chartArea:ai(e,"chartArea"),vertical:i.concat(n).concat(c),horizontal:a.concat(r).concat(l)}}function gc(s,e,t,i){return Math.max(s[t],e[t])+Math.max(s[i],e[i])}function nh(s,e){s.top=Math.max(s.top,e.top),s.left=Math.max(s.left,e.left),s.bottom=Math.max(s.bottom,e.bottom),s.right=Math.max(s.right,e.right)}function Rb(s,e,t,i){const{pos:n,box:a}=t,r=s.maxPadding;if(!ie(n)){t.size&&(s[n]-=t.size);const m=i[t.stack]||{size:0,count:1};m.size=Math.max(m.size,t.horizontal?a.height:a.width),t.size=m.size/m.count,s[n]+=t.size}a.getPadding&&nh(r,a.getPadding());const l=Math.max(0,e.outerWidth-gc(r,s,"left","right")),c=Math.max(0,e.outerHeight-gc(r,s,"top","bottom")),h=l!==s.w,u=c!==s.h;return s.w=l,s.h=c,t.horizontal?{same:h,other:u}:{same:u,other:h}}function Db(s){const e=s.maxPadding;function t(i){const n=Math.max(e[i]-s[i],0);return s[i]+=n,n}s.y+=t("top"),s.x+=t("left"),t("right"),t("bottom")}function Lb(s,e){const t=e.maxPadding;function i(n){const a={left:0,top:0,right:0,bottom:0};return n.forEach(r=>{a[r]=Math.max(e[r],t[r])}),a}return i(s?["left","right"]:["top","bottom"])}function ui(s,e,t,i){const n=[];let a,r,l,c,h,u;for(a=0,r=s.length,h=0;a<r;++a){l=s[a],c=l.box,c.update(l.width||e.w,l.height||e.h,Lb(l.horizontal,e));const{same:m,other:p}=Rb(e,t,l,i);h|=m&&n.length,u=u||p,c.fullSize||n.push(l)}return h&&ui(n,e,t,i)||u}function xn(s,e,t,i,n){s.top=t,s.left=e,s.right=e+i,s.bottom=t+n,s.width=i,s.height=n}function xc(s,e,t,i){const n=t.padding;let{x:a,y:r}=e;for(const l of s){const c=l.box,h=i[l.stack]||{placed:0,weight:1},u=l.stackWeight/h.weight||1;if(l.horizontal){const m=e.w*u,p=h.size||c.height;Si(h.start)&&(r=h.start),c.fullSize?xn(c,n.left,r,t.outerWidth-n.right-n.left,p):xn(c,e.left+h.placed,r,m,p),h.start=r,h.placed+=m,r=c.bottom}else{const m=e.h*u,p=h.size||c.width;Si(h.start)&&(a=h.start),c.fullSize?xn(c,a,n.top,p,t.outerHeight-n.bottom-n.top):xn(c,a,e.top+h.placed,p,m),h.start=a,h.placed+=m,a=c.right}}e.x=a,e.y=r}var nt={addBox(s,e){s.boxes||(s.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},s.boxes.push(e)},removeBox(s,e){const t=s.boxes?s.boxes.indexOf(e):-1;t!==-1&&s.boxes.splice(t,1)},configure(s,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(s,e,t,i){if(!s)return;const n=rt(s.options.layout.padding),a=Math.max(e-n.width,0),r=Math.max(t-n.height,0),l=Pb(s.boxes),c=l.vertical,h=l.horizontal;le(s.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const u=c.reduce((b,_)=>_.box.options&&_.box.options.display===!1?b:b+1,0)||1,m=Object.freeze({outerWidth:e,outerHeight:t,padding:n,availableWidth:a,availableHeight:r,vBoxMaxWidth:a/2/u,hBoxMaxHeight:r/2}),p=Object.assign({},n);nh(p,rt(i));const x=Object.assign({maxPadding:p,w:a,h:r,x:n.left,y:n.top},n),v=Eb(c.concat(h),m);ui(l.fullSize,x,m,v),ui(c,x,m,v),ui(h,x,m,v)&&ui(c,x,m,v),Db(x),xc(l.leftAndTop,x,m,v),x.x+=x.w,x.y+=x.h,xc(l.rightAndBottom,x,m,v),s.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},le(l.chartArea,b=>{const _=b.box;Object.assign(_,s.chartArea),_.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}};class ah{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,n){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,n?Math.floor(t/n):i)}}isAttached(e){return!0}updateConfig(e){}}class Ob extends ah{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Mn="$chartjs",Ib={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},bc=s=>s===null||s==="";function Fb(s,e){const t=s.style,i=s.getAttribute("height"),n=s.getAttribute("width");if(s[Mn]={initial:{height:i,width:n,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",bc(n)){const a=tc(s,"width");a!==void 0&&(s.width=a)}if(bc(i))if(s.style.height==="")s.height=s.width/(e||2);else{const a=tc(s,"height");a!==void 0&&(s.height=a)}return s}const rh=Ix?{passive:!0}:!1;function zb(s,e,t){s&&s.addEventListener(e,t,rh)}function $b(s,e,t){s&&s.canvas&&s.canvas.removeEventListener(e,t,rh)}function Bb(s,e){const t=Ib[s.type]||s.type,{x:i,y:n}=ds(s,e);return{type:t,chart:e,native:s,x:i!==void 0?i:null,y:n!==void 0?n:null}}function Hn(s,e){for(const t of s)if(t===e||t.contains(e))return!0}function Hb(s,e,t){const i=s.canvas,n=new MutationObserver(a=>{let r=!1;for(const l of a)r=r||Hn(l.addedNodes,i),r=r&&!Hn(l.removedNodes,i);r&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}function Wb(s,e,t){const i=s.canvas,n=new MutationObserver(a=>{let r=!1;for(const l of a)r=r||Hn(l.removedNodes,i),r=r&&!Hn(l.addedNodes,i);r&&t()});return n.observe(document,{childList:!0,subtree:!0}),n}const Ei=new Map;let yc=0;function oh(){const s=window.devicePixelRatio;s!==yc&&(yc=s,Ei.forEach((e,t)=>{t.currentDevicePixelRatio!==s&&e()}))}function Ub(s,e){Ei.size||window.addEventListener("resize",oh),Ei.set(s,e)}function Vb(s){Ei.delete(s),Ei.size||window.removeEventListener("resize",oh)}function Yb(s,e,t){const i=s.canvas,n=i&&zr(i);if(!n)return;const a=Hd((l,c)=>{const h=n.clientWidth;t(l,c),h<n.clientWidth&&t()},window),r=new ResizeObserver(l=>{const c=l[0],h=c.contentRect.width,u=c.contentRect.height;h===0&&u===0||a(h,u)});return r.observe(n),Ub(s,a),r}function Xa(s,e,t){t&&t.disconnect(),e==="resize"&&Vb(s)}function Kb(s,e,t){const i=s.canvas,n=Hd(a=>{s.ctx!==null&&t(Bb(a,s))},s);return zb(i,e,n),n}class Gb extends ah{acquireContext(e,t){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Fb(e,t),i):null}releaseContext(e){const t=e.canvas;if(!t[Mn])return!1;const i=t[Mn].initial;["height","width"].forEach(a=>{const r=i[a];ge(r)?t.removeAttribute(a):t.setAttribute(a,r)});const n=i.style||{};return Object.keys(n).forEach(a=>{t.style[a]=n[a]}),t.width=t.width,delete t[Mn],!0}addEventListener(e,t,i){this.removeEventListener(e,t);const n=e.$proxies||(e.$proxies={}),r={attach:Hb,detach:Wb,resize:Yb}[t]||Kb;n[t]=r(e,t,i)}removeEventListener(e,t){const i=e.$proxies||(e.$proxies={}),n=i[t];if(!n)return;({attach:Xa,detach:Xa,resize:Xa}[t]||$b)(e,t,n),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,n){return Ox(e,t,i,n)}isAttached(e){const t=e&&zr(e);return!!(t&&t.isConnected)}}function qb(s){return!Fr()||typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas?Ob:Gb}var Nn;let Ft=(Nn=class{constructor(){D(this,"x");D(this,"y");D(this,"active",!1);D(this,"options");D(this,"$animations")}tooltipPosition(e){const{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return zn(this.x)&&zn(this.y)}getProps(e,t){const i=this.$animations;if(!t||!i)return this;const n={};return e.forEach(a=>{n[a]=i[a]&&i[a].active()?i[a]._to:this[a]}),n}},D(Nn,"defaults",{}),D(Nn,"defaultRoutes"),Nn);function Xb(s,e){const t=s.options.ticks,i=Qb(s),n=Math.min(t.maxTicksLimit||i,i),a=t.major.enabled?Jb(e):[],r=a.length,l=a[0],c=a[r-1],h=[];if(r>n)return ey(e,h,a,r/n),h;const u=Zb(a,e,n);if(r>0){let m,p;const x=r>1?Math.round((c-l)/(r-1)):null;for(bn(e,h,u,ge(x)?0:l-x,l),m=0,p=r-1;m<p;m++)bn(e,h,u,a[m],a[m+1]);return bn(e,h,u,c,ge(x)?e.length:c+x),h}return bn(e,h,u),h}function Qb(s){const e=s.options.offset,t=s._tickSize(),i=s._length/t+(e?0:1),n=s._maxLength/t;return Math.floor(Math.min(i,n))}function Zb(s,e,t){const i=ty(s),n=e.length/t;if(!i)return Math.max(n,1);const a=Ig(i);for(let r=0,l=a.length-1;r<l;r++){const c=a[r];if(c>n)return c}return Math.max(n,1)}function Jb(s){const e=[];let t,i;for(t=0,i=s.length;t<i;t++)s[t].major&&e.push(t);return e}function ey(s,e,t,i){let n=0,a=t[0],r;for(i=Math.ceil(i),r=0;r<s.length;r++)r===a&&(e.push(s[r]),n++,a=t[n*i])}function bn(s,e,t,i,n){const a=J(i,0),r=Math.min(J(n,s.length),s.length);let l=0,c,h,u;for(t=Math.ceil(t),n&&(c=n-i,t=c/Math.floor(c/t)),u=a;u<0;)l++,u=Math.round(a+l*t);for(h=Math.max(a,0);h<r;h++)h===u&&(e.push(s[h]),l++,u=Math.round(a+l*t))}function ty(s){const e=s.length;let t,i;if(e<2)return!1;for(i=s[0],t=1;t<e;++t)if(s[t]-s[t-1]!==i)return!1;return i}const sy=s=>s==="left"?"right":s==="right"?"left":s,vc=(s,e,t)=>e==="top"||e==="left"?s[e]+t:s[e]-t,_c=(s,e)=>Math.min(e||s,s);function wc(s,e){const t=[],i=s.length/e,n=s.length;let a=0;for(;a<n;a+=i)t.push(s[Math.floor(a)]);return t}function iy(s,e,t){const i=s.ticks.length,n=Math.min(e,i-1),a=s._startPixel,r=s._endPixel,l=1e-6;let c=s.getPixelForTick(n),h;if(!(t&&(i===1?h=Math.max(c-a,r-c):e===0?h=(s.getPixelForTick(1)-c)/2:h=(c-s.getPixelForTick(n-1))/2,c+=n<e?h:-h,c<a-l||c>r+l)))return c}function ny(s,e){le(s,t=>{const i=t.gc,n=i.length/2;let a;if(n>e){for(a=0;a<n;++a)delete t.data[i[a]];i.splice(0,n)}})}function oi(s){return s.drawTicks?s.tickLength:0}function jc(s,e){if(!s.display)return 0;const t=De(s.font,e),i=rt(s.padding);return(Ce(s.text)?s.text.length:1)*t.lineHeight+i.height}function ay(s,e){return vs(s,{scale:e,type:"scale"})}function ry(s,e,t){return vs(s,{tick:t,index:e,type:"tick"})}function oy(s,e,t){let i=Ar(s);return(t&&e!=="right"||!t&&e==="right")&&(i=sy(i)),i}function ly(s,e,t,i){const{top:n,left:a,bottom:r,right:l,chart:c}=s,{chartArea:h,scales:u}=c;let m=0,p,x,v;const b=r-n,_=l-a;if(s.isHorizontal()){if(x=Re(i,a,l),ie(t)){const w=Object.keys(t)[0],j=t[w];v=u[w].getPixelForValue(j)+b-e}else t==="center"?v=(h.bottom+h.top)/2+b-e:v=vc(s,t,e);p=l-a}else{if(ie(t)){const w=Object.keys(t)[0],j=t[w];x=u[w].getPixelForValue(j)-_+e}else t==="center"?x=(h.left+h.right)/2-_+e:x=vc(s,t,e);v=Re(i,r,n),m=t==="left"?-Se:Se}return{titleX:x,titleY:v,maxWidth:p,rotation:m}}class Ys extends Ft{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:n}=this;return e=gt(e,Number.POSITIVE_INFINITY),t=gt(t,Number.NEGATIVE_INFINITY),i=gt(i,Number.POSITIVE_INFINITY),n=gt(n,Number.NEGATIVE_INFINITY),{min:gt(e,i),max:gt(t,n),minDefined:at(e),maxDefined:at(t)}}getMinMax(e){let{min:t,max:i,minDefined:n,maxDefined:a}=this.getUserBounds(),r;if(n&&a)return{min:t,max:i};const l=this.getMatchingVisibleMetas();for(let c=0,h=l.length;c<h;++c)r=l[c].controller.getMinMax(this,e),n||(t=Math.min(t,r.min)),a||(i=Math.max(i,r.max));return t=a&&t>i?i:t,i=n&&t>i?t:i,{min:gt(t,gt(i,t)),max:gt(i,gt(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){be(this.options.beforeUpdate,[this])}update(e,t,i){const{beginAtZero:n,grace:a,ticks:r}=this.options,l=r.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=mx(this,a,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?wc(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=Xb(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){be(this.options.afterUpdate,[this])}beforeSetDimensions(){be(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){be(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),be(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){be(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let i,n,a;for(i=0,n=e.length;i<n;i++)a=e[i],a.label=be(t.callback,[a.value,i,e],this)}afterTickToLabelConversion(){be(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){be(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,i=_c(this.ticks.length,e.ticks.maxTicksLimit),n=t.minRotation||0,a=t.maxRotation;let r=n,l,c,h;if(!this._isVisible()||!t.display||n>=a||i<=1||!this.isHorizontal()){this.labelRotation=n;return}const u=this._getLabelSizes(),m=u.widest.width,p=u.highest.height,x=Ve(this.chart.width-m,0,this.maxWidth);l=e.offset?this.maxWidth/i:x/(i-1),m+6>l&&(l=x/(i-(e.offset?.5:1)),c=this.maxHeight-oi(e.grid)-t.padding-jc(e.title,this.chart.options.font),h=Math.sqrt(m*m+p*p),r=Bg(Math.min(Math.asin(Ve((u.highest.height+6)/l,-1,1)),Math.asin(Ve(c/h,-1,1))-Math.asin(Ve(p/h,-1,1)))),r=Math.max(n,Math.min(a,r))),this.labelRotation=r}afterCalculateLabelRotation(){be(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){be(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:i,title:n,grid:a}}=this,r=this._isVisible(),l=this.isHorizontal();if(r){const c=jc(n,t.options.font);if(l?(e.width=this.maxWidth,e.height=oi(a)+c):(e.height=this.maxHeight,e.width=oi(a)+c),i.display&&this.ticks.length){const{first:h,last:u,widest:m,highest:p}=this._getLabelSizes(),x=i.padding*2,v=Pt(this.labelRotation),b=Math.cos(v),_=Math.sin(v);if(l){const w=i.mirror?0:_*m.width+b*p.height;e.height=Math.min(this.maxHeight,e.height+w+x)}else{const w=i.mirror?0:b*m.width+_*p.height;e.width=Math.min(this.maxWidth,e.width+w+x)}this._calculatePadding(h,u,_,b)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,n){const{ticks:{align:a,padding:r},position:l}=this.options,c=this.labelRotation!==0,h=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let p=0,x=0;c?h?(p=n*e.width,x=i*t.height):(p=i*e.height,x=n*t.width):a==="start"?x=t.width:a==="end"?p=e.width:a!=="inner"&&(p=e.width/2,x=t.width/2),this.paddingLeft=Math.max((p-u+r)*this.width/(this.width-u),0),this.paddingRight=Math.max((x-m+r)*this.width/(this.width-m),0)}else{let u=t.height/2,m=e.height/2;a==="start"?(u=0,m=e.height):a==="end"&&(u=t.height,m=0),this.paddingTop=u+r,this.paddingBottom=m+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){be(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)ge(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let i=this.ticks;t<i.length&&(i=wc(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){const{ctx:n,_longestTextCache:a}=this,r=[],l=[],c=Math.floor(t/_c(t,i));let h=0,u=0,m,p,x,v,b,_,w,j,C,P,A;for(m=0;m<t;m+=c){if(v=e[m].label,b=this._resolveTickFontOptions(m),n.font=_=b.string,w=a[_]=a[_]||{data:{},gc:[]},j=b.lineHeight,C=P=0,!ge(v)&&!Ce(v))C=Xl(n,w.data,w.gc,C,v),P=j;else if(Ce(v))for(p=0,x=v.length;p<x;++p)A=v[p],!ge(A)&&!Ce(A)&&(C=Xl(n,w.data,w.gc,C,A),P+=j);r.push(C),l.push(P),h=Math.max(C,h),u=Math.max(P,u)}ny(a,t);const O=r.indexOf(h),B=l.indexOf(u),F=$=>({width:r[$]||0,height:l[$]||0});return{first:F(0),last:F(t-1),widest:F(O),highest:F(B),widths:r,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return Wg(this._alignToPixels?ls(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const i=t[e];return i.$context||(i.$context=ry(this.getContext(),e,i))}return this.$context||(this.$context=ay(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Pt(this.labelRotation),i=Math.abs(Math.cos(t)),n=Math.abs(Math.sin(t)),a=this._getLabelSizes(),r=e.autoSkipPadding||0,l=a?a.widest.width+r:0,c=a?a.highest.height+r:0;return this.isHorizontal()?c*i>l*n?l/i:c/n:c*n<l*i?c/i:l/n}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,i=this.chart,n=this.options,{grid:a,position:r,border:l}=n,c=a.offset,h=this.isHorizontal(),m=this.ticks.length+(c?1:0),p=oi(a),x=[],v=l.setContext(this.getContext()),b=v.display?v.width:0,_=b/2,w=function(ae){return ls(i,ae,b)};let j,C,P,A,O,B,F,$,H,Y,Z,ye;if(r==="top")j=w(this.bottom),B=this.bottom-p,$=j-_,Y=w(e.top)+_,ye=e.bottom;else if(r==="bottom")j=w(this.top),Y=e.top,ye=w(e.bottom)-_,B=j+_,$=this.top+p;else if(r==="left")j=w(this.right),O=this.right-p,F=j-_,H=w(e.left)+_,Z=e.right;else if(r==="right")j=w(this.left),H=e.left,Z=w(e.right)-_,O=j+_,F=this.left+p;else if(t==="x"){if(r==="center")j=w((e.top+e.bottom)/2+.5);else if(ie(r)){const ae=Object.keys(r)[0],me=r[ae];j=w(this.chart.scales[ae].getPixelForValue(me))}Y=e.top,ye=e.bottom,B=j+_,$=B+p}else if(t==="y"){if(r==="center")j=w((e.left+e.right)/2);else if(ie(r)){const ae=Object.keys(r)[0],me=r[ae];j=w(this.chart.scales[ae].getPixelForValue(me))}O=j-_,F=O-p,H=e.left,Z=e.right}const Te=J(n.ticks.maxTicksLimit,m),se=Math.max(1,Math.ceil(m/Te));for(C=0;C<m;C+=se){const ae=this.getContext(C),me=a.setContext(ae),Me=l.setContext(ae),Ne=me.lineWidth,q=me.color,M=Me.dash||[],Le=Me.dashOffset,Pe=me.tickWidth,He=me.tickColor,Ee=me.tickBorderDash||[],Ye=me.tickBorderDashOffset;P=iy(this,C,c),P!==void 0&&(A=ls(i,P,Ne),h?O=F=H=Z=A:B=$=Y=ye=A,x.push({tx1:O,ty1:B,tx2:F,ty2:$,x1:H,y1:Y,x2:Z,y2:ye,width:Ne,color:q,borderDash:M,borderDashOffset:Le,tickWidth:Pe,tickColor:He,tickBorderDash:Ee,tickBorderDashOffset:Ye}))}return this._ticksLength=m,this._borderValue=j,x}_computeLabelItems(e){const t=this.axis,i=this.options,{position:n,ticks:a}=i,r=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:h,padding:u,mirror:m}=a,p=oi(i.grid),x=p+u,v=m?-u:x,b=-Pt(this.labelRotation),_=[];let w,j,C,P,A,O,B,F,$,H,Y,Z,ye="middle";if(n==="top")O=this.bottom-v,B=this._getXAxisLabelAlignment();else if(n==="bottom")O=this.top+v,B=this._getXAxisLabelAlignment();else if(n==="left"){const se=this._getYAxisLabelAlignment(p);B=se.textAlign,A=se.x}else if(n==="right"){const se=this._getYAxisLabelAlignment(p);B=se.textAlign,A=se.x}else if(t==="x"){if(n==="center")O=(e.top+e.bottom)/2+x;else if(ie(n)){const se=Object.keys(n)[0],ae=n[se];O=this.chart.scales[se].getPixelForValue(ae)+x}B=this._getXAxisLabelAlignment()}else if(t==="y"){if(n==="center")A=(e.left+e.right)/2-x;else if(ie(n)){const se=Object.keys(n)[0],ae=n[se];A=this.chart.scales[se].getPixelForValue(ae)}B=this._getYAxisLabelAlignment(p).textAlign}t==="y"&&(c==="start"?ye="top":c==="end"&&(ye="bottom"));const Te=this._getLabelSizes();for(w=0,j=l.length;w<j;++w){C=l[w],P=C.label;const se=a.setContext(this.getContext(w));F=this.getPixelForTick(w)+a.labelOffset,$=this._resolveTickFontOptions(w),H=$.lineHeight,Y=Ce(P)?P.length:1;const ae=Y/2,me=se.color,Me=se.textStrokeColor,Ne=se.textStrokeWidth;let q=B;r?(A=F,B==="inner"&&(w===j-1?q=this.options.reverse?"left":"right":w===0?q=this.options.reverse?"right":"left":q="center"),n==="top"?h==="near"||b!==0?Z=-Y*H+H/2:h==="center"?Z=-Te.highest.height/2-ae*H+H:Z=-Te.highest.height+H/2:h==="near"||b!==0?Z=H/2:h==="center"?Z=Te.highest.height/2-ae*H:Z=Te.highest.height-Y*H,m&&(Z*=-1),b!==0&&!se.showLabelBackdrop&&(A+=H/2*Math.sin(b))):(O=F,Z=(1-Y)*H/2);let M;if(se.showLabelBackdrop){const Le=rt(se.backdropPadding),Pe=Te.heights[w],He=Te.widths[w];let Ee=Z-Le.top,Ye=0-Le.left;switch(ye){case"middle":Ee-=Pe/2;break;case"bottom":Ee-=Pe;break}switch(B){case"center":Ye-=He/2;break;case"right":Ye-=He;break;case"inner":w===j-1?Ye-=He:w>0&&(Ye-=He/2);break}M={left:Ye,top:Ee,width:He+Le.width,height:Pe+Le.height,color:se.backdropColor}}_.push({label:P,font:$,textOffset:Z,options:{rotation:b,color:me,strokeColor:Me,strokeWidth:Ne,textAlign:q,textBaseline:ye,translation:[A,O],backdrop:M}})}return _}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Pt(this.labelRotation))return e==="top"?"left":"right";let n="center";return t.align==="start"?n="left":t.align==="end"?n="right":t.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:i,mirror:n,padding:a}}=this.options,r=this._getLabelSizes(),l=e+a,c=r.widest.width;let h,u;return t==="left"?n?(u=this.right+a,i==="near"?h="left":i==="center"?(h="center",u+=c/2):(h="right",u+=c)):(u=this.right-l,i==="near"?h="right":i==="center"?(h="center",u-=c/2):(h="left",u=this.left)):t==="right"?n?(u=this.left+a,i==="near"?h="right":i==="center"?(h="center",u-=c/2):(h="left",u-=c)):(u=this.left+l,i==="near"?h="left":i==="center"?(h="center",u+=c/2):(h="right",u=this.right)):h="right",{textAlign:h,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:i,top:n,width:a,height:r}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,n,a,r),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(a=>a.value===e);return n>=0?t.setContext(this.getContext(n)).lineWidth:0}drawGrid(e){const t=this.options.grid,i=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,r;const l=(c,h,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(h.x,h.y),i.stroke(),i.restore())};if(t.display)for(a=0,r=n.length;a<r;++a){const c=n[a];t.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:i,grid:n}}=this,a=i.setContext(this.getContext()),r=i.display?a.width:0;if(!r)return;const l=n.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let h,u,m,p;this.isHorizontal()?(h=ls(e,this.left,r)-r/2,u=ls(e,this.right,l)+l/2,m=p=c):(m=ls(e,this.top,r)-r/2,p=ls(e,this.bottom,l)+l/2,h=u=c),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(h,m),t.lineTo(u,p),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,n=this._computeLabelArea();n&&Pr(i,n);const a=this.getLabelItems(e);for(const r of a){const l=r.options,c=r.font,h=r.label,u=r.textOffset;Mi(i,h,0,u,c,l)}n&&Rr(i)}drawTitle(){const{ctx:e,options:{position:t,title:i,reverse:n}}=this;if(!i.display)return;const a=De(i.font),r=rt(i.padding),l=i.align;let c=a.lineHeight/2;t==="bottom"||t==="center"||ie(t)?(c+=r.bottom,Ce(i.text)&&(c+=a.lineHeight*(i.text.length-1))):c+=r.top;const{titleX:h,titleY:u,maxWidth:m,rotation:p}=ly(this,c,t,l);Mi(e,i.text,0,0,a,{color:i.color,maxWidth:m,rotation:p,textAlign:oy(l,t,n),textBaseline:"middle",translation:[h,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,i=J(e.grid&&e.grid.z,-1),n=J(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ys.prototype.draw?[{z:t,draw:a=>{this.draw(a)}}]:[{z:i,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:t,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",n=[];let a,r;for(a=0,r=t.length;a<r;++a){const l=t[a];l[i]===this.id&&(!e||l.type===e)&&n.push(l)}return n}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return De(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class yn{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let i;hy(t)&&(i=this.register(t));const n=this.items,a=e.id,r=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in n||(n[a]=e,cy(e,r,i),this.override&&ke.override(e.id,e.overrides)),r}get(e){return this.items[e]}unregister(e){const t=this.items,i=e.id,n=this.scope;i in t&&delete t[i],n&&i in ke[n]&&(delete ke[n][i],this.override&&delete ps[i])}}function cy(s,e,t){const i=Ci(Object.create(null),[t?ke.get(t):{},ke.get(e),s.defaults]);ke.set(e,i),s.defaultRoutes&&dy(e,s.defaultRoutes),s.descriptors&&ke.describe(e,s.descriptors)}function dy(s,e){Object.keys(e).forEach(t=>{const i=t.split("."),n=i.pop(),a=[s].concat(i).join("."),r=e[t].split("."),l=r.pop(),c=r.join(".");ke.route(a,n,c,l)})}function hy(s){return"id"in s&&"defaults"in s}class uy{constructor(){this.controllers=new yn(Hs,"datasets",!0),this.elements=new yn(Ft,"elements"),this.plugins=new yn(Object,"plugins"),this.scales=new yn(Ys,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(n=>{const a=i||this._getRegistryForType(n);i||a.isForType(n)||a===this.plugins&&n.id?this._exec(e,a,n):le(n,r=>{const l=i||this._getRegistryForType(r);this._exec(e,l,r)})})}_exec(e,t,i){const n=Sr(e);be(i["before"+n],[],i),t[e](i),be(i["after"+n],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){const n=t.get(e);if(n===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return n}}var bt=new uy;class fy{constructor(){this._init=[]}notify(e,t,i,n){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=n?this._descriptors(e).filter(n):this._descriptors(e),r=this._notify(a,e,t,i);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,t,i,n){n=n||{};for(const a of e){const r=a.plugin,l=r[i],c=[t,n,a.options];if(be(l,c,r)===!1&&n.cancelable)return!1}return!0}invalidate(){ge(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const i=e&&e.config,n=J(i.options&&i.options.plugins,{}),a=my(i);return n===!1&&!t?[]:gy(e,a,n,t)}_notifyStateChanges(e){const t=this._oldCache||[],i=this._cache,n=(a,r)=>a.filter(l=>!r.some(c=>l.plugin.id===c.plugin.id));this._notify(n(t,i),e,"stop"),this._notify(n(i,t),e,"start")}}function my(s){const e={},t=[],i=Object.keys(bt.plugins.items);for(let a=0;a<i.length;a++)t.push(bt.getPlugin(i[a]));const n=s.plugins||[];for(let a=0;a<n.length;a++){const r=n[a];t.indexOf(r)===-1&&(t.push(r),e[r.id]=!0)}return{plugins:t,localIds:e}}function py(s,e){return!e&&s===!1?null:s===!0?{}:s}function gy(s,{plugins:e,localIds:t},i,n){const a=[],r=s.getContext();for(const l of e){const c=l.id,h=py(i[c],n);h!==null&&a.push({plugin:l,options:xy(s.config,{plugin:l,local:t[c]},h,r)})}return a}function xy(s,{plugin:e,local:t},i,n){const a=s.pluginScopeKeys(e),r=s.getOptionScopes(i,a);return t&&e.defaults&&r.push(e.defaults),s.createResolver(r,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function dr(s,e){const t=ke.datasets[s]||{};return((e.datasets||{})[s]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function by(s,e){let t=s;return s==="_index_"?t=e:s==="_value_"&&(t=e==="x"?"y":"x"),t}function yy(s,e){return s===e?"_index_":"_value_"}function kc(s){if(s==="x"||s==="y"||s==="r")return s}function vy(s){if(s==="top"||s==="bottom")return"x";if(s==="left"||s==="right")return"y"}function hr(s,...e){if(kc(s))return s;for(const t of e){const i=t.axis||vy(t.position)||s.length>1&&kc(s[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${s}' axis. Please provide 'axis' or 'position' option.`)}function Nc(s,e,t){if(t[e+"AxisID"]===s)return{axis:e}}function _y(s,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(i=>i.xAxisID===s||i.yAxisID===s);if(t.length)return Nc(s,"x",t[0])||Nc(s,"y",t[0])}return{}}function wy(s,e){const t=ps[s.type]||{scales:{}},i=e.scales||{},n=dr(s.type,e),a=Object.create(null);return Object.keys(i).forEach(r=>{const l=i[r];if(!ie(l))return console.error(`Invalid scale configuration for scale: ${r}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);const c=hr(r,l,_y(r,s),ke.scales[l.type]),h=yy(c,n),u=t.scales||{};a[r]=bi(Object.create(null),[{axis:c},l,u[c],u[h]])}),s.data.datasets.forEach(r=>{const l=r.type||s.type,c=r.indexAxis||dr(l,e),u=(ps[l]||{}).scales||{};Object.keys(u).forEach(m=>{const p=by(m,c),x=r[p+"AxisID"]||p;a[x]=a[x]||Object.create(null),bi(a[x],[{axis:p},i[x],u[m]])})}),Object.keys(a).forEach(r=>{const l=a[r];bi(l,[ke.scales[l.type],ke.scale])}),a}function lh(s){const e=s.options||(s.options={});e.plugins=J(e.plugins,{}),e.scales=wy(s,e)}function ch(s){return s=s||{},s.datasets=s.datasets||[],s.labels=s.labels||[],s}function jy(s){return s=s||{},s.data=ch(s.data),lh(s),s}const Cc=new Map,dh=new Set;function vn(s,e){let t=Cc.get(s);return t||(t=e(),Cc.set(s,t),dh.add(t)),t}const li=(s,e,t)=>{const i=ms(e,t);i!==void 0&&s.add(i)};class ky{constructor(e){this._config=jy(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=ch(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),lh(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return vn(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return vn(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return vn(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,i=this.type;return vn(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const i=this._scopeCache;let n=i.get(e);return(!n||t)&&(n=new Map,i.set(e,n)),n}getOptionScopes(e,t,i){const{options:n,type:a}=this,r=this._cachedScopes(e,i),l=r.get(t);if(l)return l;const c=new Set;t.forEach(u=>{e&&(c.add(e),u.forEach(m=>li(c,e,m))),u.forEach(m=>li(c,n,m)),u.forEach(m=>li(c,ps[a]||{},m)),u.forEach(m=>li(c,ke,m)),u.forEach(m=>li(c,lr,m))});const h=Array.from(c);return h.length===0&&h.push(Object.create(null)),dh.has(t)&&r.set(t,h),h}chartOptionScopes(){const{options:e,type:t}=this;return[e,ps[t]||{},ke.datasets[t]||{},{type:t},ke,lr]}resolveNamedOptions(e,t,i,n=[""]){const a={$shared:!0},{resolver:r,subPrefixes:l}=Sc(this._resolverCache,e,n);let c=r;if(Cy(r,t)){a.$shared=!1,i=qt(i)?i():i;const h=this.createResolver(e,i,l);c=Ws(r,i,h)}for(const h of t)a[h]=c[h];return a}createResolver(e,t,i=[""],n){const{resolver:a}=Sc(this._resolverCache,e,i);return ie(t)?Ws(a,t,void 0,n):a}}function Sc(s,e,t){let i=s.get(e);i||(i=new Map,s.set(e,i));const n=t.join();let a=i.get(n);return a||(a={resolver:Lr(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},i.set(n,a)),a}const Ny=s=>ie(s)&&Object.getOwnPropertyNames(s).some(e=>qt(s[e]));function Cy(s,e){const{isScriptable:t,isIndexable:i}=Yd(s);for(const n of e){const a=t(n),r=i(n),l=(r||a)&&s[n];if(a&&(qt(l)||Ny(l))||r&&Ce(l))return!0}return!1}var Sy="4.5.0";const Ty=["top","bottom","left","right","chartArea"];function Tc(s,e){return s==="top"||s==="bottom"||Ty.indexOf(s)===-1&&e==="x"}function Ac(s,e){return function(t,i){return t[s]===i[s]?t[e]-i[e]:t[s]-i[s]}}function Mc(s){const e=s.chart,t=e.options.animation;e.notifyPlugins("afterRender"),be(t&&t.onComplete,[s],e)}function Ay(s){const e=s.chart,t=e.options.animation;be(t&&t.onProgress,[s],e)}function hh(s){return Fr()&&typeof s=="string"?s=document.getElementById(s):s&&s.length&&(s=s[0]),s&&s.canvas&&(s=s.canvas),s}const En={},Ec=s=>{const e=hh(s);return Object.values(En).filter(t=>t.canvas===e).pop()};function My(s,e,t){const i=Object.keys(s);for(const n of i){const a=+n;if(a>=e){const r=s[n];delete s[n],(t>0||a>e)&&(s[a+t]=r)}}}function Ey(s,e,t,i){return!t||s.type==="mouseout"?null:i?e:s}var Wt;let ea=(Wt=class{static register(...e){bt.add(...e),Pc()}static unregister(...e){bt.remove(...e),Pc()}constructor(e,t){const i=this.config=new ky(t),n=hh(e),a=Ec(n);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const r=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||qb(n)),this.platform.updateConfig(i);const l=this.platform.acquireContext(n,r.aspectRatio),c=l&&l.canvas,h=c&&c.height,u=c&&c.width;if(this.id=Tg(),this.ctx=l,this.canvas=c,this.width=u,this.height=h,this._options=r,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new fy,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Kg(m=>this.update(m),r.resizeDelay||0),this._dataChanges=[],En[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}At.listen(this,"complete",Mc),At.listen(this,"progress",Ay),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:i,height:n,_aspectRatio:a}=this;return ge(e)?t&&a?a:n?i/n:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return bt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ec(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ql(this.canvas,this.ctx),this}stop(){return At.stop(this),this}resize(e,t){At.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const i=this.options,n=this.canvas,a=i.maintainAspectRatio&&this.aspectRatio,r=this.platform.getMaximumSize(n,e,t,a),l=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=r.width,this.height=r.height,this._aspectRatio=this.aspectRatio,ec(this,l,!0)&&(this.notifyPlugins("resize",{size:r}),be(i.onResize,[this,r],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};le(t,(i,n)=>{i.id=n})}buildOrUpdateScales(){const e=this.options,t=e.scales,i=this.scales,n=Object.keys(i).reduce((r,l)=>(r[l]=!1,r),{});let a=[];t&&(a=a.concat(Object.keys(t).map(r=>{const l=t[r],c=hr(r,l),h=c==="r",u=c==="x";return{options:l,dposition:h?"chartArea":u?"bottom":"left",dtype:h?"radialLinear":u?"category":"linear"}}))),le(a,r=>{const l=r.options,c=l.id,h=hr(c,l),u=J(l.type,r.dtype);(l.position===void 0||Tc(l.position,h)!==Tc(r.dposition))&&(l.position=r.dposition),n[c]=!0;let m=null;if(c in i&&i[c].type===u)m=i[c];else{const p=bt.getScale(u);m=new p({id:c,type:u,ctx:this.ctx,chart:this}),i[m.id]=m}m.init(l,e)}),le(n,(r,l)=>{r||delete i[l]}),le(i,r=>{nt.configure(this,r,r.options),nt.addBox(this,r)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,i=e.length;if(e.sort((n,a)=>n.index-a.index),i>t){for(let n=t;n<i;++n)this._destroyDatasetMeta(n);e.splice(t,i-t)}this._sortedMetasets=e.slice(0).sort(Ac("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((i,n)=>{t.filter(a=>a===i._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let i,n;for(this._removeUnreferencedMetasets(),i=0,n=t.length;i<n;i++){const a=t[i];let r=this.getDatasetMeta(i);const l=a.type||this.config.type;if(r.type&&r.type!==l&&(this._destroyDatasetMeta(i),r=this.getDatasetMeta(i)),r.type=l,r.indexAxis=a.indexAxis||dr(l,this.options),r.order=a.order||0,r.index=i,r.label=""+a.label,r.visible=this.isDatasetVisible(i),r.controller)r.controller.updateIndex(i),r.controller.linkScales();else{const c=bt.getController(l),{datasetElementType:h,dataElementType:u}=ke.datasets[l];Object.assign(c,{dataElementType:bt.getElement(u),datasetElementType:h&&bt.getElement(h)}),r.controller=new c(this,i),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){le(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const i=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let r=0;for(let h=0,u=this.data.datasets.length;h<u;h++){const{controller:m}=this.getDatasetMeta(h),p=!n&&a.indexOf(m)===-1;m.buildOrUpdateElements(p),r=Math.max(+m.getMaxOverflow(),r)}r=this._minPadding=i.layout.autoPadding?r:0,this._updateLayout(r),n||le(a,h=>{h.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Ac("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){le(this.scales,e=>{nt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!Bl(t,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:i,start:n,count:a}of t){const r=i==="_removeElements"?-a:a;My(e,n,r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,i=a=>new Set(e.filter(r=>r[0]===a).map((r,l)=>l+","+r.splice(1).join(","))),n=i(0);for(let a=1;a<t;a++)if(!Bl(n,i(a)))return;return Array.from(n).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;nt.update(this,this.width,this.height,e);const t=this.chartArea,i=t.width<=0||t.height<=0;this._layers=[],le(this.boxes,n=>{i&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,a)=>{n._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,i=this.data.datasets.length;t<i;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,i=this.data.datasets.length;t<i;++t)this._updateDataset(t,qt(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const i=this.getDatasetMeta(e),n={meta:i,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(i.controller._update(t),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(At.has(this)?this.attached&&!At.running(this)&&At.start(this):(this.draw(),Mc({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,i=[];let n,a;for(n=0,a=t.length;n<a;++n){const r=t[n];(!e||r.visible)&&i.push(r)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,i={meta:e,index:e.index,cancelable:!0},n=Qx(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(n&&Pr(t,n),e.controller.draw(),n&&Rr(t),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Ai(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,i,n){const a=Tb.modes[t];return typeof a=="function"?a(this,e,i,n):[]}getDatasetMeta(e){const t=this.data.datasets[e],i=this._metasets;let n=i.filter(a=>a&&a._dataset===t).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},i.push(n)),n}getContext(){return this.$context||(this.$context=vs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!t.hidden}setDatasetVisibility(e,t){const i=this.getDatasetMeta(e);i.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,i){const n=i?"show":"hide",a=this.getDatasetMeta(e),r=a.controller._resolveAnimations(void 0,n);Si(t)?(a.data[t].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),r.update(a,{visible:i}),this.update(l=>l.datasetIndex===e?n:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),At.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ql(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete En[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,i=(a,r)=>{t.addEventListener(this,a,r),e[a]=r},n=(a,r,l)=>{a.offsetX=r,a.offsetY=l,this._eventHandler(a)};le(this.options.events,a=>i(a,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,i=(c,h)=>{t.addEventListener(this,c,h),e[c]=h},n=(c,h)=>{e[c]&&(t.removeEventListener(this,c,h),delete e[c])},a=(c,h)=>{this.canvas&&this.resize(c,h)};let r;const l=()=>{n("attach",l),this.attached=!0,this.resize(),i("resize",a),i("detach",r)};r=()=>{this.attached=!1,n("resize",a),this._stop(),this._resize(0,0),i("attach",l)},t.isAttached(this.canvas)?l():r()}unbindEvents(){le(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},le(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,i){const n=i?"set":"remove";let a,r,l,c;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+n+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){r=e[l];const h=r&&this.getDatasetMeta(r.datasetIndex).controller;h&&h[n+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],i=e.map(({datasetIndex:a,index:r})=>{const l=this.getDatasetMeta(a);if(!l)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:l.data[r],index:r}});!On(i,t)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,t))}notifyPlugins(e,t,i){return this._plugins.notify(this,e,t,i)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,i){const n=this.options.hover,a=(c,h)=>c.filter(u=>!h.some(m=>u.datasetIndex===m.datasetIndex&&u.index===m.index)),r=a(t,e),l=i?e:a(e,t);r.length&&this.updateHoverStyle(r,n.mode,!1),l.length&&n.mode&&this.updateHoverStyle(l,n.mode,!0)}_eventHandler(e,t){const i={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},n=r=>(r.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,n)===!1)return;const a=this._handleEvent(e,t,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,n),(a||i.changed)&&this.render(),this}_handleEvent(e,t,i){const{_active:n=[],options:a}=this,r=t,l=this._getActiveElements(e,n,i,r),c=Dg(e),h=Ey(e,this._lastEvent,i,c);i&&(this._lastEvent=null,be(a.onHover,[e,l,this],this),c&&be(a.onClick,[e,l,this],this));const u=!On(l,n);return(u||t)&&(this._active=l,this._updateHoverStyles(l,n,t)),this._lastEvent=h,u}_getActiveElements(e,t,i,n){if(e.type==="mouseout")return[];if(!i)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,n)}},D(Wt,"defaults",ke),D(Wt,"instances",En),D(Wt,"overrides",ps),D(Wt,"registry",bt),D(Wt,"version",Sy),D(Wt,"getChart",Ec),Wt);function Pc(){return le(ea.instances,s=>s._plugins.invalidate())}function Py(s,e,t){const{startAngle:i,x:n,y:a,outerRadius:r,innerRadius:l,options:c}=e,{borderWidth:h,borderJoinStyle:u}=c,m=Math.min(h/r,dt(i-t));if(s.beginPath(),s.arc(n,a,r-h/2,i+m/2,t-m/2),l>0){const p=Math.min(h/l,dt(i-t));s.arc(n,a,l+h/2,t-p/2,i+p/2,!0)}else{const p=Math.min(h/2,r*dt(i-t));if(u==="round")s.arc(n,a,p,t-ce/2,i+ce/2,!0);else if(u==="bevel"){const x=2*p*p,v=-x*Math.cos(t+ce/2)+n,b=-x*Math.sin(t+ce/2)+a,_=x*Math.cos(i+ce/2)+n,w=x*Math.sin(i+ce/2)+a;s.lineTo(v,b),s.lineTo(_,w)}}s.closePath(),s.moveTo(0,0),s.rect(0,0,s.canvas.width,s.canvas.height),s.clip("evenodd")}function Ry(s,e,t){const{startAngle:i,pixelMargin:n,x:a,y:r,outerRadius:l,innerRadius:c}=e;let h=n/l;s.beginPath(),s.arc(a,r,l,i-h,t+h),c>n?(h=n/c,s.arc(a,r,c,t+h,i-h,!0)):s.arc(a,r,n,t+Se,i-Se),s.closePath(),s.clip()}function Dy(s){return Dr(s,["outerStart","outerEnd","innerStart","innerEnd"])}function Ly(s,e,t,i){const n=Dy(s.options.borderRadius),a=(t-e)/2,r=Math.min(a,i*e/2),l=c=>{const h=(t-Math.min(a,c))*i/2;return Ve(c,0,Math.min(a,h))};return{outerStart:l(n.outerStart),outerEnd:l(n.outerEnd),innerStart:Ve(n.innerStart,0,r),innerEnd:Ve(n.innerEnd,0,r)}}function zs(s,e,t,i){return{x:t+s*Math.cos(e),y:i+s*Math.sin(e)}}function Wn(s,e,t,i,n,a){const{x:r,y:l,startAngle:c,pixelMargin:h,innerRadius:u}=e,m=Math.max(e.outerRadius+i+t-h,0),p=u>0?u+i+t+h:0;let x=0;const v=n-c;if(i){const se=u>0?u-i:0,ae=m>0?m-i:0,me=(se+ae)/2,Me=me!==0?v*me/(me+i):v;x=(v-Me)/2}const b=Math.max(.001,v*m-t/ce)/m,_=(v-b)/2,w=c+_+x,j=n-_-x,{outerStart:C,outerEnd:P,innerStart:A,innerEnd:O}=Ly(e,p,m,j-w),B=m-C,F=m-P,$=w+C/B,H=j-P/F,Y=p+A,Z=p+O,ye=w+A/Y,Te=j-O/Z;if(s.beginPath(),a){const se=($+H)/2;if(s.arc(r,l,m,$,se),s.arc(r,l,m,se,H),P>0){const Ne=zs(F,H,r,l);s.arc(Ne.x,Ne.y,P,H,j+Se)}const ae=zs(Z,j,r,l);if(s.lineTo(ae.x,ae.y),O>0){const Ne=zs(Z,Te,r,l);s.arc(Ne.x,Ne.y,O,j+Se,Te+Math.PI)}const me=(j-O/p+(w+A/p))/2;if(s.arc(r,l,p,j-O/p,me,!0),s.arc(r,l,p,me,w+A/p,!0),A>0){const Ne=zs(Y,ye,r,l);s.arc(Ne.x,Ne.y,A,ye+Math.PI,w-Se)}const Me=zs(B,w,r,l);if(s.lineTo(Me.x,Me.y),C>0){const Ne=zs(B,$,r,l);s.arc(Ne.x,Ne.y,C,w-Se,$)}}else{s.moveTo(r,l);const se=Math.cos($)*m+r,ae=Math.sin($)*m+l;s.lineTo(se,ae);const me=Math.cos(H)*m+r,Me=Math.sin(H)*m+l;s.lineTo(me,Me)}s.closePath()}function Oy(s,e,t,i,n){const{fullCircles:a,startAngle:r,circumference:l}=e;let c=e.endAngle;if(a){Wn(s,e,t,i,c,n);for(let h=0;h<a;++h)s.fill();isNaN(l)||(c=r+(l%we||we))}return Wn(s,e,t,i,c,n),s.fill(),c}function Iy(s,e,t,i,n){const{fullCircles:a,startAngle:r,circumference:l,options:c}=e,{borderWidth:h,borderJoinStyle:u,borderDash:m,borderDashOffset:p,borderRadius:x}=c,v=c.borderAlign==="inner";if(!h)return;s.setLineDash(m||[]),s.lineDashOffset=p,v?(s.lineWidth=h*2,s.lineJoin=u||"round"):(s.lineWidth=h,s.lineJoin=u||"bevel");let b=e.endAngle;if(a){Wn(s,e,t,i,b,n);for(let _=0;_<a;++_)s.stroke();isNaN(l)||(b=r+(l%we||we))}v&&Ry(s,e,b),c.selfJoin&&b-r>=ce&&x===0&&u!=="miter"&&Py(s,e,b),a||(Wn(s,e,t,i,b,n),s.stroke())}class fi extends Ft{constructor(t){super();D(this,"circumference");D(this,"endAngle");D(this,"fullCircles");D(this,"innerRadius");D(this,"outerRadius");D(this,"pixelMargin");D(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,i,n){const a=this.getProps(["x","y"],n),{angle:r,distance:l}=Fd(a,{x:t,y:i}),{startAngle:c,endAngle:h,innerRadius:u,outerRadius:m,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),x=(this.options.spacing+this.options.borderWidth)/2,v=J(p,h-c),b=Ti(r,c,h)&&c!==h,_=v>=we||b,w=Vt(l,u+x,m+x);return _&&w}getCenterPoint(t){const{x:i,y:n,startAngle:a,endAngle:r,innerRadius:l,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:h,spacing:u}=this.options,m=(a+r)/2,p=(l+c+u+h)/2;return{x:i+Math.cos(m)*p,y:n+Math.sin(m)*p}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:i,circumference:n}=this,a=(i.offset||0)/4,r=(i.spacing||0)/2,l=i.circular;if(this.pixelMargin=i.borderAlign==="inner"?.33:0,this.fullCircles=n>we?Math.floor(n/we):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const c=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(c)*a,Math.sin(c)*a);const h=1-Math.sin(Math.min(ce,n||0)),u=a*h;t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,Oy(t,this,u,r,l),Iy(t,this,u,r,l),t.restore()}}D(fi,"id","arc"),D(fi,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),D(fi,"defaultRoutes",{backgroundColor:"backgroundColor"}),D(fi,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function uh(s,e,t=e){s.lineCap=J(t.borderCapStyle,e.borderCapStyle),s.setLineDash(J(t.borderDash,e.borderDash)),s.lineDashOffset=J(t.borderDashOffset,e.borderDashOffset),s.lineJoin=J(t.borderJoinStyle,e.borderJoinStyle),s.lineWidth=J(t.borderWidth,e.borderWidth),s.strokeStyle=J(t.borderColor,e.borderColor)}function Fy(s,e,t){s.lineTo(t.x,t.y)}function zy(s){return s.stepped?ax:s.tension||s.cubicInterpolationMode==="monotone"?rx:Fy}function fh(s,e,t={}){const i=s.length,{start:n=0,end:a=i-1}=t,{start:r,end:l}=e,c=Math.max(n,r),h=Math.min(a,l),u=n<r&&a<r||n>l&&a>l;return{count:i,start:c,loop:e.loop,ilen:h<c&&!u?i+h-c:h-c}}function $y(s,e,t,i){const{points:n,options:a}=e,{count:r,start:l,loop:c,ilen:h}=fh(n,t,i),u=zy(a);let{move:m=!0,reverse:p}=i||{},x,v,b;for(x=0;x<=h;++x)v=n[(l+(p?h-x:x))%r],!v.skip&&(m?(s.moveTo(v.x,v.y),m=!1):u(s,b,v,p,a.stepped),b=v);return c&&(v=n[(l+(p?h:0))%r],u(s,b,v,p,a.stepped)),!!c}function By(s,e,t,i){const n=e.points,{count:a,start:r,ilen:l}=fh(n,t,i),{move:c=!0,reverse:h}=i||{};let u=0,m=0,p,x,v,b,_,w;const j=P=>(r+(h?l-P:P))%a,C=()=>{b!==_&&(s.lineTo(u,_),s.lineTo(u,b),s.lineTo(u,w))};for(c&&(x=n[j(0)],s.moveTo(x.x,x.y)),p=0;p<=l;++p){if(x=n[j(p)],x.skip)continue;const P=x.x,A=x.y,O=P|0;O===v?(A<b?b=A:A>_&&(_=A),u=(m*u+P)/++m):(C(),s.lineTo(P,A),v=O,m=0,b=_=A),w=A}C()}function ur(s){const e=s.options,t=e.borderDash&&e.borderDash.length;return!s._decimated&&!s._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?By:$y}function Hy(s){return s.stepped?Fx:s.tension||s.cubicInterpolationMode==="monotone"?zx:hs}function Wy(s,e,t,i){let n=e._path;n||(n=e._path=new Path2D,e.path(n,t,i)&&n.closePath()),uh(s,e.options),s.stroke(n)}function Uy(s,e,t,i){const{segments:n,options:a}=e,r=ur(e);for(const l of n)uh(s,a,l.style),s.beginPath(),r(s,e,l,{start:t,end:t+i-1})&&s.closePath(),s.stroke()}const Vy=typeof Path2D=="function";function Yy(s,e,t,i){Vy&&!e.options.segment?Wy(s,e,t,i):Uy(s,e,t,i)}class mi extends Ft{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const n=i.spanGaps?this._loop:this._fullLoop;Mx(this._points,i,e,n,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Kx(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,i=e.length;return i&&t[e[i-1].end]}interpolate(e,t){const i=this.options,n=e[t],a=this.points,r=Ux(this,{property:t,start:n,end:n});if(!r.length)return;const l=[],c=Hy(i);let h,u;for(h=0,u=r.length;h<u;++h){const{start:m,end:p}=r[h],x=a[m],v=a[p];if(x===v){l.push(x);continue}const b=Math.abs((n-x[t])/(v[t]-x[t])),_=c(x,v,b,i.stepped);_[t]=e[t],l.push(_)}return l.length===1?l[0]:l}pathSegment(e,t,i){return ur(this)(e,this,t,i)}path(e,t,i){const n=this.segments,a=ur(this);let r=this._loop;t=t||0,i=i||this.points.length-t;for(const l of n)r&=a(e,this,l,{start:t,end:t+i-1});return!!r}draw(e,t,i,n){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),Yy(e,this,i,n),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}D(mi,"id","line"),D(mi,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),D(mi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),D(mi,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Rc(s,e,t,i){const n=s.options,{[t]:a}=s.getProps([t],i);return Math.abs(e-a)<n.radius+n.hitRadius}class Pn extends Ft{constructor(t){super();D(this,"parsed");D(this,"skip");D(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,n){const a=this.options,{x:r,y:l}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(i-l,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(t,i){return Rc(this,t,"x",i)}inYRange(t,i){return Rc(this,t,"y",i)}getCenterPoint(t){const{x:i,y:n}=this.getProps(["x","y"],t);return{x:i,y:n}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);const n=i&&t.borderWidth||0;return(i+n)*2}draw(t,i){const n=this.options;this.skip||n.radius<.1||!Ai(this,i,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,cr(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}D(Pn,"id","point"),D(Pn,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),D(Pn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function mh(s,e){const{x:t,y:i,base:n,width:a,height:r}=s.getProps(["x","y","base","width","height"],e);let l,c,h,u,m;return s.horizontal?(m=r/2,l=Math.min(t,n),c=Math.max(t,n),h=i-m,u=i+m):(m=a/2,l=t-m,c=t+m,h=Math.min(i,n),u=Math.max(i,n)),{left:l,top:h,right:c,bottom:u}}function Yt(s,e,t,i){return s?0:Ve(e,t,i)}function Ky(s,e,t){const i=s.options.borderWidth,n=s.borderSkipped,a=Vd(i);return{t:Yt(n.top,a.top,0,t),r:Yt(n.right,a.right,0,e),b:Yt(n.bottom,a.bottom,0,t),l:Yt(n.left,a.left,0,e)}}function Gy(s,e,t){const{enableBorderRadius:i}=s.getProps(["enableBorderRadius"]),n=s.options.borderRadius,a=$s(n),r=Math.min(e,t),l=s.borderSkipped,c=i||ie(n);return{topLeft:Yt(!c||l.top||l.left,a.topLeft,0,r),topRight:Yt(!c||l.top||l.right,a.topRight,0,r),bottomLeft:Yt(!c||l.bottom||l.left,a.bottomLeft,0,r),bottomRight:Yt(!c||l.bottom||l.right,a.bottomRight,0,r)}}function qy(s){const e=mh(s),t=e.right-e.left,i=e.bottom-e.top,n=Ky(s,t/2,i/2),a=Gy(s,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:a},inner:{x:e.left+n.l,y:e.top+n.t,w:t-n.l-n.r,h:i-n.t-n.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,a.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(n.b,n.r))}}}}function Qa(s,e,t,i){const n=e===null,a=t===null,l=s&&!(n&&a)&&mh(s,i);return l&&(n||Vt(e,l.left,l.right))&&(a||Vt(t,l.top,l.bottom))}function Xy(s){return s.topLeft||s.topRight||s.bottomLeft||s.bottomRight}function Qy(s,e){s.rect(e.x,e.y,e.w,e.h)}function Za(s,e,t={}){const i=s.x!==t.x?-e:0,n=s.y!==t.y?-e:0,a=(s.x+s.w!==t.x+t.w?e:0)-i,r=(s.y+s.h!==t.y+t.h?e:0)-n;return{x:s.x+i,y:s.y+n,w:s.w+a,h:s.h+r,radius:s.radius}}class Rn extends Ft{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:i,backgroundColor:n}}=this,{inner:a,outer:r}=qy(this),l=Xy(r.radius)?$n:Qy;e.save(),(r.w!==a.w||r.h!==a.h)&&(e.beginPath(),l(e,Za(r,t,a)),e.clip(),l(e,Za(a,-t,r)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),l(e,Za(a,t)),e.fillStyle=n,e.fill(),e.restore()}inRange(e,t,i){return Qa(this,e,t,i)}inXRange(e,t){return Qa(this,e,null,t)}inYRange(e,t){return Qa(this,null,e,t)}getCenterPoint(e){const{x:t,y:i,base:n,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+n)/2:t,y:a?i:(i+n)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}D(Rn,"id","bar"),D(Rn,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),D(Rn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Dc=(s,e)=>{let{boxHeight:t=e,boxWidth:i=e}=s;return s.usePointStyle&&(t=Math.min(t,e),i=s.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},Zy=(s,e)=>s!==null&&e!==null&&s.datasetIndex===e.datasetIndex&&s.index===e.index;class Lc extends Ft{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=be(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,n)=>e.sort(i,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,n=De(i.font),a=n.size,r=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Dc(i,a);let h,u;t.font=n.string,this.isHorizontal()?(h=this.maxWidth,u=this._fitRows(r,a,l,c)+10):(u=this.maxHeight,h=this._fitCols(r,n,l,c)+10),this.width=Math.min(h,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,n){const{ctx:a,maxWidth:r,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],u=n+l;let m=e;a.textAlign="left",a.textBaseline="middle";let p=-1,x=-u;return this.legendItems.forEach((v,b)=>{const _=i+t/2+a.measureText(v.text).width;(b===0||h[h.length-1]+_+2*l>r)&&(m+=u,h[h.length-(b>0?0:1)]=0,x+=u,p++),c[b]={left:0,top:x,row:p,width:_,height:n},h[h.length-1]+=_+l}),m}_fitCols(e,t,i,n){const{ctx:a,maxHeight:r,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],u=r-e;let m=l,p=0,x=0,v=0,b=0;return this.legendItems.forEach((_,w)=>{const{itemWidth:j,itemHeight:C}=Jy(i,t,a,_,n);w>0&&x+C+2*l>u&&(m+=p+l,h.push({width:p,height:x}),v+=p+l,b++,p=x=0),c[w]={left:v,top:x,col:b,width:j,height:C},p=Math.max(p,j),x+=C+l}),m+=p,h.push({width:p,height:x}),m}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:n},rtl:a}}=this,r=Bs(a,this.left,this.width);if(this.isHorizontal()){let l=0,c=Re(i,this.left+n,this.right-this.lineWidths[l]);for(const h of t)l!==h.row&&(l=h.row,c=Re(i,this.left+n,this.right-this.lineWidths[l])),h.top+=this.top+e+n,h.left=r.leftForLtr(r.x(c),h.width),c+=h.width+n}else{let l=0,c=Re(i,this.top+e+n,this.bottom-this.columnSizes[l].height);for(const h of t)h.col!==l&&(l=h.col,c=Re(i,this.top+e+n,this.bottom-this.columnSizes[l].height)),h.top=c,h.left+=this.left+n,h.left=r.leftForLtr(r.x(h.left),h.width),c+=h.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Pr(e,this),this._draw(),Rr(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:i,ctx:n}=this,{align:a,labels:r}=e,l=ke.color,c=Bs(e.rtl,this.left,this.width),h=De(r.font),{padding:u}=r,m=h.size,p=m/2;let x;this.drawTitle(),n.textAlign=c.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=h.string;const{boxWidth:v,boxHeight:b,itemHeight:_}=Dc(r,m),w=function(O,B,F){if(isNaN(v)||v<=0||isNaN(b)||b<0)return;n.save();const $=J(F.lineWidth,1);if(n.fillStyle=J(F.fillStyle,l),n.lineCap=J(F.lineCap,"butt"),n.lineDashOffset=J(F.lineDashOffset,0),n.lineJoin=J(F.lineJoin,"miter"),n.lineWidth=$,n.strokeStyle=J(F.strokeStyle,l),n.setLineDash(J(F.lineDash,[])),r.usePointStyle){const H={radius:b*Math.SQRT2/2,pointStyle:F.pointStyle,rotation:F.rotation,borderWidth:$},Y=c.xPlus(O,v/2),Z=B+p;Ud(n,H,Y,Z,r.pointStyleWidth&&v)}else{const H=B+Math.max((m-b)/2,0),Y=c.leftForLtr(O,v),Z=$s(F.borderRadius);n.beginPath(),Object.values(Z).some(ye=>ye!==0)?$n(n,{x:Y,y:H,w:v,h:b,radius:Z}):n.rect(Y,H,v,b),n.fill(),$!==0&&n.stroke()}n.restore()},j=function(O,B,F){Mi(n,F.text,O,B+_/2,h,{strikethrough:F.hidden,textAlign:c.textAlign(F.textAlign)})},C=this.isHorizontal(),P=this._computeTitleHeight();C?x={x:Re(a,this.left+u,this.right-i[0]),y:this.top+u+P,line:0}:x={x:this.left+u,y:Re(a,this.top+P+u,this.bottom-t[0].height),line:0},Qd(this.ctx,e.textDirection);const A=_+u;this.legendItems.forEach((O,B)=>{n.strokeStyle=O.fontColor,n.fillStyle=O.fontColor;const F=n.measureText(O.text).width,$=c.textAlign(O.textAlign||(O.textAlign=r.textAlign)),H=v+p+F;let Y=x.x,Z=x.y;c.setWidth(this.width),C?B>0&&Y+H+u>this.right&&(Z=x.y+=A,x.line++,Y=x.x=Re(a,this.left+u,this.right-i[x.line])):B>0&&Z+A>this.bottom&&(Y=x.x=Y+t[x.line].width+u,x.line++,Z=x.y=Re(a,this.top+P+u,this.bottom-t[x.line].height));const ye=c.x(Y);if(w(ye,Z,O),Y=Gg($,Y+v+p,C?Y+H:this.right,e.rtl),j(c.x(Y),Z,O),C)x.x+=H+u;else if(typeof O.text!="string"){const Te=h.lineHeight;x.y+=ph(O,Te)+u}else x.y+=A}),Zd(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,i=De(t.font),n=rt(t.padding);if(!t.display)return;const a=Bs(e.rtl,this.left,this.width),r=this.ctx,l=t.position,c=i.size/2,h=n.top+c;let u,m=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),u=this.top+h,m=Re(e.align,m,this.right-p);else{const v=this.columnSizes.reduce((b,_)=>Math.max(b,_.height),0);u=h+Re(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const x=Re(l,m,m+p);r.textAlign=a.textAlign(Ar(l)),r.textBaseline="middle",r.strokeStyle=t.color,r.fillStyle=t.color,r.font=i.string,Mi(r,t.text,x,u,i)}_computeTitleHeight(){const e=this.options.title,t=De(e.font),i=rt(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,n,a;if(Vt(e,this.left,this.right)&&Vt(t,this.top,this.bottom)){for(a=this.legendHitBoxes,i=0;i<a.length;++i)if(n=a[i],Vt(e,n.left,n.left+n.width)&&Vt(t,n.top,n.top+n.height))return this.legendItems[i]}return null}handleEvent(e){const t=this.options;if(!sv(e.type,t))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const n=this._hoveredItem,a=Zy(n,i);n&&!a&&be(t.onLeave,[e,n,this],this),this._hoveredItem=i,i&&!a&&be(t.onHover,[e,i,this],this)}else i&&be(t.onClick,[e,i,this],this)}}function Jy(s,e,t,i,n){const a=ev(i,s,e,t),r=tv(n,i,e.lineHeight);return{itemWidth:a,itemHeight:r}}function ev(s,e,t,i){let n=s.text;return n&&typeof n!="string"&&(n=n.reduce((a,r)=>a.length>r.length?a:r)),e+t.size/2+i.measureText(n).width}function tv(s,e,t){let i=s;return typeof e.text!="string"&&(i=ph(e,t)),i}function ph(s,e){const t=s.text?s.text.length:0;return e*t}function sv(s,e){return!!((s==="mousemove"||s==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(s==="click"||s==="mouseup"))}var iv={id:"legend",_element:Lc,start(s,e,t){const i=s.legend=new Lc({ctx:s.ctx,options:t,chart:s});nt.configure(s,i,t),nt.addBox(s,i)},stop(s){nt.removeBox(s,s.legend),delete s.legend},beforeUpdate(s,e,t){const i=s.legend;nt.configure(s,i,t),i.options=t},afterUpdate(s){const e=s.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(s,e){e.replay||s.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(s,e,t){const i=e.datasetIndex,n=t.chart;n.isDatasetVisible(i)?(n.hide(i),e.hidden=!0):(n.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:s=>s.chart.options.color,boxWidth:40,padding:10,generateLabels(s){const e=s.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:n,color:a,useBorderRadius:r,borderRadius:l}}=s.legend.options;return s._getSortedDatasetMetas().map(c=>{const h=c.controller.getStyle(t?0:void 0),u=rt(h.borderWidth);return{text:e[c.index].label,fillStyle:h.backgroundColor,fontColor:a,hidden:!c.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:h.borderColor,pointStyle:i||h.pointStyle,rotation:h.rotation,textAlign:n||h.textAlign,borderRadius:r&&(l||h.borderRadius),datasetIndex:c.index}},this)}},title:{color:s=>s.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:s=>!s.startsWith("on"),labels:{_scriptable:s=>!["generateLabels","filter","sort"].includes(s)}}};class gh extends Ft{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const n=Ce(i.text)?i.text.length:1;this._padding=rt(i.padding);const a=n*De(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:i,bottom:n,right:a,options:r}=this,l=r.align;let c=0,h,u,m;return this.isHorizontal()?(u=Re(l,i,a),m=t+e,h=a-i):(r.position==="left"?(u=i+e,m=Re(l,n,t),c=ce*-.5):(u=a-e,m=Re(l,t,n),c=ce*.5),h=n-t),{titleX:u,titleY:m,maxWidth:h,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const i=De(t.font),a=i.lineHeight/2+this._padding.top,{titleX:r,titleY:l,maxWidth:c,rotation:h}=this._drawArgs(a);Mi(e,t.text,0,0,i,{color:t.color,maxWidth:c,rotation:h,textAlign:Ar(t.align),textBaseline:"middle",translation:[r,l]})}}function nv(s,e){const t=new gh({ctx:s.ctx,options:e,chart:s});nt.configure(s,t,e),nt.addBox(s,t),s.titleBlock=t}var av={id:"title",_element:gh,start(s,e,t){nv(s,t)},stop(s){const e=s.titleBlock;nt.removeBox(s,e),delete s.titleBlock},beforeUpdate(s,e,t){const i=s.titleBlock;nt.configure(s,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const pi={average(s){if(!s.length)return!1;let e,t,i=new Set,n=0,a=0;for(e=0,t=s.length;e<t;++e){const l=s[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();i.add(c.x),n+=c.y,++a}}return a===0||i.size===0?!1:{x:[...i].reduce((l,c)=>l+c)/i.size,y:n/a}},nearest(s,e){if(!s.length)return!1;let t=e.x,i=e.y,n=Number.POSITIVE_INFINITY,a,r,l;for(a=0,r=s.length;a<r;++a){const c=s[a].element;if(c&&c.hasValue()){const h=c.getCenterPoint(),u=rr(e,h);u<n&&(n=u,l=c)}}if(l){const c=l.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function xt(s,e){return e&&(Ce(e)?Array.prototype.push.apply(s,e):s.push(e)),s}function Mt(s){return(typeof s=="string"||s instanceof String)&&s.indexOf(`
`)>-1?s.split(`
`):s}function rv(s,e){const{element:t,datasetIndex:i,index:n}=e,a=s.getDatasetMeta(i).controller,{label:r,value:l}=a.getLabelAndValue(n);return{chart:s,label:r,parsed:a.getParsed(n),raw:s.data.datasets[i].data[n],formattedValue:l,dataset:a.getDataset(),dataIndex:n,datasetIndex:i,element:t}}function Oc(s,e){const t=s.chart.ctx,{body:i,footer:n,title:a}=s,{boxWidth:r,boxHeight:l}=e,c=De(e.bodyFont),h=De(e.titleFont),u=De(e.footerFont),m=a.length,p=n.length,x=i.length,v=rt(e.padding);let b=v.height,_=0,w=i.reduce((P,A)=>P+A.before.length+A.lines.length+A.after.length,0);if(w+=s.beforeBody.length+s.afterBody.length,m&&(b+=m*h.lineHeight+(m-1)*e.titleSpacing+e.titleMarginBottom),w){const P=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;b+=x*P+(w-x)*c.lineHeight+(w-1)*e.bodySpacing}p&&(b+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let j=0;const C=function(P){_=Math.max(_,t.measureText(P).width+j)};return t.save(),t.font=h.string,le(s.title,C),t.font=c.string,le(s.beforeBody.concat(s.afterBody),C),j=e.displayColors?r+2+e.boxPadding:0,le(i,P=>{le(P.before,C),le(P.lines,C),le(P.after,C)}),j=0,t.font=u.string,le(s.footer,C),t.restore(),_+=v.width,{width:_,height:b}}function ov(s,e){const{y:t,height:i}=e;return t<i/2?"top":t>s.height-i/2?"bottom":"center"}function lv(s,e,t,i){const{x:n,width:a}=i,r=t.caretSize+t.caretPadding;if(s==="left"&&n+a+r>e.width||s==="right"&&n-a-r<0)return!0}function cv(s,e,t,i){const{x:n,width:a}=t,{width:r,chartArea:{left:l,right:c}}=s;let h="center";return i==="center"?h=n<=(l+c)/2?"left":"right":n<=a/2?h="left":n>=r-a/2&&(h="right"),lv(h,s,e,t)&&(h="center"),h}function Ic(s,e,t){const i=t.yAlign||e.yAlign||ov(s,t);return{xAlign:t.xAlign||e.xAlign||cv(s,e,t,i),yAlign:i}}function dv(s,e){let{x:t,width:i}=s;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function hv(s,e,t){let{y:i,height:n}=s;return e==="top"?i+=t:e==="bottom"?i-=n+t:i-=n/2,i}function Fc(s,e,t,i){const{caretSize:n,caretPadding:a,cornerRadius:r}=s,{xAlign:l,yAlign:c}=t,h=n+a,{topLeft:u,topRight:m,bottomLeft:p,bottomRight:x}=$s(r);let v=dv(e,l);const b=hv(e,c,h);return c==="center"?l==="left"?v+=h:l==="right"&&(v-=h):l==="left"?v-=Math.max(u,p)+n:l==="right"&&(v+=Math.max(m,x)+n),{x:Ve(v,0,i.width-e.width),y:Ve(b,0,i.height-e.height)}}function _n(s,e,t){const i=rt(t.padding);return e==="center"?s.x+s.width/2:e==="right"?s.x+s.width-i.right:s.x+i.left}function zc(s){return xt([],Mt(s))}function uv(s,e,t){return vs(s,{tooltip:e,tooltipItems:t,type:"tooltip"})}function $c(s,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?s.override(t):s}const xh={beforeTitle:Ct,title(s){if(s.length>0){const e=s[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Ct,beforeBody:Ct,beforeLabel:Ct,label(s){if(this&&this.options&&this.options.mode==="dataset")return s.label+": "+s.formattedValue||s.formattedValue;let e=s.dataset.label||"";e&&(e+=": ");const t=s.formattedValue;return ge(t)||(e+=t),e},labelColor(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(s){const t=s.chart.getDatasetMeta(s.datasetIndex).controller.getStyle(s.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ct,afterBody:Ct,beforeFooter:Ct,footer:Ct,afterFooter:Ct};function We(s,e,t,i){const n=s[e].call(t,i);return typeof n>"u"?xh[e].call(t,i):n}class fr extends Ft{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,i=this.options.setContext(this.getContext()),n=i.enabled&&t.options.animation&&i.animations,a=new eh(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=uv(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:i}=t,n=We(i,"beforeTitle",this,e),a=We(i,"title",this,e),r=We(i,"afterTitle",this,e);let l=[];return l=xt(l,Mt(n)),l=xt(l,Mt(a)),l=xt(l,Mt(r)),l}getBeforeBody(e,t){return zc(We(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:i}=t,n=[];return le(e,a=>{const r={before:[],lines:[],after:[]},l=$c(i,a);xt(r.before,Mt(We(l,"beforeLabel",this,a))),xt(r.lines,We(l,"label",this,a)),xt(r.after,Mt(We(l,"afterLabel",this,a))),n.push(r)}),n}getAfterBody(e,t){return zc(We(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:i}=t,n=We(i,"beforeFooter",this,e),a=We(i,"footer",this,e),r=We(i,"afterFooter",this,e);let l=[];return l=xt(l,Mt(n)),l=xt(l,Mt(a)),l=xt(l,Mt(r)),l}_createItems(e){const t=this._active,i=this.chart.data,n=[],a=[],r=[];let l=[],c,h;for(c=0,h=t.length;c<h;++c)l.push(rv(this.chart,t[c]));return e.filter&&(l=l.filter((u,m,p)=>e.filter(u,m,p,i))),e.itemSort&&(l=l.sort((u,m)=>e.itemSort(u,m,i))),le(l,u=>{const m=$c(e.callbacks,u);n.push(We(m,"labelColor",this,u)),a.push(We(m,"labelPointStyle",this,u)),r.push(We(m,"labelTextColor",this,u))}),this.labelColors=n,this.labelPointStyles=a,this.labelTextColors=r,this.dataPoints=l,l}update(e,t){const i=this.options.setContext(this.getContext()),n=this._active;let a,r=[];if(!n.length)this.opacity!==0&&(a={opacity:0});else{const l=pi[i.position].call(this,n,this._eventPosition);r=this._createItems(i),this.title=this.getTitle(r,i),this.beforeBody=this.getBeforeBody(r,i),this.body=this.getBody(r,i),this.afterBody=this.getAfterBody(r,i),this.footer=this.getFooter(r,i);const c=this._size=Oc(this,i),h=Object.assign({},l,c),u=Ic(this.chart,i,h),m=Fc(i,h,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,a={opacity:1,x:m.x,y:m.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=r,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,i,n){const a=this.getCaretPosition(e,i,n);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,i){const{xAlign:n,yAlign:a}=this,{caretSize:r,cornerRadius:l}=i,{topLeft:c,topRight:h,bottomLeft:u,bottomRight:m}=$s(l),{x:p,y:x}=e,{width:v,height:b}=t;let _,w,j,C,P,A;return a==="center"?(P=x+b/2,n==="left"?(_=p,w=_-r,C=P+r,A=P-r):(_=p+v,w=_+r,C=P-r,A=P+r),j=_):(n==="left"?w=p+Math.max(c,u)+r:n==="right"?w=p+v-Math.max(h,m)-r:w=this.caretX,a==="top"?(C=x,P=C-r,_=w-r,j=w+r):(C=x+b,P=C+r,_=w+r,j=w-r),A=C),{x1:_,x2:w,x3:j,y1:C,y2:P,y3:A}}drawTitle(e,t,i){const n=this.title,a=n.length;let r,l,c;if(a){const h=Bs(i.rtl,this.x,this.width);for(e.x=_n(this,i.titleAlign,i),t.textAlign=h.textAlign(i.titleAlign),t.textBaseline="middle",r=De(i.titleFont),l=i.titleSpacing,t.fillStyle=i.titleColor,t.font=r.string,c=0;c<a;++c)t.fillText(n[c],h.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+l,c+1===a&&(e.y+=i.titleMarginBottom-l)}}_drawColorBox(e,t,i,n,a){const r=this.labelColors[i],l=this.labelPointStyles[i],{boxHeight:c,boxWidth:h}=a,u=De(a.bodyFont),m=_n(this,"left",a),p=n.x(m),x=c<u.lineHeight?(u.lineHeight-c)/2:0,v=t.y+x;if(a.usePointStyle){const b={radius:Math.min(h,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},_=n.leftForLtr(p,h)+h/2,w=v+c/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,cr(e,b,_,w),e.strokeStyle=r.borderColor,e.fillStyle=r.backgroundColor,cr(e,b,_,w)}else{e.lineWidth=ie(r.borderWidth)?Math.max(...Object.values(r.borderWidth)):r.borderWidth||1,e.strokeStyle=r.borderColor,e.setLineDash(r.borderDash||[]),e.lineDashOffset=r.borderDashOffset||0;const b=n.leftForLtr(p,h),_=n.leftForLtr(n.xPlus(p,1),h-2),w=$s(r.borderRadius);Object.values(w).some(j=>j!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,$n(e,{x:b,y:v,w:h,h:c,radius:w}),e.fill(),e.stroke(),e.fillStyle=r.backgroundColor,e.beginPath(),$n(e,{x:_,y:v+1,w:h-2,h:c-2,radius:w}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(b,v,h,c),e.strokeRect(b,v,h,c),e.fillStyle=r.backgroundColor,e.fillRect(_,v+1,h-2,c-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,t,i){const{body:n}=this,{bodySpacing:a,bodyAlign:r,displayColors:l,boxHeight:c,boxWidth:h,boxPadding:u}=i,m=De(i.bodyFont);let p=m.lineHeight,x=0;const v=Bs(i.rtl,this.x,this.width),b=function(F){t.fillText(F,v.x(e.x+x),e.y+p/2),e.y+=p+a},_=v.textAlign(r);let w,j,C,P,A,O,B;for(t.textAlign=r,t.textBaseline="middle",t.font=m.string,e.x=_n(this,_,i),t.fillStyle=i.bodyColor,le(this.beforeBody,b),x=l&&_!=="right"?r==="center"?h/2+u:h+2+u:0,P=0,O=n.length;P<O;++P){for(w=n[P],j=this.labelTextColors[P],t.fillStyle=j,le(w.before,b),C=w.lines,l&&C.length&&(this._drawColorBox(t,e,P,v,i),p=Math.max(m.lineHeight,c)),A=0,B=C.length;A<B;++A)b(C[A]),p=m.lineHeight;le(w.after,b)}x=0,p=m.lineHeight,le(this.afterBody,b),e.y-=a}drawFooter(e,t,i){const n=this.footer,a=n.length;let r,l;if(a){const c=Bs(i.rtl,this.x,this.width);for(e.x=_n(this,i.footerAlign,i),e.y+=i.footerMarginTop,t.textAlign=c.textAlign(i.footerAlign),t.textBaseline="middle",r=De(i.footerFont),t.fillStyle=i.footerColor,t.font=r.string,l=0;l<a;++l)t.fillText(n[l],c.x(e.x),e.y+r.lineHeight/2),e.y+=r.lineHeight+i.footerSpacing}}drawBackground(e,t,i,n){const{xAlign:a,yAlign:r}=this,{x:l,y:c}=e,{width:h,height:u}=i,{topLeft:m,topRight:p,bottomLeft:x,bottomRight:v}=$s(n.cornerRadius);t.fillStyle=n.backgroundColor,t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.beginPath(),t.moveTo(l+m,c),r==="top"&&this.drawCaret(e,t,i,n),t.lineTo(l+h-p,c),t.quadraticCurveTo(l+h,c,l+h,c+p),r==="center"&&a==="right"&&this.drawCaret(e,t,i,n),t.lineTo(l+h,c+u-v),t.quadraticCurveTo(l+h,c+u,l+h-v,c+u),r==="bottom"&&this.drawCaret(e,t,i,n),t.lineTo(l+x,c+u),t.quadraticCurveTo(l,c+u,l,c+u-x),r==="center"&&a==="left"&&this.drawCaret(e,t,i,n),t.lineTo(l,c+m),t.quadraticCurveTo(l,c,l+m,c),t.closePath(),t.fill(),n.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,i=this.$animations,n=i&&i.x,a=i&&i.y;if(n||a){const r=pi[e.position].call(this,this._active,this._eventPosition);if(!r)return;const l=this._size=Oc(this,e),c=Object.assign({},r,this._size),h=Ic(t,e,c),u=Fc(e,c,h,t);(n._to!==u.x||a._to!==u.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=l.width,this.height=l.height,this.caretX=r.x,this.caretY=r.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(t);const n={width:this.width,height:this.height},a={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const r=rt(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=i,this.drawBackground(a,e,n,t),Qd(e,t.textDirection),a.y+=r.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),Zd(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const i=this._active,n=e.map(({datasetIndex:l,index:c})=>{const h=this.chart.getDatasetMeta(l);if(!h)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:h.data[c],index:c}}),a=!On(i,n),r=this._positionChanged(n,t);(a||r)&&(this._active=n,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,i=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,a=this._active||[],r=this._getActiveElements(e,a,t,i),l=this._positionChanged(r,e),c=t||!On(r,a)||l;return c&&(this._active=r,(n.enabled||n.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,i,n){const a=this.options;if(e.type==="mouseout")return[];if(!n)return t.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const r=this.chart.getElementsAtEventForMode(e,a.mode,a,i);return a.reverse&&r.reverse(),r}_positionChanged(e,t){const{caretX:i,caretY:n,options:a}=this,r=pi[a.position].call(this,e,t);return r!==!1&&(i!==r.x||n!==r.y)}}D(fr,"positioners",pi);var fv={id:"tooltip",_element:fr,positioners:pi,afterInit(s,e,t){t&&(s.tooltip=new fr({chart:s,options:t}))},beforeUpdate(s,e,t){s.tooltip&&s.tooltip.initialize(t)},reset(s,e,t){s.tooltip&&s.tooltip.initialize(t)},afterDraw(s){const e=s.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(s.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(s.ctx),s.notifyPlugins("afterTooltipDraw",t)}},afterEvent(s,e){if(s.tooltip){const t=e.replay;s.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(s,e)=>e.bodyFont.size,boxWidth:(s,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:xh},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:s=>s!=="filter"&&s!=="itemSort"&&s!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const mv=(s,e,t,i)=>(typeof e=="string"?(t=s.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function pv(s,e,t,i){const n=s.indexOf(e);if(n===-1)return mv(s,e,t,i);const a=s.lastIndexOf(e);return n!==a?t:n}const gv=(s,e)=>s===null?null:Ve(Math.round(s),0,e);function Bc(s){const e=this.getLabels();return s>=0&&s<e.length?e[s]:s}class mr extends Ys{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const i=this.getLabels();for(const{index:n,label:a}of t)i[n]===a&&i.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ge(e))return null;const i=this.getLabels();return t=isFinite(t)&&i[t]===e?t:pv(i,e,J(t,e),this._addedLabels),gv(t,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:i,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),t||(n=this.getLabels().length-1)),this.min=i,this.max=n}buildTicks(){const e=this.min,t=this.max,i=this.options.offset,n=[];let a=this.getLabels();a=e===0&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let r=e;r<=t;r++)n.push({value:r});return n}getLabelForValue(e){return Bc.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}D(mr,"id","category"),D(mr,"defaults",{ticks:{callback:Bc}});function xv(s,e){const t=[],{bounds:n,step:a,min:r,max:l,precision:c,count:h,maxTicks:u,maxDigits:m,includeBounds:p}=s,x=a||1,v=u-1,{min:b,max:_}=e,w=!ge(r),j=!ge(l),C=!ge(h),P=(_-b)/(m+1);let A=Wl((_-b)/v/x)*x,O,B,F,$;if(A<1e-14&&!w&&!j)return[{value:b},{value:_}];$=Math.ceil(_/A)-Math.floor(b/A),$>v&&(A=Wl($*A/v/x)*x),ge(c)||(O=Math.pow(10,c),A=Math.ceil(A*O)/O),n==="ticks"?(B=Math.floor(b/A)*A,F=Math.ceil(_/A)*A):(B=b,F=_),w&&j&&a&&zg((l-r)/a,A/1e3)?($=Math.round(Math.min((l-r)/A,u)),A=(l-r)/$,B=r,F=l):C?(B=w?r:B,F=j?l:F,$=h-1,A=(F-B)/$):($=(F-B)/A,yi($,Math.round($),A/1e3)?$=Math.round($):$=Math.ceil($));const H=Math.max(Ul(A),Ul(B));O=Math.pow(10,ge(c)?H:c),B=Math.round(B*O)/O,F=Math.round(F*O)/O;let Y=0;for(w&&(p&&B!==r?(t.push({value:r}),B<r&&Y++,yi(Math.round((B+Y*A)*O)/O,r,Hc(r,P,s))&&Y++):B<r&&Y++);Y<$;++Y){const Z=Math.round((B+Y*A)*O)/O;if(j&&Z>l)break;t.push({value:Z})}return j&&p&&F!==l?t.length&&yi(t[t.length-1].value,l,Hc(l,P,s))?t[t.length-1].value=l:t.push({value:l}):(!j||F===l)&&t.push({value:F}),t}function Hc(s,e,{horizontal:t,minRotation:i}){const n=Pt(i),a=(t?Math.sin(n):Math.cos(n))||.001,r=.75*e*(""+s).length;return Math.min(e/a,r)}class bv extends Ys{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ge(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds();let{min:n,max:a}=this;const r=c=>n=t?n:c,l=c=>a=i?a:c;if(e){const c=_t(n),h=_t(a);c<0&&h<0?l(0):c>0&&h>0&&r(0)}if(n===a){let c=a===0?1:Math.abs(a*.05);l(a+c),e||r(n-c)}this.min=n,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:i}=e,n;return i?(n=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),t=t||11),t&&(n=Math.min(t,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const n={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},a=this._range||this,r=xv(n,a);return e.bounds==="ticks"&&$g(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const n=(i-t)/Math.max(e.length-1,1)/2;t-=n,i+=n}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Er(e,this.chart.options.locale,this.options.ticks.format)}}class pr extends bv{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=at(e)?e:0,this.max=at(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,i=Pt(this.options.ticks.minRotation),n=(e?Math.sin(i):Math.cos(i))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/n))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}D(pr,"id","linear"),D(pr,"defaults",{ticks:{callback:Wd.formatters.numeric}});const ta={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ue=Object.keys(ta);function Wc(s,e){return s-e}function Uc(s,e){if(ge(e))return null;const t=s._adapter,{parser:i,round:n,isoWeekday:a}=s._parseOpts;let r=e;return typeof i=="function"&&(r=i(r)),at(r)||(r=typeof i=="string"?t.parse(r,i):t.parse(r)),r===null?null:(n&&(r=n==="week"&&(zn(a)||a===!0)?t.startOf(r,"isoWeek",a):t.startOf(r,n)),+r)}function Vc(s,e,t,i){const n=Ue.length;for(let a=Ue.indexOf(s);a<n-1;++a){const r=ta[Ue[a]],l=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((t-e)/(l*r.size))<=i)return Ue[a]}return Ue[n-1]}function yv(s,e,t,i,n){for(let a=Ue.length-1;a>=Ue.indexOf(t);a--){const r=Ue[a];if(ta[r].common&&s._adapter.diff(n,i,r)>=e-1)return r}return Ue[t?Ue.indexOf(t):0]}function vv(s){for(let e=Ue.indexOf(s)+1,t=Ue.length;e<t;++e)if(ta[Ue[e]].common)return Ue[e]}function Yc(s,e,t){if(!t)s[e]=!0;else if(t.length){const{lo:i,hi:n}=Tr(t,e),a=t[i]>=e?t[i]:t[n];s[a]=!0}}function _v(s,e,t,i){const n=s._adapter,a=+n.startOf(e[0].value,i),r=e[e.length-1].value;let l,c;for(l=a;l<=r;l=+n.add(l,1,i))c=t[l],c>=0&&(e[c].major=!0);return e}function Kc(s,e,t){const i=[],n={},a=e.length;let r,l;for(r=0;r<a;++r)l=e[r],n[l]=r,i.push({value:l,major:!1});return a===0||!t?i:_v(s,i,n,t)}class Un extends Ys{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const i=e.time||(e.time={}),n=this._adapter=new jb._date(e.adapters.date);n.init(t),bi(i.displayFormats,n.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:Uc(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,i=e.time.unit||"day";let{min:n,max:a,minDefined:r,maxDefined:l}=this.getUserBounds();function c(h){!r&&!isNaN(h.min)&&(n=Math.min(n,h.min)),!l&&!isNaN(h.max)&&(a=Math.max(a,h.max))}(!r||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),n=at(n)&&!isNaN(n)?n:+t.startOf(Date.now(),i),a=at(a)&&!isNaN(a)?a:+t.endOf(Date.now(),i)+1,this.min=Math.min(n,a-1),this.max=Math.max(n+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],i=e[e.length-1]),{min:t,max:i}}buildTicks(){const e=this.options,t=e.time,i=e.ticks,n=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const a=this.min,r=this.max,l=Vg(n,a,r);return this._unit=t.unit||(i.autoSkip?Vc(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):yv(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:vv(this._unit),this.initOffsets(n),e.reverse&&l.reverse(),Kc(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,i=0,n,a;this.options.offset&&e.length&&(n=this.getDecimalForValue(e[0]),e.length===1?t=1-n:t=(this.getDecimalForValue(e[1])-n)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?i=a:i=(a-this.getDecimalForValue(e[e.length-2]))/2);const r=e.length<3?.5:.25;t=Ve(t,0,r),i=Ve(i,0,r),this._offsets={start:t,end:i,factor:1/(t+1+i)}}_generate(){const e=this._adapter,t=this.min,i=this.max,n=this.options,a=n.time,r=a.unit||Vc(a.minUnit,t,i,this._getLabelCapacity(t)),l=J(n.ticks.stepSize,1),c=r==="week"?a.isoWeekday:!1,h=zn(c)||c===!0,u={};let m=t,p,x;if(h&&(m=+e.startOf(m,"isoWeek",c)),m=+e.startOf(m,h?"day":r),e.diff(i,t,r)>1e5*l)throw new Error(t+" and "+i+" are too far apart with stepSize of "+l+" "+r);const v=n.ticks.source==="data"&&this.getDataTimestamps();for(p=m,x=0;p<i;p=+e.add(p,l,r),x++)Yc(u,p,v);return(p===i||n.bounds==="ticks"||x===1)&&Yc(u,p,v),Object.keys(u).sort(Wc).map(b=>+b)}getLabelForValue(e){const t=this._adapter,i=this.options.time;return i.tooltipFormat?t.format(e,i.tooltipFormat):t.format(e,i.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,a=this._unit,r=t||n[a];return this._adapter.format(e,r)}_tickFormatFunction(e,t,i,n){const a=this.options,r=a.ticks.callback;if(r)return be(r,[e,t,i],this);const l=a.time.displayFormats,c=this._unit,h=this._majorUnit,u=c&&l[c],m=h&&l[h],p=i[t],x=h&&m&&p&&p.major;return this._adapter.format(e,n||(x?m:u))}generateTickLabels(e){let t,i,n;for(t=0,i=e.length;t<i;++t)n=e[t],n.label=this._tickFormatFunction(n.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+i)*t.factor)}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,i=this.ctx.measureText(e).width,n=Pt(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(n),r=Math.sin(n),l=this._resolveTickFontOptions(0).size;return{w:i*a+l*r,h:i*r+l*a}}_getLabelCapacity(e){const t=this.options.time,i=t.displayFormats,n=i[t.unit]||i.millisecond,a=this._tickFormatFunction(e,0,Kc(this,[e],this._majorUnit),n),r=this._getLabelSize(a),l=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,i;if(e.length)return e;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(t=0,i=n.length;t<i;++t)e=e.concat(n[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,i;if(e.length)return e;const n=this.getLabels();for(t=0,i=n.length;t<i;++t)e.push(Uc(this,n[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return $d(e.sort(Wc))}}D(Un,"id","time"),D(Un,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function wn(s,e,t){let i=0,n=s.length-1,a,r,l,c;t?(e>=s[i].pos&&e<=s[n].pos&&({lo:i,hi:n}=or(s,"pos",e)),{pos:a,time:l}=s[i],{pos:r,time:c}=s[n]):(e>=s[i].time&&e<=s[n].time&&({lo:i,hi:n}=or(s,"time",e)),{time:a,pos:l}=s[i],{time:r,pos:c}=s[n]);const h=r-a;return h?l+(c-l)*(e-a)/h:l}class Gc extends Un{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=wn(t,this.min),this._tableRange=wn(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:i}=this,n=[],a=[];let r,l,c,h,u;for(r=0,l=e.length;r<l;++r)h=e[r],h>=t&&h<=i&&n.push(h);if(n.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(r=0,l=n.length;r<l;++r)u=n[r+1],c=n[r-1],h=n[r],Math.round((u+c)/2)!==h&&a.push({time:h,pos:r/(l-1)});return a}_generate(){const e=this.min,t=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((n,a)=>n-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(wn(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return wn(this._table,i*this._tableRange+this._minPos,!0)}}D(Gc,"id","timeseries"),D(Gc,"defaults",Un.defaults);const bh="label";function qc(s,e){typeof s=="function"?s(e):s&&(s.current=e)}function wv(s,e){const t=s.options;t&&e&&Object.assign(t,e)}function yh(s,e){s.labels=e}function vh(s,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bh;const i=[];s.datasets=e.map(n=>{const a=s.datasets.find(r=>r[t]===n[t]);return!a||!n.data||i.includes(a)?{...n}:(i.push(a),Object.assign(a,n),a)})}function jv(s){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bh;const t={labels:[],datasets:[]};return yh(t,s.labels),vh(t,s.datasets,e),t}function kv(s,e){const{height:t=150,width:i=300,redraw:n=!1,datasetIdKey:a,type:r,data:l,options:c,plugins:h=[],fallbackContent:u,updateMode:m,...p}=s,x=S.useRef(null),v=S.useRef(null),b=()=>{x.current&&(v.current=new ea(x.current,{type:r,data:jv(l,a),options:c&&{...c},plugins:h}),qc(e,v.current))},_=()=>{qc(e,null),v.current&&(v.current.destroy(),v.current=null)};return S.useEffect(()=>{!n&&v.current&&c&&wv(v.current,c)},[n,c]),S.useEffect(()=>{!n&&v.current&&yh(v.current.config.data,l.labels)},[n,l.labels]),S.useEffect(()=>{!n&&v.current&&l.datasets&&vh(v.current.config.data,l.datasets,a)},[n,l.datasets]),S.useEffect(()=>{v.current&&(n?(_(),setTimeout(b)):v.current.update(m))},[n,c,l.labels,l.datasets,m]),S.useEffect(()=>{v.current&&(_(),setTimeout(b))},[r]),S.useEffect(()=>(b(),()=>_()),[]),Gn.createElement("canvas",{ref:x,role:"img",height:t,width:i,...p},u)}const Nv=S.forwardRef(kv);function _h(s,e){return ea.register(e),S.forwardRef((t,i)=>Gn.createElement(Nv,{...t,ref:i,type:s}))}const Cv=_h("bar",An),Ja=_h("doughnut",hi);ea.register(mr,pr,Pn,mi,Rn,fi,av,fv,iv);const Sv=({portfolioAnalysis:s,taxCalculations:e,className:t=""})=>{var u;const i=()=>{const m=Object.values(s.market_summaries).flatMap(p=>p.holdings).sort((p,x)=>x.current_value_gbp-p.current_value_gbp).slice(0,10);return{labels:m.map(p=>{var x;return((x=p.security)==null?void 0:x.symbol)||"N/A"}),datasets:[{label:"Portfolio Value (Â£)",data:m.map(p=>p.current_value_gbp),backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FF6384","#C9CBCF","#4BC0C0","#FF6384"],borderWidth:1}]}},n=()=>{const m=Object.values(s.market_summaries).flatMap(p=>p.holdings).map(p=>{var x;return{symbol:((x=p.security)==null?void 0:x.symbol)||"N/A",gain:p.unrealized_gain_loss||0}}).sort((p,x)=>Math.abs(x.gain)-Math.abs(p.gain)).slice(0,15);return{labels:m.map(p=>p.symbol),datasets:[{label:"Unrealized Gains/Losses (Â£)",data:m.map(p=>p.gain),backgroundColor:m.map(p=>p.gain>=0?"#28a745":"#dc3545"),borderColor:"#dee2e6",borderWidth:1}]}},a=()=>{const m=s.market_summaries,p=Object.keys(m);return p.length<=1?{labels:[p[0]||"GBP"],datasets:[{label:"Portfolio Value",data:[s.total_portfolio_value],backgroundColor:["#36A2EB"]}]}:{labels:p,datasets:[{label:"Value by Currency (Â£)",data:p.map(x=>m[x].total_market_value),backgroundColor:["#36A2EB","#FF6384","#FFCE56","#4BC0C0","#9966FF"]}]}},r=()=>{var v,b;const m=((v=e.disposal_calculations)==null?void 0:v.length)||0,p=((b=e.disposal_calculations)==null?void 0:b.filter(_=>_.taxable_gain>0).length)||0,x=m-p;return{labels:["Taxable Gains","Losses/Zero Gains"],datasets:[{label:"Number of Disposals",data:[p,x],backgroundColor:["#dc3545","#28a745"]}]}},l={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{callbacks:{label:m=>{const p=m.parsed.y;return`${m.dataset.label}: Â£${p.toLocaleString()}`}}}},scales:{y:{beginAtZero:!0,ticks:{callback:m=>`Â£${Number(m).toLocaleString()}`}}}},c={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:m=>{const p=m.parsed,x=m.dataset.data.reduce((b,_)=>b+_,0),v=(p/x*100).toFixed(1);return`${m.label}: Â£${p.toLocaleString()} (${v}%)`}}}}},h={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right"},tooltip:{callbacks:{label:m=>{const p=m.parsed;return`${m.label}: ${p} disposals`}}}}};return o.jsx("div",{className:`data-visualization ${t}`,children:o.jsxs("div",{className:"row",children:[o.jsx("div",{className:"col-lg-6 mb-4",children:o.jsxs("div",{className:"card h-100",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h5",{className:"card-title mb-0",children:[o.jsx("i",{className:"fas fa-chart-pie me-2"}),"Portfolio Allocation"]})}),o.jsx("div",{className:"card-body",children:o.jsx("div",{style:{height:"300px"},children:o.jsx(Ja,{data:i(),options:c})})})]})}),o.jsx("div",{className:"col-lg-6 mb-4",children:o.jsxs("div",{className:"card h-100",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h5",{className:"card-title mb-0",children:[o.jsx("i",{className:"fas fa-globe me-2"}),"Currency Breakdown"]})}),o.jsx("div",{className:"card-body",children:o.jsx("div",{style:{height:"300px"},children:o.jsx(Ja,{data:a(),options:c})})})]})}),o.jsx("div",{className:"col-12 mb-4",children:o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h5",{className:"card-title mb-0",children:[o.jsx("i",{className:"fas fa-chart-bar me-2"}),"Unrealized Gains/Losses by Security"]})}),o.jsx("div",{className:"card-body",children:o.jsx("div",{style:{height:"400px"},children:o.jsx(Cv,{data:n(),options:l})})})]})}),e.total_tax_liability>0&&o.jsx("div",{className:"col-lg-6 mb-4",children:o.jsxs("div",{className:"card h-100",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h5",{className:"card-title mb-0",children:[o.jsx("i",{className:"fas fa-receipt me-2"}),"Tax Analysis"]})}),o.jsxs("div",{className:"card-body",children:[o.jsx("div",{style:{height:"300px"},children:o.jsx(Ja,{data:r(),options:h})}),o.jsx("div",{className:"mt-3",children:o.jsxs("div",{className:"row text-center",children:[o.jsx("div",{className:"col-6",children:o.jsxs("div",{className:"border-end",children:[o.jsx("h6",{className:"text-muted mb-1",children:"Total Tax"}),o.jsxs("span",{className:"fs-5 fw-bold text-danger",children:["Â£",e.total_tax_liability.toLocaleString()]})]})}),o.jsxs("div",{className:"col-6",children:[o.jsx("h6",{className:"text-muted mb-1",children:"Disposals"}),o.jsx("span",{className:"fs-5 fw-bold text-info",children:((u=e.disposal_calculations)==null?void 0:u.length)||0})]})]})})]})]})}),o.jsx("div",{className:`${e.total_tax_liability>0?"col-lg-6":"col-12"} mb-4`,children:o.jsxs("div",{className:"card h-100",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h5",{className:"card-title mb-0",children:[o.jsx("i",{className:"fas fa-chart-line me-2"}),"Portfolio Summary"]})}),o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"row g-3",children:[o.jsx("div",{className:"col-sm-6",children:o.jsxs("div",{className:"text-center p-3 bg-light rounded",children:[o.jsx("h6",{className:"text-muted mb-1",children:"Total Holdings"}),o.jsx("span",{className:"fs-4 fw-bold text-primary",children:Object.values(s.market_summaries).reduce((m,p)=>m+p.holdings.length,0)})]})}),o.jsx("div",{className:"col-sm-6",children:o.jsxs("div",{className:"text-center p-3 bg-light rounded",children:[o.jsx("h6",{className:"text-muted mb-1",children:"Total Value"}),o.jsxs("span",{className:"fs-4 fw-bold text-success",children:["Â£",s.total_portfolio_value.toLocaleString()]})]})}),o.jsx("div",{className:"col-sm-6",children:o.jsxs("div",{className:"text-center p-3 bg-light rounded",children:[o.jsx("h6",{className:"text-muted mb-1",children:"Total Gains"}),o.jsxs("span",{className:`fs-4 fw-bold ${s.total_unrealized_gain_loss>=0?"text-success":"text-danger"}`,children:["Â£",s.total_unrealized_gain_loss.toLocaleString()]})]})}),o.jsx("div",{className:"col-sm-6",children:o.jsxs("div",{className:"text-center p-3 bg-light rounded",children:[o.jsx("h6",{className:"text-muted mb-1",children:"Currencies"}),o.jsx("span",{className:"fs-4 fw-bold text-info",children:Object.keys(s.market_summaries).length||1})]})})]})})]})})]})})},Tv=()=>{const{state:s}=Nd(),e=S.useMemo(()=>{var i;return(i=s.raw)!=null&&i.portfolio_analysis?s.raw.portfolio_analysis:null},[s.raw]),t=S.useMemo(()=>{var l,c,h;if(!((l=s.raw)!=null&&l.tax_analysis))return null;const i=((h=(c=s.raw.tax_report)==null?void 0:c.summary)==null?void 0:h.estimated_tax_liability)||{},a=((s.raw.tax_analysis.capital_gains||{}).disposals||[]).map(u=>{var b;const m=Number(u.proceeds)||0,p=Number(u.cost_basis)||0,x=Number(u.expenses)||0,v=m-p-x;return{symbol:((b=u.security)==null?void 0:b.symbol)||"UNKNOWN",disposal_date:u.sell_date||u.disposal_date||"",quantity:u.quantity||0,proceeds:m,gain_loss:v}}),r={};return{capital_gains_tax:Number(i.capital_gains_tax)||0,dividend_tax:Number(i.dividend_tax)||0,total_tax_liability:Number(i.total_estimated_tax)||(Number(i.capital_gains_tax)||0)+(Number(i.dividend_tax)||0)+(Number(i.currency_gains_tax)||0),section_104_pools:r,disposal_calculations:a}},[s.raw]);return s.status==="submitting"?o.jsx("div",{className:"container-fluid py-4",children:o.jsx("div",{className:"row justify-content-center",children:o.jsxs("div",{className:"col-12 col-md-8 text-center",children:[o.jsx(Ln,{size:"lg",className:"mb-3"}),o.jsx("h3",{className:"text-primary",children:"Processing Your Tax Calculation"}),o.jsx("p",{className:"text-muted",children:"Please wait while we analyse your portfolio and calculate your tax obligations..."})]})})}):s.status==="error"?o.jsx("div",{className:"container-fluid py-4",children:o.jsx("div",{className:"row justify-content-center",children:o.jsx("div",{className:"col-12 col-md-8",children:o.jsxs(Lt,{variant:"danger",className:"text-center",children:[o.jsxs("div",{className:"d-flex align-items-center justify-content-center mb-2",children:[o.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),o.jsx("h4",{className:"mb-0",children:"Calculation Error"})]}),o.jsx("p",{className:"mb-3",children:s.error||"An unexpected error occurred while processing your calculation."}),o.jsxs(Tt,{variant:"primary",onClick:()=>window.location.hash="",className:"me-2",children:[o.jsx("i",{className:"fas fa-calculator me-2"}),"Try Again"]})]})})})}):s.status==="idle"?o.jsx("div",{className:"container-fluid py-4",children:o.jsx("div",{className:"row justify-content-center",children:o.jsxs("div",{className:"col-12 col-md-8 text-center",children:[o.jsx("div",{className:"mb-4",children:o.jsx("i",{className:"fas fa-chart-line text-primary",style:{fontSize:"4rem"}})}),o.jsx("h2",{className:"text-primary mb-3",children:"No Calculation Results"}),o.jsx("p",{className:"text-muted mb-4",children:"Upload your brokerage files and run a calculation to see your tax results here."}),o.jsxs(Tt,{variant:"primary",size:"lg",onClick:()=>window.location.hash="",children:[o.jsx("i",{className:"fas fa-calculator me-2"}),"Start Tax Calculation"]})]})})}):!e||!t?o.jsx("div",{className:"container-fluid py-4",children:o.jsx("div",{className:"row justify-content-center",children:o.jsx("div",{className:"col-12 col-md-8",children:o.jsxs(Lt,{variant:"warning",className:"text-center",children:[o.jsx("h4",{children:"Incomplete Data"}),o.jsx("p",{children:"The calculation completed but some results data is missing. Please try running the calculation again."}),o.jsx(Tt,{variant:"primary",onClick:()=>window.location.hash="",children:"Run New Calculation"})]})})})}):o.jsxs("div",{className:"container-fluid py-4",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[o.jsx("div",{className:"row mb-4",children:o.jsx("div",{className:"col-12",children:o.jsxs("div",{className:"d-flex justify-content-between align-items-center bg-white rounded shadow-sm p-4",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"h2 mb-1 text-primary",children:[o.jsx("i",{className:"fas fa-chart-line me-3"}),"Tax Calculation Results"]}),o.jsx("p",{className:"text-muted mb-0",children:"Comprehensive analysis of your portfolio and UK tax obligations"})]}),o.jsxs("div",{className:"text-end",children:[o.jsxs(Tt,{variant:"outline-primary",size:"sm",onClick:()=>window.location.hash="",className:"me-2",children:[o.jsx("i",{className:"fas fa-calculator me-2"}),"New Calculation"]}),o.jsxs(Tt,{variant:"outline-secondary",size:"sm",onClick:()=>window.print(),children:[o.jsx("i",{className:"fas fa-print me-2"}),"Print Results"]})]})]})})}),t.total_tax_liability>0&&o.jsx("div",{className:"row mb-4",children:o.jsx("div",{className:"col-12",children:o.jsx(Lt,{variant:"warning",className:"border-0 shadow-sm",children:o.jsxs("div",{className:"d-flex align-items-center",children:[o.jsx("i",{className:"fas fa-exclamation-triangle me-3",style:{fontSize:"1.5rem"}}),o.jsxs("div",{children:[o.jsx("h5",{className:"mb-1",children:"Tax Liability Identified"}),o.jsxs("p",{className:"mb-0",children:["Your portfolio analysis shows a potential tax liability of"," ",o.jsx("strong",{children:new Intl.NumberFormat("en-GB",{style:"currency",currency:"GBP"}).format(t.total_tax_liability)}),". Please consult with a qualified tax advisor to confirm your obligations."]})]})]})})})}),o.jsx("div",{className:"row mb-4",children:o.jsx("div",{className:"col-12",children:o.jsx(Zp,{portfolioAnalysis:e,className:"shadow-sm border-0"})})}),o.jsx("div",{className:"row mb-4",children:o.jsx("div",{className:"col-12",children:o.jsx(ng,{marketSummaries:e.market_summaries,className:"shadow-sm border-0"})})}),o.jsx("div",{className:"row mb-4",children:o.jsx("div",{className:"col-12",children:o.jsx(ag,{taxCalculations:t,className:"shadow-sm border-0"})})}),o.jsx("div",{className:"row mb-4",children:o.jsx("div",{className:"col-12",children:o.jsxs("div",{className:"bg-white rounded shadow-sm p-4",children:[o.jsxs("div",{className:"d-flex align-items-center mb-4",children:[o.jsx("i",{className:"fas fa-chart-bar me-3 text-primary",style:{fontSize:"1.5rem"}}),o.jsxs("div",{children:[o.jsx("h4",{className:"mb-1",children:"Portfolio Analytics"}),o.jsx("p",{className:"text-muted mb-0",children:"Interactive charts and visualizations of your portfolio performance and tax analysis"})]})]}),o.jsx(Sv,{portfolioAnalysis:e,taxCalculations:t})]})})}),o.jsx("div",{className:"row",children:o.jsx("div",{className:"col-12",children:o.jsxs("div",{className:"bg-white rounded shadow-sm p-4 mb-4",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("h4",{className:"text-dark mb-2",children:"ðŸ“ˆ Further Your Tax Knowledge"}),o.jsx("p",{className:"text-muted",children:"Based on your calculation complexity, these resources can help you understand tax implications better"})]}),o.jsx(Dt,{featuredOnly:!0,limit:3,columns:{xs:1,sm:2,md:3},showRatings:!0,showCategories:!0,layout:"vertical",sortBy:"rating"})]})})}),o.jsx("div",{className:"row",children:o.jsx("div",{className:"col-12",children:o.jsxs("div",{className:"bg-white rounded shadow-sm p-4 text-center",children:[o.jsxs("div",{className:"mb-3",children:[o.jsx("h5",{className:"text-muted",children:"Need Help?"}),o.jsx("p",{className:"small text-muted mb-0",children:"These calculations are estimates. For professional tax advice, consult with a qualified accountant or tax advisor."})]}),o.jsxs("div",{className:"d-flex justify-content-center gap-3 flex-wrap",children:[o.jsxs(Tt,{variant:"primary",onClick:()=>window.location.hash="",children:[o.jsx("i",{className:"fas fa-calculator me-2"}),"Run New Calculation"]}),o.jsxs(Tt,{variant:"outline-secondary",onClick:()=>window.location.href="/",children:[o.jsx("i",{className:"fas fa-home me-2"}),"Back to Home"]}),o.jsxs(Tt,{variant:"outline-secondary",onClick:()=>window.open("https://www.gov.uk/capital-gains-tax","_blank"),children:[o.jsx("i",{className:"fas fa-external-link-alt me-2"}),"HMRC Guidance"]})]})]})})})]})},Av=()=>o.jsx("div",{className:"container py-4",children:o.jsx("div",{className:"row justify-content-center",children:o.jsxs("div",{className:"col-lg-8",children:[o.jsx("div",{className:"card shadow",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h1",{className:"card-title",children:"About IBKR Tax Calculator"}),o.jsx("p",{className:"lead",children:"A comprehensive UK Capital Gains Tax calculator designed specifically for Interactive Brokers and other trading platform users."}),o.jsx("h2",{children:"Features"}),o.jsxs("ul",{className:"list-unstyled",children:[o.jsxs("li",{children:[o.jsx("i",{className:"bi bi-check-circle-fill text-success me-2"}),"Accurate CGT calculations following HMRC guidelines"]}),o.jsxs("li",{children:[o.jsx("i",{className:"bi bi-check-circle-fill text-success me-2"}),"Support for QFX and CSV file imports"]}),o.jsxs("li",{children:[o.jsx("i",{className:"bi bi-check-circle-fill text-success me-2"}),"Real-time calculation updates"]}),o.jsxs("li",{children:[o.jsx("i",{className:"bi bi-check-circle-fill text-success me-2"}),"Detailed breakdown of gains and losses"]}),o.jsxs("li",{children:[o.jsx("i",{className:"bi bi-check-circle-fill text-success me-2"}),"Section 104 holding calculations"]})]}),o.jsx("h2",{children:"Data Privacy"}),o.jsx("p",{children:"Your financial data is processed locally in your browser. No data is stored on our servers, ensuring complete privacy and security."}),o.jsxs("div",{className:"alert alert-info",children:[o.jsx("i",{className:"bi bi-info-circle me-2"}),"This calculator is provided for informational purposes only. Always consult with a qualified tax advisor for official tax guidance."]})]})}),o.jsx("div",{className:"mt-4",children:o.jsx("div",{className:"card shadow",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h2",{className:"card-title h4 mb-3",children:"ðŸ“š Educational Resources"}),o.jsx("p",{className:"text-muted mb-4",children:"Enhance your understanding of UK taxation and investment strategies with these professionally recommended guides"}),o.jsx(Dt,{limit:6,columns:{xs:1,sm:2,md:2,lg:3},showRatings:!0,showCategories:!0,layout:"vertical",sortBy:"featured"})]})})})]})})}),Mv=()=>o.jsx("div",{className:"container py-4",children:o.jsx("div",{className:"row justify-content-center",children:o.jsxs("div",{className:"col-lg-10",children:[o.jsx("div",{className:"card shadow",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h1",{className:"card-title",children:"Help & FAQ"}),o.jsx("p",{className:"lead",children:"Get help with using the IBKR Tax Calculator and understanding UK Capital Gains Tax."}),o.jsxs("div",{className:"row",children:[o.jsxs("div",{className:"col-md-6",children:[o.jsx("h2",{children:"Getting Started"}),o.jsxs("div",{className:"accordion",id:"gettingStartedAccordion",children:[o.jsxs("div",{className:"accordion-item",children:[o.jsx("h2",{className:"accordion-header",children:o.jsx("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#fileUpload",children:"How to upload transaction files"})}),o.jsx("div",{id:"fileUpload",className:"accordion-collapse collapse","data-bs-parent":"#gettingStartedAccordion",children:o.jsxs("div",{className:"accordion-body",children:[o.jsx("p",{children:"You can upload transaction data in two formats:"}),o.jsxs("ul",{children:[o.jsxs("li",{children:[o.jsx("strong",{children:"QFX files:"})," Export from Interactive Brokers activity statements"]}),o.jsxs("li",{children:[o.jsx("strong",{children:"CSV files:"})," Export from Sharesight or other portfolio platforms"]})]}),o.jsx("p",{children:'Simply click the "Choose File" button and select your file. The calculator will automatically detect the format and process your transactions.'})]})})]}),o.jsxs("div",{className:"accordion-item",children:[o.jsx("h2",{className:"accordion-header",children:o.jsx("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#calculations",children:"Understanding the calculations"})}),o.jsx("div",{id:"calculations",className:"accordion-collapse collapse","data-bs-parent":"#gettingStartedAccordion",children:o.jsxs("div",{className:"accordion-body",children:[o.jsx("p",{children:"The calculator follows HMRC guidelines for Capital Gains Tax:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Uses Section 104 holding rules for share pooling"}),o.jsx("li",{children:"Applies 30-day rule for wash sales"}),o.jsx("li",{children:"Calculates allowable costs including broker fees"}),o.jsx("li",{children:"Accounts for currency conversions at HMRC rates"})]})]})})]})]})]}),o.jsxs("div",{className:"col-md-6",children:[o.jsx("h2",{children:"Common Questions"}),o.jsxs("div",{className:"accordion",id:"faqAccordion",children:[o.jsxs("div",{className:"accordion-item",children:[o.jsx("h2",{className:"accordion-header",children:o.jsx("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#dataPrivacy",children:"Is my data secure?"})}),o.jsx("div",{id:"dataPrivacy",className:"accordion-collapse collapse","data-bs-parent":"#faqAccordion",children:o.jsx("div",{className:"accordion-body",children:o.jsx("p",{children:"Yes! All calculations are performed locally in your browser. Your financial data never leaves your device and is not stored on our servers."})})})]}),o.jsxs("div",{className:"accordion-item",children:[o.jsx("h2",{className:"accordion-header",children:o.jsx("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":"#accuracy",children:"How accurate are the calculations?"})}),o.jsx("div",{id:"accuracy",className:"accordion-collapse collapse","data-bs-parent":"#faqAccordion",children:o.jsx("div",{className:"accordion-body",children:o.jsx("p",{children:"Our calculator follows HMRC guidelines and has been tested with various scenarios. However, always consult with a qualified tax advisor for official tax guidance."})})})]})]})]})]}),o.jsx("div",{className:"mt-4",children:o.jsxs("div",{className:"alert alert-primary",children:[o.jsx("h4",{className:"alert-heading",children:"Need More Help?"}),o.jsx("p",{children:"If you can't find the answer you're looking for, try our CGT Guide for detailed explanations of UK Capital Gains Tax rules."}),o.jsx("a",{href:"#guide",className:"btn btn-primary",children:"View CGT Guide"})]})})]})}),o.jsx("div",{className:"mt-4",children:o.jsx("div",{className:"card shadow",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h2",{className:"h4 mb-3",children:"ðŸ“– Recommended Reading"}),o.jsx("p",{className:"text-muted mb-4",children:"Expand your knowledge with these comprehensive guides to UK taxation and investment strategies"}),o.jsx(Dt,{category:"tax",limit:4,columns:{xs:1,sm:2,md:2},showRatings:!0,showCategories:!1,layout:"horizontal"})]})})})]})})}),Ev=()=>o.jsx("div",{className:"container py-4",children:o.jsx("div",{className:"row justify-content-center",children:o.jsx("div",{className:"col-lg-10",children:o.jsx("div",{className:"card shadow",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h1",{className:"card-title",children:"UK Capital Gains Tax Guide"}),o.jsx("p",{className:"lead",children:"A comprehensive guide to understanding UK Capital Gains Tax for shares and investments."}),o.jsxs("div",{className:"row",children:[o.jsxs("div",{className:"col-lg-8",children:[o.jsx("h2",{children:"What is Capital Gains Tax?"}),o.jsx("p",{children:"Capital Gains Tax (CGT) is a tax on the profit when you sell (or 'dispose of') something (an 'asset') that's gone up in value. It's the gain you make that's taxed, not the amount of money you receive."}),o.jsx("h3",{children:"CGT Rates for 2024/25"}),o.jsx("div",{className:"table-responsive",children:o.jsxs("table",{className:"table table-striped",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx("th",{children:"Tax Band"}),o.jsx("th",{children:"Rate (Shares)"}),o.jsx("th",{children:"Rate (Residential Property)"})]})}),o.jsxs("tbody",{children:[o.jsxs("tr",{children:[o.jsx("td",{children:"Basic Rate"}),o.jsx("td",{children:"10%"}),o.jsx("td",{children:"18%"})]}),o.jsxs("tr",{children:[o.jsx("td",{children:"Higher Rate"}),o.jsx("td",{children:"20%"}),o.jsx("td",{children:"28%"})]})]})]})}),o.jsx("h3",{children:"Annual Exempt Amount"}),o.jsx("p",{children:"You can make gains of up to Â£6,000 (2024/25) before you need to pay Capital Gains Tax. This is known as your annual exempt amount or 'allowance'."}),o.jsx("h3",{children:"Section 104 Holdings"}),o.jsx("p",{children:"When you buy shares of the same company at different times, they are pooled together in what's called a 'Section 104 holding'. This means you calculate the average cost when you sell shares."}),o.jsxs("div",{className:"alert alert-info",children:[o.jsx("h4",{className:"alert-heading",children:"Example Calculation:"}),o.jsx("p",{children:"If you bought 100 shares at Â£10 each and later bought 50 shares at Â£15 each:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Total shares: 150"}),o.jsx("li",{children:"Total cost: (100 Ã— Â£10) + (50 Ã— Â£15) = Â£1,750"}),o.jsx("li",{children:"Average cost per share: Â£1,750 Ã· 150 = Â£11.67"})]})]}),o.jsx("h3",{children:"The 30-Day Rule"}),o.jsx("p",{children:"If you sell shares and buy the same shares within 30 days, special rules apply to prevent 'bed and breakfasting' (selling and immediately rebuying to crystallize losses)."}),o.jsx("h3",{children:"Allowable Costs"}),o.jsx("p",{children:"You can deduct certain costs from your capital gain:"}),o.jsxs("ul",{children:[o.jsx("li",{children:"The original cost of the asset"}),o.jsx("li",{children:"Costs of buying and selling (e.g., broker fees, stamp duty)"}),o.jsx("li",{children:"Costs of improving the asset"})]})]}),o.jsx("div",{className:"col-lg-4",children:o.jsxs("div",{className:"sticky-top",style:{top:"20px"},children:[o.jsxs("div",{className:"card bg-light",children:[o.jsx("div",{className:"card-header",children:o.jsx("h5",{children:"Quick Links"})}),o.jsx("div",{className:"card-body",children:o.jsxs("ul",{className:"list-unstyled",children:[o.jsx("li",{children:o.jsx("a",{href:"#calculator",className:"text-decoration-none",children:"ðŸ§® Use Calculator"})}),o.jsx("li",{children:o.jsx("a",{href:"#help",className:"text-decoration-none",children:"â“ Get Help"})}),o.jsx("li",{children:o.jsx("a",{href:"#about",className:"text-decoration-none",children:"â„¹ï¸ About Us"})})]})})]}),o.jsx("div",{className:"card bg-warning bg-opacity-10 mt-3",children:o.jsxs("div",{className:"card-body",children:[o.jsx("h6",{className:"card-title",children:"âš ï¸ Important"}),o.jsx("p",{className:"card-text small",children:"This guide provides general information only. Always consult with a qualified tax advisor for specific advice about your situation."})]})})]})})]})]})})})})}),Pv=({posts:s,className:e="",onPostClick:t})=>{const[i,n]=S.useState(""),[a,r]=S.useState("All Categories"),[l,c]=S.useState(""),h=S.useMemo(()=>["All Categories",...new Set(s.map(_=>_.category))],[s]),u=S.useMemo(()=>{const b=new Set;return s.forEach(_=>{_.tags&&_.tags.forEach(w=>b.add(w))}),Array.from(b).sort()},[s]),m=S.useMemo(()=>s.filter(b=>{const _=i===""||b.title.toLowerCase().includes(i.toLowerCase())||b.content.toLowerCase().includes(i.toLowerCase())||b.excerpt&&b.excerpt.toLowerCase().includes(i.toLowerCase()),w=a==="All Categories"||b.category===a,j=l===""||b.tags&&b.tags.includes(l);return _&&w&&j}),[s,i,a,l]),p=b=>{c(l===b?"":b)},x=b=>{t&&t(b)},v=b=>new Date(b).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"});return o.jsxs("div",{className:`blog-index ${e}`,children:[o.jsx("div",{className:"blog-controls mb-4",children:o.jsxs("div",{className:"row g-3",children:[o.jsx("div",{className:"col-md-6",children:o.jsx("input",{type:"text",className:"form-control",placeholder:"Search blog posts...",value:i,onChange:b=>n(b.target.value)})}),o.jsx("div",{className:"col-md-3",children:o.jsx("select",{className:"form-select",value:a,onChange:b=>r(b.target.value),children:h.map(b=>o.jsx("option",{value:b,children:b},b))})}),o.jsx("div",{className:"col-md-3",children:o.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[o.jsxs("span",{className:"text-muted small",children:[m.length," articles"]}),l&&o.jsx("button",{className:"btn btn-sm btn-outline-secondary",onClick:()=>c(""),children:"Clear tag filter"})]})})]})}),u.length>0&&o.jsx("div",{className:"blog-tags mb-4",children:o.jsx("div",{className:"d-flex flex-wrap gap-2",children:u.map(b=>o.jsxs("button",{className:`btn btn-sm ${l===b?"btn-primary":"btn-outline-primary"}`,onClick:()=>p(b),children:["#",b]},b))})}),o.jsx("div",{className:"blog-posts",children:m.length>0?o.jsx("div",{className:"row g-4",children:m.map(b=>o.jsx("div",{className:"col-md-6 col-lg-4",children:o.jsx("div",{className:"card h-100 blog-post-card",style:{cursor:t?"pointer":"default"},onClick:()=>x(b),children:o.jsxs("div",{className:"card-body d-flex flex-column",children:[o.jsx("div",{className:"mb-2",children:o.jsx("span",{className:"badge bg-secondary mb-2",children:b.category})}),o.jsx("h5",{className:"card-title",children:b.title}),o.jsx("p",{className:"card-text flex-grow-1",children:b.excerpt}),o.jsxs("div",{className:"blog-post-meta mt-auto",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[o.jsxs("small",{className:"text-muted",children:["By ",b.author]}),o.jsxs("small",{className:"text-muted",children:[b.readingTime," min read"]})]}),o.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[o.jsx("small",{className:"text-muted",children:v(b.publishedDate)}),o.jsxs("div",{className:"blog-post-tags",children:[b.tags&&b.tags.slice(0,2).map(_=>o.jsx("span",{className:"badge bg-light text-dark me-1",style:{fontSize:"0.7em"},children:_},_)),b.tags&&b.tags.length>2&&o.jsxs("span",{className:"badge bg-light text-dark",style:{fontSize:"0.7em"},children:["+",b.tags.length-2]})]})]})]})]})})},b.id))}):o.jsxs("div",{className:"text-center py-5",children:[o.jsx("div",{className:"mb-3",children:o.jsx("i",{className:"bi bi-search",style:{fontSize:"3rem",color:"#6c757d"}})}),o.jsx("h4",{className:"text-muted",children:"No blog posts found"}),o.jsx("p",{className:"text-muted",children:"Try adjusting your search or filter criteria."}),(i||a!=="All Categories"||l)&&o.jsx("button",{className:"btn btn-outline-primary",onClick:()=>{n(""),r("All Categories"),c("")},children:"Clear all filters"})]})})]})},wh=({post:s,className:e=""})=>{const t=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return o.jsx("article",{className:`blog-post ${e}`,children:o.jsxs(Be,{className:"blog-post-card",children:[o.jsxs("div",{className:"blog-post-header mb-4",children:[o.jsx("h1",{className:"blog-post-title h2 mb-3 text-primary",children:s.title}),o.jsxs("div",{className:"blog-post-meta d-flex flex-wrap align-items-center text-muted small mb-3",children:[s.author&&o.jsxs("span",{className:"me-3",children:[o.jsx("i",{className:"fas fa-user me-1"}),s.author]}),o.jsxs("span",{className:"me-3",children:[o.jsx("i",{className:"fas fa-calendar me-1"}),t(s.publishedDate)]}),s.readingTime&&o.jsxs("span",{className:"me-3",children:[o.jsx("i",{className:"fas fa-clock me-1"}),s.readingTime," min read"]}),s.category&&o.jsx("span",{className:"badge bg-primary",children:s.category})]}),s.tags&&s.tags.length>0&&o.jsx("div",{className:"blog-post-tags mb-3",children:s.tags.map(i=>o.jsxs("span",{className:"badge bg-light text-dark me-2 mb-1",children:["#",i]},i))})]}),o.jsx("div",{className:"blog-post-content",children:o.jsx("div",{className:"prose",dangerouslySetInnerHTML:{__html:s.content.replace(/(<\/?(ul|ol|li|div|p|h[1-6]|blockquote|pre|table|tr|td|th|thead|tbody)>)\s*\n+\s*/gi,"$1").replace(/>\s*\n+\s*</g,"><").replace(/([^>])\n([^<])/g,"$1<br />$2")}})})]})})};wh.displayName="BlogPost";const Rv="modulepreload",Dv=function(s,e){return new URL(s,e).href},Xc={},$e=function(e,t,i){let n=Promise.resolve();if(t&&t.length>0){const r=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=Promise.allSettled(t.map(h=>{if(h=Dv(h,i),h in Xc)return;Xc[h]=!0;const u=h.endsWith(".css"),m=u?'[rel="stylesheet"]':"";if(!!i)for(let v=r.length-1;v>=0;v--){const b=r[v];if(b.href===h&&(!u||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${m}`))return;const x=document.createElement("link");if(x.rel=u?"stylesheet":Rv,u||(x.as="script"),x.crossOrigin="",x.href=h,c&&x.setAttribute("nonce",c),document.head.appendChild(x),u)return new Promise((v,b)=>{x.addEventListener("load",v),x.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(r){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=r,window.dispatchEvent(l),!l.defaultPrevented)throw r}return n.then(r=>{for(const l of r||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};function Br(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let _s=Br();function jh(s){_s=s}const kh=/[&<>"']/,Lv=new RegExp(kh.source,"g"),Nh=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,Ov=new RegExp(Nh.source,"g"),Iv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Qc=s=>Iv[s];function Qe(s,e){if(e){if(kh.test(s))return s.replace(Lv,Qc)}else if(Nh.test(s))return s.replace(Ov,Qc);return s}const Fv=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function zv(s){return s.replace(Fv,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const $v=/(^|[^\[])\^/g;function fe(s,e){let t=typeof s=="string"?s:s.source;e=e||"";const i={replace:(n,a)=>{let r=typeof a=="string"?a:a.source;return r=r.replace($v,"$1"),t=t.replace(n,r),i},getRegex:()=>new RegExp(t,e)};return i}function Zc(s){try{s=encodeURI(s).replace(/%25/g,"%")}catch{return null}return s}const wi={exec:()=>null};function Jc(s,e){const t=s.replace(/\|/g,(a,r,l)=>{let c=!1,h=r;for(;--h>=0&&l[h]==="\\";)c=!c;return c?"|":" |"}),i=t.split(/ \|/);let n=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),e)if(i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function jn(s,e,t){const i=s.length;if(i===0)return"";let n=0;for(;n<i&&s.charAt(i-n-1)===e;)n++;return s.slice(0,i-n)}function Bv(s,e){if(s.indexOf(e[1])===-1)return-1;let t=0;for(let i=0;i<s.length;i++)if(s[i]==="\\")i++;else if(s[i]===e[0])t++;else if(s[i]===e[1]&&(t--,t<0))return i;return-1}function ed(s,e,t,i){const n=e.href,a=e.title?Qe(e.title):null,r=s[1].replace(/\\([\[\]])/g,"$1");if(s[0].charAt(0)!=="!"){i.state.inLink=!0;const l={type:"link",raw:t,href:n,title:a,text:r,tokens:i.inlineTokens(r)};return i.state.inLink=!1,l}return{type:"image",raw:t,href:n,title:a,text:Qe(r)}}function Hv(s,e){const t=s.match(/^(\s+)(?:```)/);if(t===null)return e;const i=t[1];return e.split(`
`).map(n=>{const a=n.match(/^\s+/);if(a===null)return n;const[r]=a;return r.length>=i.length?n.slice(i.length):n}).join(`
`)}class Vn{constructor(e){D(this,"options");D(this,"rules");D(this,"lexer");this.options=e||_s}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:jn(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],n=Hv(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const n=jn(i,"#");(this.options.pedantic||!n||/ $/.test(n))&&(i=n.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let i=t[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);i=jn(i.replace(/^ *>[ \t]?/gm,""),`
`);const n=this.lexer.state.top;this.lexer.state.top=!0;const a=this.lexer.blockTokens(i);return this.lexer.state.top=n,{type:"blockquote",raw:t[0],tokens:a,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const n=i.length>1,a={type:"list",raw:"",ordered:n,start:n?+i.slice(0,-1):"",loose:!1,items:[]};i=n?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=n?i:"[*+-]");const r=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let l="",c="",h=!1;for(;e;){let u=!1;if(!(t=r.exec(e))||this.rules.block.hr.test(e))break;l=t[0],e=e.substring(l.length);let m=t[2].split(`
`,1)[0].replace(/^\t+/,w=>" ".repeat(3*w.length)),p=e.split(`
`,1)[0],x=0;this.options.pedantic?(x=2,c=m.trimStart()):(x=t[2].search(/[^ ]/),x=x>4?1:x,c=m.slice(x),x+=t[1].length);let v=!1;if(!m&&/^ *$/.test(p)&&(l+=p+`
`,e=e.substring(p.length+1),u=!0),!u){const w=new RegExp(`^ {0,${Math.min(3,x-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),j=new RegExp(`^ {0,${Math.min(3,x-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),C=new RegExp(`^ {0,${Math.min(3,x-1)}}(?:\`\`\`|~~~)`),P=new RegExp(`^ {0,${Math.min(3,x-1)}}#`);for(;e;){const A=e.split(`
`,1)[0];if(p=A,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),C.test(p)||P.test(p)||w.test(p)||j.test(e))break;if(p.search(/[^ ]/)>=x||!p.trim())c+=`
`+p.slice(x);else{if(v||m.search(/[^ ]/)>=4||C.test(m)||P.test(m)||j.test(m))break;c+=`
`+p}!v&&!p.trim()&&(v=!0),l+=A+`
`,e=e.substring(A.length+1),m=p.slice(x)}}a.loose||(h?a.loose=!0:/\n *\n *$/.test(l)&&(h=!0));let b=null,_;this.options.gfm&&(b=/^\[[ xX]\] /.exec(c),b&&(_=b[0]!=="[ ] ",c=c.replace(/^\[[ xX]\] +/,""))),a.items.push({type:"list_item",raw:l,task:!!b,checked:_,loose:!1,text:c,tokens:[]}),a.raw+=l}a.items[a.items.length-1].raw=l.trimEnd(),a.items[a.items.length-1].text=c.trimEnd(),a.raw=a.raw.trimEnd();for(let u=0;u<a.items.length;u++)if(this.lexer.state.top=!1,a.items[u].tokens=this.lexer.blockTokens(a.items[u].text,[]),!a.loose){const m=a.items[u].tokens.filter(x=>x.type==="space"),p=m.length>0&&m.some(x=>/\n.*\n/.test(x.raw));a.loose=p}if(a.loose)for(let u=0;u<a.items.length;u++)a.items[u].loose=!0;return a}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:n,title:a}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const i=Jc(t[1]),n=t[2].replace(/^\||\| *$/g,"").split("|"),a=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],r={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===n.length){for(const l of n)/^ *-+: *$/.test(l)?r.align.push("right"):/^ *:-+: *$/.test(l)?r.align.push("center"):/^ *:-+ *$/.test(l)?r.align.push("left"):r.align.push(null);for(const l of i)r.header.push({text:l,tokens:this.lexer.inline(l)});for(const l of a)r.rows.push(Jc(l,r.header.length).map(c=>({text:c,tokens:this.lexer.inline(c)})));return r}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Qe(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const r=jn(i.slice(0,-1),"\\");if((i.length-r.length)%2===0)return}else{const r=Bv(t[2],"()");if(r>-1){const c=(t[0].indexOf("!")===0?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,c).trim(),t[3]=""}}let n=t[2],a="";if(this.options.pedantic){const r=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);r&&(n=r[1],a=r[3])}else a=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(this.options.pedantic&&!/>$/.test(i)?n=n.slice(1):n=n.slice(1,-1)),ed(t,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const n=(i[2]||i[1]).replace(/\s+/g," "),a=t[n.toLowerCase()];if(!a){const r=i[0].charAt(0);return{type:"text",raw:r,text:r}}return ed(i,a,i[0],this.lexer)}}emStrong(e,t,i=""){let n=this.rules.inline.emStrongLDelim.exec(e);if(!n||n[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(n[1]||n[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const r=[...n[0]].length-1;let l,c,h=r,u=0;const m=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(m.lastIndex=0,t=t.slice(-1*e.length+r);(n=m.exec(t))!=null;){if(l=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!l)continue;if(c=[...l].length,n[3]||n[4]){h+=c;continue}else if((n[5]||n[6])&&r%3&&!((r+c)%3)){u+=c;continue}if(h-=c,h>0)continue;c=Math.min(c,c+h+u);const p=[...n[0]][0].length,x=e.slice(0,r+n.index+p+c);if(Math.min(r,c)%2){const b=x.slice(1,-1);return{type:"em",raw:x,text:b,tokens:this.lexer.inlineTokens(b)}}const v=x.slice(2,-2);return{type:"strong",raw:x,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const n=/[^ ]/.test(i),a=/^ /.test(i)&&/ $/.test(i);return n&&a&&(i=i.substring(1,i.length-1)),i=Qe(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,n;return t[2]==="@"?(i=Qe(t[1]),n="mailto:"+i):(i=Qe(t[1]),n=i),{type:"link",raw:t[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}}}url(e){var i;let t;if(t=this.rules.inline.url.exec(e)){let n,a;if(t[2]==="@")n=Qe(t[0]),a="mailto:"+n;else{let r;do r=t[0],t[0]=((i=this.rules.inline._backpedal.exec(t[0]))==null?void 0:i[0])??"";while(r!==t[0]);n=Qe(t[0]),t[1]==="www."?a="http://"+t[0]:a=t[0]}return{type:"link",raw:t[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return this.lexer.state.inRawBlock?i=t[0]:i=Qe(t[0]),{type:"text",raw:t[0],text:i}}}}const Wv=/^(?: *(?:\n|$))+/,Uv=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Vv=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Oi=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Yv=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ch=/(?:[*+-]|\d{1,9}[.)])/,Sh=fe(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ch).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Hr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Kv=/^[^\n]+/,Wr=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Gv=fe(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Wr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),qv=fe(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ch).getRegex(),sa="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",Ur=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Xv=fe("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",Ur).replace("tag",sa).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Th=fe(Hr).replace("hr",Oi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",sa).getRegex(),Qv=fe(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Th).getRegex(),Vr={blockquote:Qv,code:Uv,def:Gv,fences:Vv,heading:Yv,hr:Oi,html:Xv,lheading:Sh,list:qv,newline:Wv,paragraph:Th,table:wi,text:Kv},td=fe("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Oi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",sa).getRegex(),Zv={...Vr,table:td,paragraph:fe(Hr).replace("hr",Oi).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",td).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",sa).getRegex()},Jv={...Vr,html:fe(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ur).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:wi,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:fe(Hr).replace("hr",Oi).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Sh).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Ah=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,e_=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Mh=/^( {2,}|\\)\n(?!\s*$)/,t_=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Ii="\\p{P}\\p{S}",s_=fe(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Ii).getRegex(),i_=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,n_=fe(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Ii).getRegex(),a_=fe("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Ii).getRegex(),r_=fe("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Ii).getRegex(),o_=fe(/\\([punct])/,"gu").replace(/punct/g,Ii).getRegex(),l_=fe(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),c_=fe(Ur).replace("(?:-->|$)","-->").getRegex(),d_=fe("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",c_).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Yn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,h_=fe(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Yn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Eh=fe(/^!?\[(label)\]\[(ref)\]/).replace("label",Yn).replace("ref",Wr).getRegex(),Ph=fe(/^!?\[(ref)\](?:\[\])?/).replace("ref",Wr).getRegex(),u_=fe("reflink|nolink(?!\\()","g").replace("reflink",Eh).replace("nolink",Ph).getRegex(),Yr={_backpedal:wi,anyPunctuation:o_,autolink:l_,blockSkip:i_,br:Mh,code:e_,del:wi,emStrongLDelim:n_,emStrongRDelimAst:a_,emStrongRDelimUnd:r_,escape:Ah,link:h_,nolink:Ph,punctuation:s_,reflink:Eh,reflinkSearch:u_,tag:d_,text:t_,url:wi},f_={...Yr,link:fe(/^!?\[(label)\]\((.*?)\)/).replace("label",Yn).getRegex(),reflink:fe(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Yn).getRegex()},gr={...Yr,escape:fe(Ah).replace("])","~|])").getRegex(),url:fe(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},m_={...gr,br:fe(Mh).replace("{2,}","*").getRegex(),text:fe(gr.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},kn={normal:Vr,gfm:Zv,pedantic:Jv},ci={normal:Yr,gfm:gr,breaks:m_,pedantic:f_};class yt{constructor(e){D(this,"tokens");D(this,"options");D(this,"state");D(this,"tokenizer");D(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||_s,this.options.tokenizer=this.options.tokenizer||new Vn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:kn.normal,inline:ci.normal};this.options.pedantic?(t.block=kn.pedantic,t.inline=ci.pedantic):this.options.gfm&&(t.block=kn.gfm,this.options.breaks?t.inline=ci.breaks:t.inline=ci.gfm),this.tokenizer.rules=t}static get rules(){return{block:kn,inline:ci}}static lex(e,t){return new yt(t).lex(e)}static lexInline(e,t){return new yt(t).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const i=this.inlineQueue[t];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,c,h)=>c+"    ".repeat(h.length));let i,n,a,r;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(i=l.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&t.length>0?t[t.length-1].raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),n=t[t.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),n=t[t.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+i.raw,n.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0;const c=e.slice(1);let h;this.options.extensions.startBlock.forEach(u=>{h=u.call({lexer:this},c),typeof h=="number"&&h>=0&&(l=Math.min(l,h))}),l<1/0&&l>=0&&(a=e.substring(0,l+1))}if(this.state.top&&(i=this.tokenizer.paragraph(a))){n=t[t.length-1],r&&n.type==="paragraph"?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i),r=a.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),n=t[t.length-1],n&&n.type==="text"?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):t.push(i);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let i,n,a,r=e,l,c,h;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,l.index)+"["+"a".repeat(l[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,l.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;e;)if(c||(h=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),n=t[t.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),n=t[t.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(i=this.tokenizer.emStrong(e,r,h)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.autolink(e)){e=e.substring(i.raw.length),t.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e))){e=e.substring(i.raw.length),t.push(i);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const m=e.slice(1);let p;this.options.extensions.startInline.forEach(x=>{p=x.call({lexer:this},m),typeof p=="number"&&p>=0&&(u=Math.min(u,p))}),u<1/0&&u>=0&&(a=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(a)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(h=i.raw.slice(-1)),c=!0,n=t[t.length-1],n&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):t.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}}class Kn{constructor(e){D(this,"options");this.options=e||_s}code(e,t,i){var a;const n=(a=(t||"").match(/^\S*/))==null?void 0:a[0];return e=e.replace(/\n$/,"")+`
`,n?'<pre><code class="language-'+Qe(n)+'">'+(i?e:Qe(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:Qe(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e,t){return e}heading(e,t,i){return`<h${t}>${e}</h${t}>
`}hr(){return`<hr>
`}list(e,t,i){const n=t?"ol":"ul",a=t&&i!==1?' start="'+i+'"':"";return"<"+n+a+`>
`+e+"</"+n+`>
`}listitem(e,t,i){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(e){return`<p>${e}</p>
`}table(e,t){return t&&(t=`<tbody>${t}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,t){const i=t.header?"th":"td";return(t.align?`<${i} align="${t.align}">`:`<${i}>`)+e+`</${i}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return"<br>"}del(e){return`<del>${e}</del>`}link(e,t,i){const n=Zc(e);if(n===null)return i;e=n;let a='<a href="'+e+'"';return t&&(a+=' title="'+t+'"'),a+=">"+i+"</a>",a}image(e,t,i){const n=Zc(e);if(n===null)return i;e=n;let a=`<img src="${e}" alt="${i}"`;return t&&(a+=` title="${t}"`),a+=">",a}text(e){return e}}class Kr{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,i){return""+i}image(e,t,i){return""+i}br(){return""}}class vt{constructor(e){D(this,"options");D(this,"renderer");D(this,"textRenderer");this.options=e||_s,this.options.renderer=this.options.renderer||new Kn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Kr}static parse(e,t){return new vt(t).parse(e)}static parseInline(e,t){return new vt(t).parseInline(e)}parse(e,t=!0){let i="";for(let n=0;n<e.length;n++){const a=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const r=a,l=this.options.extensions.renderers[r.type].call({parser:this},r);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(r.type)){i+=l||"";continue}}switch(a.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{const r=a;i+=this.renderer.heading(this.parseInline(r.tokens),r.depth,zv(this.parseInline(r.tokens,this.textRenderer)));continue}case"code":{const r=a;i+=this.renderer.code(r.text,r.lang,!!r.escaped);continue}case"table":{const r=a;let l="",c="";for(let u=0;u<r.header.length;u++)c+=this.renderer.tablecell(this.parseInline(r.header[u].tokens),{header:!0,align:r.align[u]});l+=this.renderer.tablerow(c);let h="";for(let u=0;u<r.rows.length;u++){const m=r.rows[u];c="";for(let p=0;p<m.length;p++)c+=this.renderer.tablecell(this.parseInline(m[p].tokens),{header:!1,align:r.align[p]});h+=this.renderer.tablerow(c)}i+=this.renderer.table(l,h);continue}case"blockquote":{const r=a,l=this.parse(r.tokens);i+=this.renderer.blockquote(l);continue}case"list":{const r=a,l=r.ordered,c=r.start,h=r.loose;let u="";for(let m=0;m<r.items.length;m++){const p=r.items[m],x=p.checked,v=p.task;let b="";if(p.task){const _=this.renderer.checkbox(!!x);h?p.tokens.length>0&&p.tokens[0].type==="paragraph"?(p.tokens[0].text=_+" "+p.tokens[0].text,p.tokens[0].tokens&&p.tokens[0].tokens.length>0&&p.tokens[0].tokens[0].type==="text"&&(p.tokens[0].tokens[0].text=_+" "+p.tokens[0].tokens[0].text)):p.tokens.unshift({type:"text",text:_+" "}):b+=_+" "}b+=this.parse(p.tokens,h),u+=this.renderer.listitem(b,v,!!x)}i+=this.renderer.list(u,l,c);continue}case"html":{const r=a;i+=this.renderer.html(r.text,r.block);continue}case"paragraph":{const r=a;i+=this.renderer.paragraph(this.parseInline(r.tokens));continue}case"text":{let r=a,l=r.tokens?this.parseInline(r.tokens):r.text;for(;n+1<e.length&&e[n+1].type==="text";)r=e[++n],l+=`
`+(r.tokens?this.parseInline(r.tokens):r.text);i+=t?this.renderer.paragraph(l):l;continue}default:{const r='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return i}parseInline(e,t){t=t||this.renderer;let i="";for(let n=0;n<e.length;n++){const a=e[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]){const r=this.options.extensions.renderers[a.type].call({parser:this},a);if(r!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){i+=r||"";continue}}switch(a.type){case"escape":{const r=a;i+=t.text(r.text);break}case"html":{const r=a;i+=t.html(r.text);break}case"link":{const r=a;i+=t.link(r.href,r.title,this.parseInline(r.tokens,t));break}case"image":{const r=a;i+=t.image(r.href,r.title,r.text);break}case"strong":{const r=a;i+=t.strong(this.parseInline(r.tokens,t));break}case"em":{const r=a;i+=t.em(this.parseInline(r.tokens,t));break}case"codespan":{const r=a;i+=t.codespan(r.text);break}case"br":{i+=t.br();break}case"del":{const r=a;i+=t.del(this.parseInline(r.tokens,t));break}case"text":{const r=a;i+=t.text(r.text);break}default:{const r='Token with "'+a.type+'" type was not found.';if(this.options.silent)return console.error(r),"";throw new Error(r)}}}return i}}class ji{constructor(e){D(this,"options");this.options=e||_s}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}}D(ji,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var xs,xr,Rh;class p_{constructor(...e){Tl(this,xs);D(this,"defaults",Br());D(this,"options",this.setOptions);D(this,"parse",rn(this,xs,xr).call(this,yt.lex,vt.parse));D(this,"parseInline",rn(this,xs,xr).call(this,yt.lexInline,vt.parseInline));D(this,"Parser",vt);D(this,"Renderer",Kn);D(this,"TextRenderer",Kr);D(this,"Lexer",yt);D(this,"Tokenizer",Vn);D(this,"Hooks",ji);this.use(...e)}walkTokens(e,t){var n,a;let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const l=r;for(const c of l.header)i=i.concat(this.walkTokens(c.tokens,t));for(const c of l.rows)for(const h of c)i=i.concat(this.walkTokens(h.tokens,t));break}case"list":{const l=r;i=i.concat(this.walkTokens(l.items,t));break}default:{const l=r;(a=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&a[l.type]?this.defaults.extensions.childTokens[l.type].forEach(c=>{const h=l[c].flat(1/0);i=i.concat(this.walkTokens(h,t))}):l.tokens&&(i=i.concat(this.walkTokens(l.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const n={...i};if(n.async=this.defaults.async||n.async||!1,i.extensions&&(i.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const r=t.renderers[a.name];r?t.renderers[a.name]=function(...l){let c=a.renderer.apply(this,l);return c===!1&&(c=r.apply(this,l)),c}:t.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const r=t[a.level];r?r.unshift(a.tokenizer):t[a.level]=[a.tokenizer],a.start&&(a.level==="block"?t.startBlock?t.startBlock.push(a.start):t.startBlock=[a.start]:a.level==="inline"&&(t.startInline?t.startInline.push(a.start):t.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(t.childTokens[a.name]=a.childTokens)}),n.extensions=t),i.renderer){const a=this.defaults.renderer||new Kn(this.defaults);for(const r in i.renderer){if(!(r in a))throw new Error(`renderer '${r}' does not exist`);if(r==="options")continue;const l=r,c=i.renderer[l],h=a[l];a[l]=(...u)=>{let m=c.apply(a,u);return m===!1&&(m=h.apply(a,u)),m||""}}n.renderer=a}if(i.tokenizer){const a=this.defaults.tokenizer||new Vn(this.defaults);for(const r in i.tokenizer){if(!(r in a))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;const l=r,c=i.tokenizer[l],h=a[l];a[l]=(...u)=>{let m=c.apply(a,u);return m===!1&&(m=h.apply(a,u)),m}}n.tokenizer=a}if(i.hooks){const a=this.defaults.hooks||new ji;for(const r in i.hooks){if(!(r in a))throw new Error(`hook '${r}' does not exist`);if(r==="options")continue;const l=r,c=i.hooks[l],h=a[l];ji.passThroughHooks.has(r)?a[l]=u=>{if(this.defaults.async)return Promise.resolve(c.call(a,u)).then(p=>h.call(a,p));const m=c.call(a,u);return h.call(a,m)}:a[l]=(...u)=>{let m=c.apply(a,u);return m===!1&&(m=h.apply(a,u)),m}}n.hooks=a}if(i.walkTokens){const a=this.defaults.walkTokens,r=i.walkTokens;n.walkTokens=function(l){let c=[];return c.push(r.call(this,l)),a&&(c=c.concat(a.call(this,l))),c}}this.defaults={...this.defaults,...n}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return yt.lex(e,t??this.defaults)}parser(e,t){return vt.parse(e,t??this.defaults)}}xs=new WeakSet,xr=function(e,t){return(i,n)=>{const a={...n},r={...this.defaults,...a};this.defaults.async===!0&&a.async===!1&&(r.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),r.async=!0);const l=rn(this,xs,Rh).call(this,!!r.silent,!!r.async);if(typeof i>"u"||i===null)return l(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return l(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(r.hooks&&(r.hooks.options=r),r.async)return Promise.resolve(r.hooks?r.hooks.preprocess(i):i).then(c=>e(c,r)).then(c=>r.hooks?r.hooks.processAllTokens(c):c).then(c=>r.walkTokens?Promise.all(this.walkTokens(c,r.walkTokens)).then(()=>c):c).then(c=>t(c,r)).then(c=>r.hooks?r.hooks.postprocess(c):c).catch(l);try{r.hooks&&(i=r.hooks.preprocess(i));let c=e(i,r);r.hooks&&(c=r.hooks.processAllTokens(c)),r.walkTokens&&this.walkTokens(c,r.walkTokens);let h=t(c,r);return r.hooks&&(h=r.hooks.postprocess(h)),h}catch(c){return l(c)}}},Rh=function(e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const n="<p>An error occurred:</p><pre>"+Qe(i.message+"",!0)+"</pre>";return t?Promise.resolve(n):n}if(t)return Promise.reject(i);throw i}};const gs=new p_;function de(s,e){return gs.parse(s,e)}de.options=de.setOptions=function(s){return gs.setOptions(s),de.defaults=gs.defaults,jh(de.defaults),de};de.getDefaults=Br;de.defaults=_s;de.use=function(...s){return gs.use(...s),de.defaults=gs.defaults,jh(de.defaults),de};de.walkTokens=function(s,e){return gs.walkTokens(s,e)};de.parseInline=gs.parseInline;de.Parser=vt;de.parser=vt.parse;de.Renderer=Kn;de.TextRenderer=Kr;de.Lexer=yt;de.lexer=yt.lex;de.Tokenizer=Vn;de.Hooks=ji;de.parse=de;de.options;de.setOptions;de.use;de.walkTokens;de.parseInline;vt.parse;yt.lex;function g_(s){const e=[];return["title","slug","author","date","category","tags","excerpt"].forEach(i=>{(s[i]===void 0||s[i]===null||Array.isArray(s[i])&&s[i].length===0||s[i]==="")&&e.push(`Missing required field: ${i}`)}),s.slug&&!/^[a-z0-9-]+$/.test(s.slug)&&e.push(`Invalid slug format: ${s.slug}`),s.date&&(isNaN(Date.parse(s.date))||!/^\d{4}-\d{2}-\d{2}(T\d{2}:\d{2}:\d{2}(\.\d{3})?Z?)?$/.test(s.date))&&e.push(`Invalid date format (expected ISO 8601): ${s.date}`),s.excerpt&&s.excerpt.length>300&&e.push("Excerpt too long (>300 chars)"),e}function x_(s){const t=s.replace(/`[^`]*`/g," ").replace(/[^A-Za-z0-9\s]/g," ").split(/\s+/).filter(Boolean).length,i=Math.max(1,Math.ceil(t/200));return{wordCount:t,readingTime:i}}function b_(s){const e=/^---\s*\n([\s\S]*?)\n---\s*\n([\s\S]*)$/,t=s.match(e);if(!t)return{content:s,data:{}};const[,i,n]=t,a={};return i.split(`
`).forEach(r=>{const l=r.trim();if(!l||l.startsWith("#"))return;const c=l.indexOf(":");if(c===-1)return;const h=l.slice(0,c).trim();let u=l.slice(c+1).trim();if((u.startsWith('"')&&u.endsWith('"')||u.startsWith("'")&&u.endsWith("'"))&&(u=u.slice(1,-1)),u.startsWith("[")&&u.endsWith("]")){const m=u.slice(1,-1);a[h]=m.split(",").map(p=>p.trim().replace(/^["']|["']$/g,"")).filter(Boolean)}else a[h]=u}),{content:n.trim(),data:a}}const y_=Object.assign({"./blog/2024/hmrc-reporting-requirements.md":()=>$e(()=>import("./hmrc-reporting-requirements-lU4HqUMG.js"),[],import.meta.url).then(s=>s.default),"./blog/2024/tax-efficient-investment-strategies.md":()=>$e(()=>import("./tax-efficient-investment-strategies-DNQaJq8Y.js"),[],import.meta.url).then(s=>s.default),"./blog/2024/understanding-uk-capital-gains-tax.md":()=>$e(()=>import("./understanding-uk-capital-gains-tax-Cyo6ytRG.js"),[],import.meta.url).then(s=>s.default),"./blog/2024/using-interactive-brokers-data.md":()=>$e(()=>import("./using-interactive-brokers-data-D5h70NGR.js"),[],import.meta.url).then(s=>s.default),"./blog/2025/beginners-guide-to-technical-analysis.md":()=>$e(()=>import("./beginners-guide-to-technical-analysis-CpYIUNBT.js"),[],import.meta.url).then(s=>s.default),"./blog/2025/diversification-vs-concentration-strategy.md":()=>$e(()=>import("./diversification-vs-concentration-strategy-ASGj5IKK.js"),[],import.meta.url).then(s=>s.default),"./blog/2025/fundamental-vs-technical-analysis.md":()=>$e(()=>import("./fundamental-vs-technical-analysis-DhpKvnYs.js"),[],import.meta.url).then(s=>s.default),"./blog/2025/how-to-keep-a-trading-journal.md":()=>$e(()=>import("./how-to-keep-a-trading-journal-AwUZPstZ.js"),[],import.meta.url).then(s=>s.default),"./blog/2025/mastering-emotional-discipline-trading.md":()=>$e(()=>import("./mastering-emotional-discipline-trading-DlXoXxmI.js"),[],import.meta.url).then(s=>s.default),"./blog/2025/risk-management-fundamentals.md":()=>$e(()=>import("./risk-management-fundamentals-DzetqPgl.js"),[],import.meta.url).then(s=>s.default),"./blog/2025/tax-loss-harvesting-strategy.md":()=>$e(()=>import("./tax-loss-harvesting-strategy-DWsykOlC.js"),[],import.meta.url).then(s=>s.default),"./blog/2025/the-dangers-of-leverage-and-margin.md":()=>$e(()=>import("./the-dangers-of-leverage-and-margin-Cbz9xi3o.js"),[],import.meta.url).then(s=>s.default),"./blog/2025/the-psychology-of-a-winning-trader.md":()=>$e(()=>import("./the-psychology-of-a-winning-trader-uQM59xZc.js"),[],import.meta.url).then(s=>s.default),"./blog/2025/the-ultimate-guide-to-building-a-robust-trading-plan.md":()=>$e(()=>import("./the-ultimate-guide-to-building-a-robust-trading-plan-BfT6WKbu.js"),[],import.meta.url).then(s=>s.default),"./blog/2025/understanding-market-cycles.md":()=>$e(()=>import("./understanding-market-cycles-CTSLSL8u.js"),[],import.meta.url).then(s=>s.default)});let er=null;function v_(s,e){const{content:t,data:i}=b_(s),n=i,a=g_(n);if(a.length)throw new Error(`Frontmatter validation failed for ${e}:
 - ${a.join(`
 - `)}`);const{wordCount:r,readingTime:l}=x_(t),c=de.parse(t);return{title:n.title,slug:n.slug,author:n.author,date:n.date,category:n.category,tags:n.tags,excerpt:n.excerpt,readingTime:n.readingTime??l,content:c,wordCount:r}}async function __(s=!1){if(er&&!s)return er;const e=Object.entries(y_);e.length===0&&console.warn("[BlogLoader] No markdown modules discovered by import.meta.glob.");const t=[];for(const[i,n]of e)try{const a=await n(),r=v_(a,i);t.push(r)}catch(a){throw console.error("[BlogLoader] Error processing",i,":",a),a}return t.sort((i,n)=>new Date(n.date).getTime()-new Date(i.date).getTime()),er=t,t}const sd={1:"understanding-uk-capital-gains-tax",2:"hmrc-reporting-requirements",3:"using-interactive-brokers-data",4:"tax-efficient-investment-strategies"},w_=()=>{const[s,e]=S.useState([]),[t,i]=S.useState(!0),[n,a]=S.useState(null),[r,l]=S.useState(null),c=S.useRef(!1),h=r&&s.find(b=>b.id===r)||null,u=S.useCallback(b=>{const _=[...b.tags||[],b.category,...b.title.toLowerCase().includes("tax")?["tax"]:[],...b.title.toLowerCase().includes("trading")?["trading"]:[],...b.title.toLowerCase().includes("investment")?["investing"]:[],...b.title.toLowerCase().includes("capital gains")?["tax"]:[]].filter(Boolean);return Md(_.join(" ")).slice(0,3)},[]);S.useEffect(()=>{let b=!1;return(async()=>{try{i(!0);const _=await __();if(!b){const w=_.map(j=>({id:j.slug,title:j.title,content:j.content,excerpt:j.excerpt,author:j.author,publishedDate:j.date,tags:j.tags,category:j.category,readingTime:j.readingTime}));e(w)}}catch(_){b||a((_==null?void 0:_.message)||"Failed to load blog posts")}finally{b||i(!1)}})(),()=>{b=!0}},[]);const m=S.useCallback(()=>{if(typeof window>"u")return;const b=window.location.hash,_=b.startsWith("#")?b.substring(1):b;if(_==="blog"){l(null);return}if(_.startsWith("blog/")){const w=_.split("/");let j="";if(w.length===2?j=w[1]:w.length===3&&w[1]==="post"&&(j=w[2]),j){if(/^\d+$/.test(j)&&sd[j]){const C=sd[j];if(!c.current){c.current=!0,window.location.replace(`#blog/post/${C}`);return}}l(j);return}}l(null)},[]);S.useEffect(()=>{m();const b=()=>m();return window.addEventListener("hashchange",b),()=>window.removeEventListener("hashchange",b)},[m]);const p=b=>{typeof window<"u"&&(window.location.hash=`blog/post/${b}`)},x=b=>{p(b.id)},v=()=>{typeof window<"u"&&(window.location.hash="blog")};return o.jsx("div",{className:"container-fluid py-4",children:o.jsx("div",{className:"row justify-content-center",children:o.jsxs("div",{className:"col-12 col-xl-10",children:[!h&&o.jsxs("div",{className:"mb-4",children:[o.jsx("h1",{className:"h2 text-primary mb-2",children:"Tax Calculator Blog"}),o.jsx("p",{className:"text-muted lead",children:"Expert insights, guides, and updates on UK tax calculations for stocks and shares."})]}),t&&o.jsx("div",{className:"text-center py-5",children:o.jsx("div",{className:"spinner-border text-primary",role:"status",children:o.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!t&&n&&o.jsx("div",{className:"alert alert-danger",role:"alert",children:n}),!t&&!n&&h?o.jsxs("div",{className:"blog-post-detail",children:[o.jsxs("div",{className:"d-flex align-items-center mb-3",children:[o.jsxs("button",{className:"btn btn-sm btn-outline-secondary me-3",onClick:v,children:[o.jsx("i",{className:"bi bi-arrow-left me-1"})," Back to all posts"]}),o.jsxs("span",{className:"text-muted small",children:["Post ",s.findIndex(b=>b.id===h.id)+1," of ",s.length]})]}),o.jsx(wh,{post:h}),o.jsx("div",{className:"mt-5 mb-4",children:o.jsxs("div",{className:"border-top pt-4",children:[o.jsx("h4",{className:"h5 mb-3",children:"ðŸ“š Related Resources"}),o.jsx("p",{className:"text-muted mb-3",children:"Deepen your understanding with these expert-recommended books"}),o.jsx(Dt,{products:u(h),columns:{xs:1,sm:2,md:3},showRatings:!0,showCategories:!0,layout:"vertical",emptyStateMessage:"No related books found for this topic"})]})}),o.jsxs("div",{className:"mt-4 d-flex justify-content-between",children:[o.jsxs("button",{className:"btn btn-outline-primary btn-sm",disabled:s.length===0||h.id===s[0].id,onClick:()=>{const b=s.findIndex(_=>_.id===h.id);b>0&&p(s[b-1].id)},children:[o.jsx("i",{className:"bi bi-chevron-left me-1"})," Previous"]}),o.jsxs("button",{className:"btn btn-outline-primary btn-sm",disabled:s.length===0||h.id===s[s.length-1].id,onClick:()=>{const b=s.findIndex(_=>_.id===h.id);b<s.length-1&&p(s[b+1].id)},children:["Next ",o.jsx("i",{className:"bi bi-chevron-right ms-1"})]})]})]}):null,!t&&!n&&!h&&o.jsx(Pv,{posts:s,onPostClick:x,className:"blog-page-index"})]})})})},j_=()=>{const[s,e]=S.useState("all"),[t,i]=S.useState(""),[n,a]=S.useState("vertical"),r=Kt(),l=Ad();return o.jsx("div",{className:"container my-5",children:o.jsx("div",{className:"row",children:o.jsxs("div",{className:"col-12",children:[o.jsxs("div",{className:"text-center mb-5",children:[o.jsx("h1",{className:"display-4 mb-3",children:"Affiliate Components Demo"}),o.jsx("p",{className:"lead text-muted",children:"Comprehensive Amazon affiliate marketing system for tax and trading books"}),o.jsx(Tn,{style:"banner"})]}),o.jsxs("div",{className:"card mb-4",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h5",{className:"card-title mb-0",children:[o.jsx("i",{className:"bi bi-gear me-2"}),"Demo Controls"]})}),o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"row g-3",children:[o.jsxs("div",{className:"col-md-4",children:[o.jsx("label",{htmlFor:"categorySelect",className:"form-label",children:"Category Filter"}),o.jsxs("select",{id:"categorySelect",className:"form-select",value:s,onChange:c=>e(c.target.value),children:[o.jsx("option",{value:"all",children:"All Categories"}),o.jsx("option",{value:"tax",children:"Tax Guides"}),o.jsx("option",{value:"trading",children:"Trading Psychology"}),o.jsx("option",{value:"finance",children:"Finance & Investment"}),o.jsx("option",{value:"business",children:"Business & Entrepreneurship"})]})]}),o.jsxs("div",{className:"col-md-4",children:[o.jsx("label",{htmlFor:"searchInput",className:"form-label",children:"Search Products"}),o.jsx("input",{id:"searchInput",type:"text",className:"form-control",placeholder:"Search by title, author, or tags...",value:t,onChange:c=>i(c.target.value)})]}),o.jsxs("div",{className:"col-md-4",children:[o.jsx("label",{htmlFor:"layoutSelect",className:"form-label",children:"Card Layout"}),o.jsxs("select",{id:"layoutSelect",className:"form-select",value:n,onChange:c=>a(c.target.value),children:[o.jsx("option",{value:"vertical",children:"Vertical Cards"}),o.jsx("option",{value:"horizontal",children:"Horizontal Cards"})]})]})]})})]}),o.jsxs("div",{className:"row mb-5",children:[o.jsx("div",{className:"col-lg-6 mb-4",children:o.jsxs("div",{className:"card h-100",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h5",{className:"card-title mb-0",children:[o.jsx("i",{className:"bi bi-link-45deg me-2"}),"AffiliateLink Component"]})}),o.jsxs("div",{className:"card-body",children:[o.jsx("p",{className:"text-muted",children:"Simple affiliate links with tracking and FTC compliance:"}),o.jsxs("div",{className:"d-flex flex-column gap-2",children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Default Link:"}),o.jsx("br",{}),o.jsx(gi,{product:r[0]})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Button Style:"}),o.jsx("br",{}),o.jsxs(gi,{product:r[0],className:"btn btn-primary",children:[o.jsx("i",{className:"bi bi-cart3 me-2"}),"Buy on Amazon"]})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"No Disclosure:"}),o.jsx("br",{}),o.jsx(gi,{product:r[0],showDisclosure:!1,className:"btn btn-outline-success btn-sm",children:"View Details"})]})]})]})]})}),o.jsx("div",{className:"col-lg-6 mb-4",children:o.jsxs("div",{className:"card h-100",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h5",{className:"card-title mb-0",children:[o.jsx("i",{className:"bi bi-card-text me-2"}),"AffiliateCard Component"]})}),o.jsxs("div",{className:"card-body",children:[o.jsx("p",{className:"text-muted",children:"Rich product cards with images and details:"}),l.length>0&&o.jsx(Ed,{product:l[0],layout:"horizontal",imageHeight:120,compact:!0})]})]})})]}),l.length>0&&o.jsxs("section",{className:"mb-5",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[o.jsxs("h2",{className:"h3 mb-0",children:[o.jsx("i",{className:"bi bi-star-fill text-warning me-2"}),"Featured Products"]}),o.jsxs("span",{className:"badge bg-primary",children:[l.length," products"]})]}),o.jsx(Dt,{products:l,columns:{xs:1,sm:2,md:2,lg:3,xl:4},layout:"vertical",showRatings:!0,showCategories:!0})]}),o.jsxs("section",{className:"mb-5",children:[o.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[o.jsxs("h2",{className:"h3 mb-0",children:[o.jsx("i",{className:"bi bi-grid-3x3-gap me-2"}),"Product Catalog"]}),o.jsxs("span",{className:"badge bg-secondary",children:[r.length," total products"]})]}),o.jsx(Dt,{category:s!=="all"?s:void 0,searchQuery:t,layout:n,columns:{xs:1,sm:2,md:2,lg:3,xl:4},showRatings:!0,showCategories:!0,sortBy:"featured",emptyStateMessage:"No products match your search criteria"})]}),o.jsxs("section",{className:"mb-5",children:[o.jsxs("h2",{className:"h3 mb-4",children:[o.jsx("i",{className:"bi bi-tags me-2"}),"Categories Overview"]}),o.jsx("div",{className:"row g-4",children:["tax","trading","finance","business"].map(c=>{const h=Td(c);return o.jsx("div",{className:"col-lg-6",children:o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h5",{className:"card-title mb-0 text-capitalize",children:[c," (",h.length,")"]})}),o.jsx("div",{className:"card-body",children:h.length>0?o.jsx(Dt,{products:h.slice(0,2),columns:{xs:1,sm:2},layout:"horizontal",showCategories:!1,showRatings:!0}):o.jsx("p",{className:"text-muted text-center py-3",children:"No products in this category yet."})})]})},c)})})]}),o.jsxs("section",{className:"mb-5",children:[o.jsxs("h2",{className:"h3 mb-4",children:[o.jsx("i",{className:"bi bi-shield-check me-2"}),"Disclosure Styles"]}),o.jsxs("div",{className:"row g-4",children:[o.jsxs("div",{className:"col-md-4",children:[o.jsx("h6",{children:"Inline Style"}),o.jsxs("p",{children:["Check out this amazing book",o.jsx(Tn,{style:"inline"})]})]}),o.jsxs("div",{className:"col-md-8",children:[o.jsx("h6",{children:"Footer Style"}),o.jsx(Tn,{style:"footer"})]})]})]}),o.jsx("section",{className:"mb-5",children:o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h5",{className:"card-title mb-0",children:[o.jsx("i",{className:"bi bi-graph-up me-2"}),"System Statistics"]})}),o.jsx("div",{className:"card-body",children:o.jsxs("div",{className:"row text-center",children:[o.jsxs("div",{className:"col-md-3",children:[o.jsx("div",{className:"h4 text-primary",children:r.length}),o.jsx("small",{className:"text-muted",children:"Total Products"})]}),o.jsxs("div",{className:"col-md-3",children:[o.jsx("div",{className:"h4 text-success",children:l.length}),o.jsx("small",{className:"text-muted",children:"Featured Products"})]}),o.jsxs("div",{className:"col-md-3",children:[o.jsx("div",{className:"h4 text-info",children:Array.from(new Set(r.map(c=>c.category))).length}),o.jsx("small",{className:"text-muted",children:"Categories"})]}),o.jsxs("div",{className:"col-md-3",children:[o.jsx("div",{className:"h4 text-warning",children:(r.reduce((c,h)=>c+(h.rating||0),0)/r.length).toFixed(1)}),o.jsx("small",{className:"text-muted",children:"Avg Rating"})]})]})})]})}),o.jsx("section",{className:"mb-5",children:o.jsxs("div",{className:"card",children:[o.jsx("div",{className:"card-header",children:o.jsxs("h5",{className:"card-title mb-0",children:[o.jsx("i",{className:"bi bi-code-square me-2"}),"Quick Implementation Guide"]})}),o.jsxs("div",{className:"card-body",children:[o.jsx("h6",{children:"1. Import Components"}),o.jsx("pre",{className:"bg-light p-3 rounded",children:`import {
  AffiliateLink,
  AffiliateCard,
  AffiliateGrid,
  AffiliateDisclosure
} from './components/affiliate';`}),o.jsx("h6",{children:"2. Basic Usage"}),o.jsx("pre",{className:"bg-light p-3 rounded",children:`// Simple affiliate link
<AffiliateLink product={product} />

// Product grid
<AffiliateGrid category="tax" limit={6} />

// FTC disclosure
<AffiliateDisclosure style="banner" />`}),o.jsx("h6",{children:"3. Add to Your Pages"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Tax Calculator: Show tax guide books"}),o.jsx("li",{children:"Trading Tools: Display trading psychology books"}),o.jsx("li",{children:"Blog Posts: Relevant book recommendations"}),o.jsx("li",{children:"Footer: Legal disclosures"})]})]})]})})]})})})},k_=()=>(console.log("[SPA] App component rendering with HashRouter..."),o.jsx(kp,{children:o.jsx($p,{position:"top-end",children:o.jsx(Op,{children:o.jsx("div",{className:"min-vh-100 bg-light",children:o.jsx(Vp,{children:o.jsxs(tp,{children:[o.jsx(St,{path:"/",element:o.jsx(Gp,{})}),o.jsx(St,{path:"/calculator",element:o.jsx(Qp,{})}),o.jsx(St,{path:"/results",element:o.jsx(Tv,{})}),o.jsx(St,{path:"/about",element:o.jsx(Av,{})}),o.jsx(St,{path:"/help",element:o.jsx(Mv,{})}),o.jsx(St,{path:"/guide",element:o.jsx(Ev,{})}),o.jsx(St,{path:"/blog/*",element:o.jsx(w_,{})}),o.jsx(St,{path:"/affiliate-demo",element:o.jsx(j_,{})})]})})})})})}));var N_={exports:{}};/*!
  * Bootstrap v5.3.8 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(s,e){(function(t,i){s.exports=i()})(am,function(){const t=new Map,i={set(g,d,f){t.has(g)||t.set(g,new Map);const y=t.get(g);y.has(d)||y.size===0?y.set(d,f):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(y.keys())[0]}.`)},get:(g,d)=>t.has(g)&&t.get(g).get(d)||null,remove(g,d){if(!t.has(g))return;const f=t.get(g);f.delete(d),f.size===0&&t.delete(g)}},n="transitionend",a=g=>(g&&window.CSS&&window.CSS.escape&&(g=g.replace(/#([^\s"#']+)/g,(d,f)=>`#${CSS.escape(f)}`)),g),r=g=>g==null?`${g}`:Object.prototype.toString.call(g).match(/\s([a-z]+)/i)[1].toLowerCase(),l=g=>{g.dispatchEvent(new Event(n))},c=g=>!(!g||typeof g!="object")&&(g.jquery!==void 0&&(g=g[0]),g.nodeType!==void 0),h=g=>c(g)?g.jquery?g[0]:g:typeof g=="string"&&g.length>0?document.querySelector(a(g)):null,u=g=>{if(!c(g)||g.getClientRects().length===0)return!1;const d=getComputedStyle(g).getPropertyValue("visibility")==="visible",f=g.closest("details:not([open])");if(!f)return d;if(f!==g){const y=g.closest("summary");if(y&&y.parentNode!==f||y===null)return!1}return d},m=g=>!g||g.nodeType!==Node.ELEMENT_NODE||!!g.classList.contains("disabled")||(g.disabled!==void 0?g.disabled:g.hasAttribute("disabled")&&g.getAttribute("disabled")!=="false"),p=g=>{if(!document.documentElement.attachShadow)return null;if(typeof g.getRootNode=="function"){const d=g.getRootNode();return d instanceof ShadowRoot?d:null}return g instanceof ShadowRoot?g:g.parentNode?p(g.parentNode):null},x=()=>{},v=g=>{g.offsetHeight},b=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,_=[],w=()=>document.documentElement.dir==="rtl",j=g=>{var d;d=()=>{const f=b();if(f){const y=g.NAME,k=f.fn[y];f.fn[y]=g.jQueryInterface,f.fn[y].Constructor=g,f.fn[y].noConflict=()=>(f.fn[y]=k,g.jQueryInterface)}},document.readyState==="loading"?(_.length||document.addEventListener("DOMContentLoaded",()=>{for(const f of _)f()}),_.push(d)):d()},C=(g,d=[],f=g)=>typeof g=="function"?g.call(...d):f,P=(g,d,f=!0)=>{if(!f)return void C(g);const y=(T=>{if(!T)return 0;let{transitionDuration:E,transitionDelay:R}=window.getComputedStyle(T);const I=Number.parseFloat(E),z=Number.parseFloat(R);return I||z?(E=E.split(",")[0],R=R.split(",")[0],1e3*(Number.parseFloat(E)+Number.parseFloat(R))):0})(d)+5;let k=!1;const N=({target:T})=>{T===d&&(k=!0,d.removeEventListener(n,N),C(g))};d.addEventListener(n,N),setTimeout(()=>{k||l(d)},y)},A=(g,d,f,y)=>{const k=g.length;let N=g.indexOf(d);return N===-1?!f&&y?g[k-1]:g[0]:(N+=f?1:-1,y&&(N=(N+k)%k),g[Math.max(0,Math.min(N,k-1))])},O=/[^.]*(?=\..*)\.|.*/,B=/\..*/,F=/::\d+$/,$={};let H=1;const Y={mouseenter:"mouseover",mouseleave:"mouseout"},Z=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function ye(g,d){return d&&`${d}::${H++}`||g.uidEvent||H++}function Te(g){const d=ye(g);return g.uidEvent=d,$[d]=$[d]||{},$[d]}function se(g,d,f=null){return Object.values(g).find(y=>y.callable===d&&y.delegationSelector===f)}function ae(g,d,f){const y=typeof d=="string",k=y?f:d||f;let N=q(g);return Z.has(N)||(N=g),[y,k,N]}function me(g,d,f,y,k){if(typeof d!="string"||!g)return;let[N,T,E]=ae(d,f,y);d in Y&&(T=(K=>function(V){if(!V.relatedTarget||V.relatedTarget!==V.delegateTarget&&!V.delegateTarget.contains(V.relatedTarget))return K.call(this,V)})(T));const R=Te(g),I=R[E]||(R[E]={}),z=se(I,T,N?f:null);if(z)return void(z.oneOff=z.oneOff&&k);const L=ye(T,d.replace(O,"")),X=N?function(U,K,V){return function G(he){const xe=U.querySelectorAll(K);for(let{target:ee}=he;ee&&ee!==this;ee=ee.parentNode)for(const ne of xe)if(ne===ee)return Le(he,{delegateTarget:ee}),G.oneOff&&M.off(U,he.type,K,V),V.apply(ee,[he])}}(g,f,T):function(U,K){return function V(G){return Le(G,{delegateTarget:U}),V.oneOff&&M.off(U,G.type,K),K.apply(U,[G])}}(g,T);X.delegationSelector=N?f:null,X.callable=T,X.oneOff=k,X.uidEvent=L,I[L]=X,g.addEventListener(E,X,N)}function Me(g,d,f,y,k){const N=se(d[f],y,k);N&&(g.removeEventListener(f,N,!!k),delete d[f][N.uidEvent])}function Ne(g,d,f,y){const k=d[f]||{};for(const[N,T]of Object.entries(k))N.includes(y)&&Me(g,d,f,T.callable,T.delegationSelector)}function q(g){return g=g.replace(B,""),Y[g]||g}const M={on(g,d,f,y){me(g,d,f,y,!1)},one(g,d,f,y){me(g,d,f,y,!0)},off(g,d,f,y){if(typeof d!="string"||!g)return;const[k,N,T]=ae(d,f,y),E=T!==d,R=Te(g),I=R[T]||{},z=d.startsWith(".");if(N===void 0){if(z)for(const L of Object.keys(R))Ne(g,R,L,d.slice(1));for(const[L,X]of Object.entries(I)){const U=L.replace(F,"");E&&!d.includes(U)||Me(g,R,T,X.callable,X.delegationSelector)}}else{if(!Object.keys(I).length)return;Me(g,R,T,N,k?f:null)}},trigger(g,d,f){if(typeof d!="string"||!g)return null;const y=b();let k=null,N=!0,T=!0,E=!1;d!==q(d)&&y&&(k=y.Event(d,f),y(g).trigger(k),N=!k.isPropagationStopped(),T=!k.isImmediatePropagationStopped(),E=k.isDefaultPrevented());const R=Le(new Event(d,{bubbles:N,cancelable:!0}),f);return E&&R.preventDefault(),T&&g.dispatchEvent(R),R.defaultPrevented&&k&&k.preventDefault(),R}};function Le(g,d={}){for(const[f,y]of Object.entries(d))try{g[f]=y}catch{Object.defineProperty(g,f,{configurable:!0,get:()=>y})}return g}function Pe(g){if(g==="true")return!0;if(g==="false")return!1;if(g===Number(g).toString())return Number(g);if(g===""||g==="null")return null;if(typeof g!="string")return g;try{return JSON.parse(decodeURIComponent(g))}catch{return g}}function He(g){return g.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)}const Ee={setDataAttribute(g,d,f){g.setAttribute(`data-bs-${He(d)}`,f)},removeDataAttribute(g,d){g.removeAttribute(`data-bs-${He(d)}`)},getDataAttributes(g){if(!g)return{};const d={},f=Object.keys(g.dataset).filter(y=>y.startsWith("bs")&&!y.startsWith("bsConfig"));for(const y of f){let k=y.replace(/^bs/,"");k=k.charAt(0).toLowerCase()+k.slice(1),d[k]=Pe(g.dataset[y])}return d},getDataAttribute:(g,d)=>Pe(g.getAttribute(`data-bs-${He(d)}`))};class Ye{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(d){return d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d}_mergeConfigObj(d,f){const y=c(f)?Ee.getDataAttribute(f,"config"):{};return{...this.constructor.Default,...typeof y=="object"?y:{},...c(f)?Ee.getDataAttributes(f):{},...typeof d=="object"?d:{}}}_typeCheckConfig(d,f=this.constructor.DefaultType){for(const[y,k]of Object.entries(f)){const N=d[y],T=c(N)?"element":r(N);if(!new RegExp(k).test(T))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${y}" provided type "${T}" but expected type "${k}".`)}}}class ot extends Ye{constructor(d,f){super(),(d=h(d))&&(this._element=d,this._config=this._getConfig(f),i.set(this._element,this.constructor.DATA_KEY,this))}dispose(){i.remove(this._element,this.constructor.DATA_KEY),M.off(this._element,this.constructor.EVENT_KEY);for(const d of Object.getOwnPropertyNames(this))this[d]=null}_queueCallback(d,f,y=!0){P(d,f,y)}_getConfig(d){return d=this._mergeConfigObj(d,this._element),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}static getInstance(d){return i.get(h(d),this.DATA_KEY)}static getOrCreateInstance(d,f={}){return this.getInstance(d)||new this(d,typeof f=="object"?f:null)}static get VERSION(){return"5.3.8"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(d){return`${d}${this.EVENT_KEY}`}}const ia=g=>{let d=g.getAttribute("data-bs-target");if(!d||d==="#"){let f=g.getAttribute("href");if(!f||!f.includes("#")&&!f.startsWith("."))return null;f.includes("#")&&!f.startsWith("#")&&(f=`#${f.split("#")[1]}`),d=f&&f!=="#"?f.trim():null}return d?d.split(",").map(f=>a(f)).join(","):null},W={find:(g,d=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(d,g)),findOne:(g,d=document.documentElement)=>Element.prototype.querySelector.call(d,g),children:(g,d)=>[].concat(...g.children).filter(f=>f.matches(d)),parents(g,d){const f=[];let y=g.parentNode.closest(d);for(;y;)f.push(y),y=y.parentNode.closest(d);return f},prev(g,d){let f=g.previousElementSibling;for(;f;){if(f.matches(d))return[f];f=f.previousElementSibling}return[]},next(g,d){let f=g.nextElementSibling;for(;f;){if(f.matches(d))return[f];f=f.nextElementSibling}return[]},focusableChildren(g){const d=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(f=>`${f}:not([tabindex^="-"])`).join(",");return this.find(d,g).filter(f=>!m(f)&&u(f))},getSelectorFromElement(g){const d=ia(g);return d&&W.findOne(d)?d:null},getElementFromSelector(g){const d=ia(g);return d?W.findOne(d):null},getMultipleElementsFromSelector(g){const d=ia(g);return d?W.find(d):[]}},Fi=(g,d="hide")=>{const f=`click.dismiss${g.EVENT_KEY}`,y=g.NAME;M.on(document,f,`[data-bs-dismiss="${y}"]`,function(k){if(["A","AREA"].includes(this.tagName)&&k.preventDefault(),m(this))return;const N=W.getElementFromSelector(this)||this.closest(`.${y}`);g.getOrCreateInstance(N)[d]()})},Gr=".bs.alert",Dh=`close${Gr}`,Lh=`closed${Gr}`;class Ks extends ot{static get NAME(){return"alert"}close(){if(M.trigger(this._element,Dh).defaultPrevented)return;this._element.classList.remove("show");const d=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,d)}_destroyElement(){this._element.remove(),M.trigger(this._element,Lh),this.dispose()}static jQueryInterface(d){return this.each(function(){const f=Ks.getOrCreateInstance(this);if(typeof d=="string"){if(f[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);f[d](this)}})}}Fi(Ks,"close"),j(Ks);const qr='[data-bs-toggle="button"]';class Gs extends ot{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(d){return this.each(function(){const f=Gs.getOrCreateInstance(this);d==="toggle"&&f[d]()})}}M.on(document,"click.bs.button.data-api",qr,g=>{g.preventDefault();const d=g.target.closest(qr);Gs.getOrCreateInstance(d).toggle()}),j(Gs);const ws=".bs.swipe",Oh=`touchstart${ws}`,Ih=`touchmove${ws}`,Fh=`touchend${ws}`,zh=`pointerdown${ws}`,$h=`pointerup${ws}`,Bh={endCallback:null,leftCallback:null,rightCallback:null},Hh={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class zi extends Ye{constructor(d,f){super(),this._element=d,d&&zi.isSupported()&&(this._config=this._getConfig(f),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Bh}static get DefaultType(){return Hh}static get NAME(){return"swipe"}dispose(){M.off(this._element,ws)}_start(d){this._supportPointerEvents?this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX):this._deltaX=d.touches[0].clientX}_end(d){this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX-this._deltaX),this._handleSwipe(),C(this._config.endCallback)}_move(d){this._deltaX=d.touches&&d.touches.length>1?0:d.touches[0].clientX-this._deltaX}_handleSwipe(){const d=Math.abs(this._deltaX);if(d<=40)return;const f=d/this._deltaX;this._deltaX=0,f&&C(f>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(M.on(this._element,zh,d=>this._start(d)),M.on(this._element,$h,d=>this._end(d)),this._element.classList.add("pointer-event")):(M.on(this._element,Oh,d=>this._start(d)),M.on(this._element,Ih,d=>this._move(d)),M.on(this._element,Fh,d=>this._end(d)))}_eventIsPointerPenTouch(d){return this._supportPointerEvents&&(d.pointerType==="pen"||d.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const zt=".bs.carousel",Xr=".data-api",Wh="ArrowLeft",Uh="ArrowRight",qs="next",js="prev",ks="left",$i="right",Vh=`slide${zt}`,na=`slid${zt}`,Yh=`keydown${zt}`,Kh=`mouseenter${zt}`,Gh=`mouseleave${zt}`,qh=`dragstart${zt}`,Xh=`load${zt}${Xr}`,Qh=`click${zt}${Xr}`,Qr="carousel",Bi="active",Zr=".active",Jr=".carousel-item",Zh=Zr+Jr,Jh={[Wh]:$i,[Uh]:ks},eu={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},tu={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ns extends ot{constructor(d,f){super(d,f),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=W.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Qr&&this.cycle()}static get Default(){return eu}static get DefaultType(){return tu}static get NAME(){return"carousel"}next(){this._slide(qs)}nextWhenVisible(){!document.hidden&&u(this._element)&&this.next()}prev(){this._slide(js)}pause(){this._isSliding&&l(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?M.one(this._element,na,()=>this.cycle()):this.cycle())}to(d){const f=this._getItems();if(d>f.length-1||d<0)return;if(this._isSliding)return void M.one(this._element,na,()=>this.to(d));const y=this._getItemIndex(this._getActive());if(y===d)return;const k=d>y?qs:js;this._slide(k,f[d])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(d){return d.defaultInterval=d.interval,d}_addEventListeners(){this._config.keyboard&&M.on(this._element,Yh,d=>this._keydown(d)),this._config.pause==="hover"&&(M.on(this._element,Kh,()=>this.pause()),M.on(this._element,Gh,()=>this._maybeEnableCycle())),this._config.touch&&zi.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const f of W.find(".carousel-item img",this._element))M.on(f,qh,y=>y.preventDefault());const d={leftCallback:()=>this._slide(this._directionToOrder(ks)),rightCallback:()=>this._slide(this._directionToOrder($i)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new zi(this._element,d)}_keydown(d){if(/input|textarea/i.test(d.target.tagName))return;const f=Jh[d.key];f&&(d.preventDefault(),this._slide(this._directionToOrder(f)))}_getItemIndex(d){return this._getItems().indexOf(d)}_setActiveIndicatorElement(d){if(!this._indicatorsElement)return;const f=W.findOne(Zr,this._indicatorsElement);f.classList.remove(Bi),f.removeAttribute("aria-current");const y=W.findOne(`[data-bs-slide-to="${d}"]`,this._indicatorsElement);y&&(y.classList.add(Bi),y.setAttribute("aria-current","true"))}_updateInterval(){const d=this._activeElement||this._getActive();if(!d)return;const f=Number.parseInt(d.getAttribute("data-bs-interval"),10);this._config.interval=f||this._config.defaultInterval}_slide(d,f=null){if(this._isSliding)return;const y=this._getActive(),k=d===qs,N=f||A(this._getItems(),y,k,this._config.wrap);if(N===y)return;const T=this._getItemIndex(N),E=L=>M.trigger(this._element,L,{relatedTarget:N,direction:this._orderToDirection(d),from:this._getItemIndex(y),to:T});if(E(Vh).defaultPrevented||!y||!N)return;const R=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(T),this._activeElement=N;const I=k?"carousel-item-start":"carousel-item-end",z=k?"carousel-item-next":"carousel-item-prev";N.classList.add(z),v(N),y.classList.add(I),N.classList.add(I),this._queueCallback(()=>{N.classList.remove(I,z),N.classList.add(Bi),y.classList.remove(Bi,z,I),this._isSliding=!1,E(na)},y,this._isAnimated()),R&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return W.findOne(Zh,this._element)}_getItems(){return W.find(Jr,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(d){return w()?d===ks?js:qs:d===ks?qs:js}_orderToDirection(d){return w()?d===js?ks:$i:d===js?$i:ks}static jQueryInterface(d){return this.each(function(){const f=Ns.getOrCreateInstance(this,d);if(typeof d!="number"){if(typeof d=="string"){if(f[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);f[d]()}}else f.to(d)})}}M.on(document,Qh,"[data-bs-slide], [data-bs-slide-to]",function(g){const d=W.getElementFromSelector(this);if(!d||!d.classList.contains(Qr))return;g.preventDefault();const f=Ns.getOrCreateInstance(d),y=this.getAttribute("data-bs-slide-to");return y?(f.to(y),void f._maybeEnableCycle()):Ee.getDataAttribute(this,"slide")==="next"?(f.next(),void f._maybeEnableCycle()):(f.prev(),void f._maybeEnableCycle())}),M.on(window,Xh,()=>{const g=W.find('[data-bs-ride="carousel"]');for(const d of g)Ns.getOrCreateInstance(d)}),j(Ns);const Xs=".bs.collapse",su=`show${Xs}`,iu=`shown${Xs}`,nu=`hide${Xs}`,au=`hidden${Xs}`,ru=`click${Xs}.data-api`,aa="show",Cs="collapse",Hi="collapsing",ou=`:scope .${Cs} .${Cs}`,ra='[data-bs-toggle="collapse"]',lu={parent:null,toggle:!0},cu={parent:"(null|element)",toggle:"boolean"};class Ss extends ot{constructor(d,f){super(d,f),this._isTransitioning=!1,this._triggerArray=[];const y=W.find(ra);for(const k of y){const N=W.getSelectorFromElement(k),T=W.find(N).filter(E=>E===this._element);N!==null&&T.length&&this._triggerArray.push(k)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return lu}static get DefaultType(){return cu}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let d=[];if(this._config.parent&&(d=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(k=>k!==this._element).map(k=>Ss.getOrCreateInstance(k,{toggle:!1}))),d.length&&d[0]._isTransitioning||M.trigger(this._element,su).defaultPrevented)return;for(const k of d)k.hide();const f=this._getDimension();this._element.classList.remove(Cs),this._element.classList.add(Hi),this._element.style[f]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const y=`scroll${f[0].toUpperCase()+f.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Hi),this._element.classList.add(Cs,aa),this._element.style[f]="",M.trigger(this._element,iu)},this._element,!0),this._element.style[f]=`${this._element[y]}px`}hide(){if(this._isTransitioning||!this._isShown()||M.trigger(this._element,nu).defaultPrevented)return;const d=this._getDimension();this._element.style[d]=`${this._element.getBoundingClientRect()[d]}px`,v(this._element),this._element.classList.add(Hi),this._element.classList.remove(Cs,aa);for(const f of this._triggerArray){const y=W.getElementFromSelector(f);y&&!this._isShown(y)&&this._addAriaAndCollapsedClass([f],!1)}this._isTransitioning=!0,this._element.style[d]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Hi),this._element.classList.add(Cs),M.trigger(this._element,au)},this._element,!0)}_isShown(d=this._element){return d.classList.contains(aa)}_configAfterMerge(d){return d.toggle=!!d.toggle,d.parent=h(d.parent),d}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const d=this._getFirstLevelChildren(ra);for(const f of d){const y=W.getElementFromSelector(f);y&&this._addAriaAndCollapsedClass([f],this._isShown(y))}}_getFirstLevelChildren(d){const f=W.find(ou,this._config.parent);return W.find(d,this._config.parent).filter(y=>!f.includes(y))}_addAriaAndCollapsedClass(d,f){if(d.length)for(const y of d)y.classList.toggle("collapsed",!f),y.setAttribute("aria-expanded",f)}static jQueryInterface(d){const f={};return typeof d=="string"&&/show|hide/.test(d)&&(f.toggle=!1),this.each(function(){const y=Ss.getOrCreateInstance(this,f);if(typeof d=="string"){if(y[d]===void 0)throw new TypeError(`No method named "${d}"`);y[d]()}})}}M.on(document,ru,ra,function(g){(g.target.tagName==="A"||g.delegateTarget&&g.delegateTarget.tagName==="A")&&g.preventDefault();for(const d of W.getMultipleElementsFromSelector(this))Ss.getOrCreateInstance(d,{toggle:!1}).toggle()}),j(Ss);var Oe="top",Ke="bottom",Ge="right",Ie="left",Wi="auto",Ts=[Oe,Ke,Ge,Ie],Xt="start",As="end",eo="clippingParents",oa="viewport",Ms="popper",to="reference",la=Ts.reduce(function(g,d){return g.concat([d+"-"+Xt,d+"-"+As])},[]),ca=[].concat(Ts,[Wi]).reduce(function(g,d){return g.concat([d,d+"-"+Xt,d+"-"+As])},[]),so="beforeRead",io="read",no="afterRead",ao="beforeMain",ro="main",oo="afterMain",lo="beforeWrite",co="write",ho="afterWrite",uo=[so,io,no,ao,ro,oo,lo,co,ho];function ut(g){return g?(g.nodeName||"").toLowerCase():null}function qe(g){if(g==null)return window;if(g.toString()!=="[object Window]"){var d=g.ownerDocument;return d&&d.defaultView||window}return g}function Qt(g){return g instanceof qe(g).Element||g instanceof Element}function Ze(g){return g instanceof qe(g).HTMLElement||g instanceof HTMLElement}function da(g){return typeof ShadowRoot<"u"&&(g instanceof qe(g).ShadowRoot||g instanceof ShadowRoot)}const ha={name:"applyStyles",enabled:!0,phase:"write",fn:function(g){var d=g.state;Object.keys(d.elements).forEach(function(f){var y=d.styles[f]||{},k=d.attributes[f]||{},N=d.elements[f];Ze(N)&&ut(N)&&(Object.assign(N.style,y),Object.keys(k).forEach(function(T){var E=k[T];E===!1?N.removeAttribute(T):N.setAttribute(T,E===!0?"":E)}))})},effect:function(g){var d=g.state,f={popper:{position:d.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(d.elements.popper.style,f.popper),d.styles=f,d.elements.arrow&&Object.assign(d.elements.arrow.style,f.arrow),function(){Object.keys(d.elements).forEach(function(y){var k=d.elements[y],N=d.attributes[y]||{},T=Object.keys(d.styles.hasOwnProperty(y)?d.styles[y]:f[y]).reduce(function(E,R){return E[R]="",E},{});Ze(k)&&ut(k)&&(Object.assign(k.style,T),Object.keys(N).forEach(function(E){k.removeAttribute(E)}))})}},requires:["computeStyles"]};function ft(g){return g.split("-")[0]}var Zt=Math.max,Ui=Math.min,Es=Math.round;function ua(){var g=navigator.userAgentData;return g!=null&&g.brands&&Array.isArray(g.brands)?g.brands.map(function(d){return d.brand+"/"+d.version}).join(" "):navigator.userAgent}function fo(){return!/^((?!chrome|android).)*safari/i.test(ua())}function Ps(g,d,f){d===void 0&&(d=!1),f===void 0&&(f=!1);var y=g.getBoundingClientRect(),k=1,N=1;d&&Ze(g)&&(k=g.offsetWidth>0&&Es(y.width)/g.offsetWidth||1,N=g.offsetHeight>0&&Es(y.height)/g.offsetHeight||1);var T=(Qt(g)?qe(g):window).visualViewport,E=!fo()&&f,R=(y.left+(E&&T?T.offsetLeft:0))/k,I=(y.top+(E&&T?T.offsetTop:0))/N,z=y.width/k,L=y.height/N;return{width:z,height:L,top:I,right:R+z,bottom:I+L,left:R,x:R,y:I}}function fa(g){var d=Ps(g),f=g.offsetWidth,y=g.offsetHeight;return Math.abs(d.width-f)<=1&&(f=d.width),Math.abs(d.height-y)<=1&&(y=d.height),{x:g.offsetLeft,y:g.offsetTop,width:f,height:y}}function mo(g,d){var f=d.getRootNode&&d.getRootNode();if(g.contains(d))return!0;if(f&&da(f)){var y=d;do{if(y&&g.isSameNode(y))return!0;y=y.parentNode||y.host}while(y)}return!1}function jt(g){return qe(g).getComputedStyle(g)}function du(g){return["table","td","th"].indexOf(ut(g))>=0}function $t(g){return((Qt(g)?g.ownerDocument:g.document)||window.document).documentElement}function Vi(g){return ut(g)==="html"?g:g.assignedSlot||g.parentNode||(da(g)?g.host:null)||$t(g)}function po(g){return Ze(g)&&jt(g).position!=="fixed"?g.offsetParent:null}function Qs(g){for(var d=qe(g),f=po(g);f&&du(f)&&jt(f).position==="static";)f=po(f);return f&&(ut(f)==="html"||ut(f)==="body"&&jt(f).position==="static")?d:f||function(y){var k=/firefox/i.test(ua());if(/Trident/i.test(ua())&&Ze(y)&&jt(y).position==="fixed")return null;var N=Vi(y);for(da(N)&&(N=N.host);Ze(N)&&["html","body"].indexOf(ut(N))<0;){var T=jt(N);if(T.transform!=="none"||T.perspective!=="none"||T.contain==="paint"||["transform","perspective"].indexOf(T.willChange)!==-1||k&&T.willChange==="filter"||k&&T.filter&&T.filter!=="none")return N;N=N.parentNode}return null}(g)||d}function ma(g){return["top","bottom"].indexOf(g)>=0?"x":"y"}function Zs(g,d,f){return Zt(g,Ui(d,f))}function go(g){return Object.assign({},{top:0,right:0,bottom:0,left:0},g)}function xo(g,d){return d.reduce(function(f,y){return f[y]=g,f},{})}const bo={name:"arrow",enabled:!0,phase:"main",fn:function(g){var d,f=g.state,y=g.name,k=g.options,N=f.elements.arrow,T=f.modifiersData.popperOffsets,E=ft(f.placement),R=ma(E),I=[Ie,Ge].indexOf(E)>=0?"height":"width";if(N&&T){var z=function(ue,oe){return go(typeof(ue=typeof ue=="function"?ue(Object.assign({},oe.rects,{placement:oe.placement})):ue)!="number"?ue:xo(ue,Ts))}(k.padding,f),L=fa(N),X=R==="y"?Oe:Ie,U=R==="y"?Ke:Ge,K=f.rects.reference[I]+f.rects.reference[R]-T[R]-f.rects.popper[I],V=T[R]-f.rects.reference[R],G=Qs(N),he=G?R==="y"?G.clientHeight||0:G.clientWidth||0:0,xe=K/2-V/2,ee=z[X],ne=he-L[I]-z[U],Q=he/2-L[I]/2+xe,te=Zs(ee,Q,ne),re=R;f.modifiersData[y]=((d={})[re]=te,d.centerOffset=te-Q,d)}},effect:function(g){var d=g.state,f=g.options.element,y=f===void 0?"[data-popper-arrow]":f;y!=null&&(typeof y!="string"||(y=d.elements.popper.querySelector(y)))&&mo(d.elements.popper,y)&&(d.elements.arrow=y)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Rs(g){return g.split("-")[1]}var hu={top:"auto",right:"auto",bottom:"auto",left:"auto"};function yo(g){var d,f=g.popper,y=g.popperRect,k=g.placement,N=g.variation,T=g.offsets,E=g.position,R=g.gpuAcceleration,I=g.adaptive,z=g.roundOffsets,L=g.isFixed,X=T.x,U=X===void 0?0:X,K=T.y,V=K===void 0?0:K,G=typeof z=="function"?z({x:U,y:V}):{x:U,y:V};U=G.x,V=G.y;var he=T.hasOwnProperty("x"),xe=T.hasOwnProperty("y"),ee=Ie,ne=Oe,Q=window;if(I){var te=Qs(f),re="clientHeight",ue="clientWidth";te===qe(f)&&jt(te=$t(f)).position!=="static"&&E==="absolute"&&(re="scrollHeight",ue="scrollWidth"),(k===Oe||(k===Ie||k===Ge)&&N===As)&&(ne=Ke,V-=(L&&te===Q&&Q.visualViewport?Q.visualViewport.height:te[re])-y.height,V*=R?1:-1),k!==Ie&&(k!==Oe&&k!==Ke||N!==As)||(ee=Ge,U-=(L&&te===Q&&Q.visualViewport?Q.visualViewport.width:te[ue])-y.width,U*=R?1:-1)}var oe,je=Object.assign({position:E},I&&hu),Xe=z===!0?function(ct,Fe){var et=ct.x,tt=ct.y,_e=Fe.devicePixelRatio||1;return{x:Es(et*_e)/_e||0,y:Es(tt*_e)/_e||0}}({x:U,y:V},qe(f)):{x:U,y:V};return U=Xe.x,V=Xe.y,R?Object.assign({},je,((oe={})[ne]=xe?"0":"",oe[ee]=he?"0":"",oe.transform=(Q.devicePixelRatio||1)<=1?"translate("+U+"px, "+V+"px)":"translate3d("+U+"px, "+V+"px, 0)",oe)):Object.assign({},je,((d={})[ne]=xe?V+"px":"",d[ee]=he?U+"px":"",d.transform="",d))}const pa={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(g){var d=g.state,f=g.options,y=f.gpuAcceleration,k=y===void 0||y,N=f.adaptive,T=N===void 0||N,E=f.roundOffsets,R=E===void 0||E,I={placement:ft(d.placement),variation:Rs(d.placement),popper:d.elements.popper,popperRect:d.rects.popper,gpuAcceleration:k,isFixed:d.options.strategy==="fixed"};d.modifiersData.popperOffsets!=null&&(d.styles.popper=Object.assign({},d.styles.popper,yo(Object.assign({},I,{offsets:d.modifiersData.popperOffsets,position:d.options.strategy,adaptive:T,roundOffsets:R})))),d.modifiersData.arrow!=null&&(d.styles.arrow=Object.assign({},d.styles.arrow,yo(Object.assign({},I,{offsets:d.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:R})))),d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-placement":d.placement})},data:{}};var Yi={passive:!0};const ga={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(g){var d=g.state,f=g.instance,y=g.options,k=y.scroll,N=k===void 0||k,T=y.resize,E=T===void 0||T,R=qe(d.elements.popper),I=[].concat(d.scrollParents.reference,d.scrollParents.popper);return N&&I.forEach(function(z){z.addEventListener("scroll",f.update,Yi)}),E&&R.addEventListener("resize",f.update,Yi),function(){N&&I.forEach(function(z){z.removeEventListener("scroll",f.update,Yi)}),E&&R.removeEventListener("resize",f.update,Yi)}},data:{}};var uu={left:"right",right:"left",bottom:"top",top:"bottom"};function Ki(g){return g.replace(/left|right|bottom|top/g,function(d){return uu[d]})}var fu={start:"end",end:"start"};function vo(g){return g.replace(/start|end/g,function(d){return fu[d]})}function xa(g){var d=qe(g);return{scrollLeft:d.pageXOffset,scrollTop:d.pageYOffset}}function ba(g){return Ps($t(g)).left+xa(g).scrollLeft}function ya(g){var d=jt(g),f=d.overflow,y=d.overflowX,k=d.overflowY;return/auto|scroll|overlay|hidden/.test(f+k+y)}function _o(g){return["html","body","#document"].indexOf(ut(g))>=0?g.ownerDocument.body:Ze(g)&&ya(g)?g:_o(Vi(g))}function Js(g,d){var f;d===void 0&&(d=[]);var y=_o(g),k=y===((f=g.ownerDocument)==null?void 0:f.body),N=qe(y),T=k?[N].concat(N.visualViewport||[],ya(y)?y:[]):y,E=d.concat(T);return k?E:E.concat(Js(Vi(T)))}function va(g){return Object.assign({},g,{left:g.x,top:g.y,right:g.x+g.width,bottom:g.y+g.height})}function wo(g,d,f){return d===oa?va(function(y,k){var N=qe(y),T=$t(y),E=N.visualViewport,R=T.clientWidth,I=T.clientHeight,z=0,L=0;if(E){R=E.width,I=E.height;var X=fo();(X||!X&&k==="fixed")&&(z=E.offsetLeft,L=E.offsetTop)}return{width:R,height:I,x:z+ba(y),y:L}}(g,f)):Qt(d)?function(y,k){var N=Ps(y,!1,k==="fixed");return N.top=N.top+y.clientTop,N.left=N.left+y.clientLeft,N.bottom=N.top+y.clientHeight,N.right=N.left+y.clientWidth,N.width=y.clientWidth,N.height=y.clientHeight,N.x=N.left,N.y=N.top,N}(d,f):va(function(y){var k,N=$t(y),T=xa(y),E=(k=y.ownerDocument)==null?void 0:k.body,R=Zt(N.scrollWidth,N.clientWidth,E?E.scrollWidth:0,E?E.clientWidth:0),I=Zt(N.scrollHeight,N.clientHeight,E?E.scrollHeight:0,E?E.clientHeight:0),z=-T.scrollLeft+ba(y),L=-T.scrollTop;return jt(E||N).direction==="rtl"&&(z+=Zt(N.clientWidth,E?E.clientWidth:0)-R),{width:R,height:I,x:z,y:L}}($t(g)))}function jo(g){var d,f=g.reference,y=g.element,k=g.placement,N=k?ft(k):null,T=k?Rs(k):null,E=f.x+f.width/2-y.width/2,R=f.y+f.height/2-y.height/2;switch(N){case Oe:d={x:E,y:f.y-y.height};break;case Ke:d={x:E,y:f.y+f.height};break;case Ge:d={x:f.x+f.width,y:R};break;case Ie:d={x:f.x-y.width,y:R};break;default:d={x:f.x,y:f.y}}var I=N?ma(N):null;if(I!=null){var z=I==="y"?"height":"width";switch(T){case Xt:d[I]=d[I]-(f[z]/2-y[z]/2);break;case As:d[I]=d[I]+(f[z]/2-y[z]/2)}}return d}function Ds(g,d){d===void 0&&(d={});var f=d,y=f.placement,k=y===void 0?g.placement:y,N=f.strategy,T=N===void 0?g.strategy:N,E=f.boundary,R=E===void 0?eo:E,I=f.rootBoundary,z=I===void 0?oa:I,L=f.elementContext,X=L===void 0?Ms:L,U=f.altBoundary,K=U!==void 0&&U,V=f.padding,G=V===void 0?0:V,he=go(typeof G!="number"?G:xo(G,Ts)),xe=X===Ms?to:Ms,ee=g.rects.popper,ne=g.elements[K?xe:X],Q=function(Fe,et,tt,_e){var mt=et==="clippingParents"?function(pe){var ze=Js(Vi(pe)),st=["absolute","fixed"].indexOf(jt(pe).position)>=0&&Ze(pe)?Qs(pe):pe;return Qt(st)?ze.filter(function(Ht){return Qt(Ht)&&mo(Ht,st)&&ut(Ht)!=="body"}):[]}(Fe):[].concat(et),pt=[].concat(mt,[tt]),Is=pt[0],Ae=pt.reduce(function(pe,ze){var st=wo(Fe,ze,_e);return pe.top=Zt(st.top,pe.top),pe.right=Ui(st.right,pe.right),pe.bottom=Ui(st.bottom,pe.bottom),pe.left=Zt(st.left,pe.left),pe},wo(Fe,Is,_e));return Ae.width=Ae.right-Ae.left,Ae.height=Ae.bottom-Ae.top,Ae.x=Ae.left,Ae.y=Ae.top,Ae}(Qt(ne)?ne:ne.contextElement||$t(g.elements.popper),R,z,T),te=Ps(g.elements.reference),re=jo({reference:te,element:ee,placement:k}),ue=va(Object.assign({},ee,re)),oe=X===Ms?ue:te,je={top:Q.top-oe.top+he.top,bottom:oe.bottom-Q.bottom+he.bottom,left:Q.left-oe.left+he.left,right:oe.right-Q.right+he.right},Xe=g.modifiersData.offset;if(X===Ms&&Xe){var ct=Xe[k];Object.keys(je).forEach(function(Fe){var et=[Ge,Ke].indexOf(Fe)>=0?1:-1,tt=[Oe,Ke].indexOf(Fe)>=0?"y":"x";je[Fe]+=ct[tt]*et})}return je}function mu(g,d){d===void 0&&(d={});var f=d,y=f.placement,k=f.boundary,N=f.rootBoundary,T=f.padding,E=f.flipVariations,R=f.allowedAutoPlacements,I=R===void 0?ca:R,z=Rs(y),L=z?E?la:la.filter(function(K){return Rs(K)===z}):Ts,X=L.filter(function(K){return I.indexOf(K)>=0});X.length===0&&(X=L);var U=X.reduce(function(K,V){return K[V]=Ds(g,{placement:V,boundary:k,rootBoundary:N,padding:T})[ft(V)],K},{});return Object.keys(U).sort(function(K,V){return U[K]-U[V]})}const ko={name:"flip",enabled:!0,phase:"main",fn:function(g){var d=g.state,f=g.options,y=g.name;if(!d.modifiersData[y]._skip){for(var k=f.mainAxis,N=k===void 0||k,T=f.altAxis,E=T===void 0||T,R=f.fallbackPlacements,I=f.padding,z=f.boundary,L=f.rootBoundary,X=f.altBoundary,U=f.flipVariations,K=U===void 0||U,V=f.allowedAutoPlacements,G=d.options.placement,he=ft(G),xe=R||(he!==G&&K?function(pe){if(ft(pe)===Wi)return[];var ze=Ki(pe);return[vo(pe),ze,vo(ze)]}(G):[Ki(G)]),ee=[G].concat(xe).reduce(function(pe,ze){return pe.concat(ft(ze)===Wi?mu(d,{placement:ze,boundary:z,rootBoundary:L,padding:I,flipVariations:K,allowedAutoPlacements:V}):ze)},[]),ne=d.rects.reference,Q=d.rects.popper,te=new Map,re=!0,ue=ee[0],oe=0;oe<ee.length;oe++){var je=ee[oe],Xe=ft(je),ct=Rs(je)===Xt,Fe=[Oe,Ke].indexOf(Xe)>=0,et=Fe?"width":"height",tt=Ds(d,{placement:je,boundary:z,rootBoundary:L,altBoundary:X,padding:I}),_e=Fe?ct?Ge:Ie:ct?Ke:Oe;ne[et]>Q[et]&&(_e=Ki(_e));var mt=Ki(_e),pt=[];if(N&&pt.push(tt[Xe]<=0),E&&pt.push(tt[_e]<=0,tt[mt]<=0),pt.every(function(pe){return pe})){ue=je,re=!1;break}te.set(je,pt)}if(re)for(var Is=function(pe){var ze=ee.find(function(st){var Ht=te.get(st);if(Ht)return Ht.slice(0,pe).every(function(sn){return sn})});if(ze)return ue=ze,"break"},Ae=K?3:1;Ae>0&&Is(Ae)!=="break";Ae--);d.placement!==ue&&(d.modifiersData[y]._skip=!0,d.placement=ue,d.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function No(g,d,f){return f===void 0&&(f={x:0,y:0}),{top:g.top-d.height-f.y,right:g.right-d.width+f.x,bottom:g.bottom-d.height+f.y,left:g.left-d.width-f.x}}function Co(g){return[Oe,Ge,Ke,Ie].some(function(d){return g[d]>=0})}const So={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(g){var d=g.state,f=g.name,y=d.rects.reference,k=d.rects.popper,N=d.modifiersData.preventOverflow,T=Ds(d,{elementContext:"reference"}),E=Ds(d,{altBoundary:!0}),R=No(T,y),I=No(E,k,N),z=Co(R),L=Co(I);d.modifiersData[f]={referenceClippingOffsets:R,popperEscapeOffsets:I,isReferenceHidden:z,hasPopperEscaped:L},d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-reference-hidden":z,"data-popper-escaped":L})}},To={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(g){var d=g.state,f=g.options,y=g.name,k=f.offset,N=k===void 0?[0,0]:k,T=ca.reduce(function(z,L){return z[L]=function(X,U,K){var V=ft(X),G=[Ie,Oe].indexOf(V)>=0?-1:1,he=typeof K=="function"?K(Object.assign({},U,{placement:X})):K,xe=he[0],ee=he[1];return xe=xe||0,ee=(ee||0)*G,[Ie,Ge].indexOf(V)>=0?{x:ee,y:xe}:{x:xe,y:ee}}(L,d.rects,N),z},{}),E=T[d.placement],R=E.x,I=E.y;d.modifiersData.popperOffsets!=null&&(d.modifiersData.popperOffsets.x+=R,d.modifiersData.popperOffsets.y+=I),d.modifiersData[y]=T}},_a={name:"popperOffsets",enabled:!0,phase:"read",fn:function(g){var d=g.state,f=g.name;d.modifiersData[f]=jo({reference:d.rects.reference,element:d.rects.popper,placement:d.placement})},data:{}},Ao={name:"preventOverflow",enabled:!0,phase:"main",fn:function(g){var d=g.state,f=g.options,y=g.name,k=f.mainAxis,N=k===void 0||k,T=f.altAxis,E=T!==void 0&&T,R=f.boundary,I=f.rootBoundary,z=f.altBoundary,L=f.padding,X=f.tether,U=X===void 0||X,K=f.tetherOffset,V=K===void 0?0:K,G=Ds(d,{boundary:R,rootBoundary:I,padding:L,altBoundary:z}),he=ft(d.placement),xe=Rs(d.placement),ee=!xe,ne=ma(he),Q=ne==="x"?"y":"x",te=d.modifiersData.popperOffsets,re=d.rects.reference,ue=d.rects.popper,oe=typeof V=="function"?V(Object.assign({},d.rects,{placement:d.placement})):V,je=typeof oe=="number"?{mainAxis:oe,altAxis:oe}:Object.assign({mainAxis:0,altAxis:0},oe),Xe=d.modifiersData.offset?d.modifiersData.offset[d.placement]:null,ct={x:0,y:0};if(te){if(N){var Fe,et=ne==="y"?Oe:Ie,tt=ne==="y"?Ke:Ge,_e=ne==="y"?"height":"width",mt=te[ne],pt=mt+G[et],Is=mt-G[tt],Ae=U?-ue[_e]/2:0,pe=xe===Xt?re[_e]:ue[_e],ze=xe===Xt?-ue[_e]:-re[_e],st=d.elements.arrow,Ht=U&&st?fa(st):{width:0,height:0},sn=d.modifiersData["arrow#persistent"]?d.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},pl=sn[et],gl=sn[tt],nn=Zs(0,re[_e],Ht[_e]),Kf=ee?re[_e]/2-Ae-nn-pl-je.mainAxis:pe-nn-pl-je.mainAxis,Gf=ee?-re[_e]/2+Ae+nn+gl+je.mainAxis:ze+nn+gl+je.mainAxis,La=d.elements.arrow&&Qs(d.elements.arrow),qf=La?ne==="y"?La.clientTop||0:La.clientLeft||0:0,xl=(Fe=Xe==null?void 0:Xe[ne])!=null?Fe:0,Xf=mt+Gf-xl,bl=Zs(U?Ui(pt,mt+Kf-xl-qf):pt,mt,U?Zt(Is,Xf):Is);te[ne]=bl,ct[ne]=bl-mt}if(E){var yl,Qf=ne==="x"?Oe:Ie,Zf=ne==="x"?Ke:Ge,rs=te[Q],an=Q==="y"?"height":"width",vl=rs+G[Qf],_l=rs-G[Zf],Oa=[Oe,Ie].indexOf(he)!==-1,wl=(yl=Xe==null?void 0:Xe[Q])!=null?yl:0,jl=Oa?vl:rs-re[an]-ue[an]-wl+je.altAxis,kl=Oa?rs+re[an]+ue[an]-wl-je.altAxis:_l,Nl=U&&Oa?function(Jf,em,Ia){var Cl=Zs(Jf,em,Ia);return Cl>Ia?Ia:Cl}(jl,rs,kl):Zs(U?jl:vl,rs,U?kl:_l);te[Q]=Nl,ct[Q]=Nl-rs}d.modifiersData[y]=ct}},requiresIfExists:["offset"]};function pu(g,d,f){f===void 0&&(f=!1);var y,k,N=Ze(d),T=Ze(d)&&function(L){var X=L.getBoundingClientRect(),U=Es(X.width)/L.offsetWidth||1,K=Es(X.height)/L.offsetHeight||1;return U!==1||K!==1}(d),E=$t(d),R=Ps(g,T,f),I={scrollLeft:0,scrollTop:0},z={x:0,y:0};return(N||!N&&!f)&&((ut(d)!=="body"||ya(E))&&(I=(y=d)!==qe(y)&&Ze(y)?{scrollLeft:(k=y).scrollLeft,scrollTop:k.scrollTop}:xa(y)),Ze(d)?((z=Ps(d,!0)).x+=d.clientLeft,z.y+=d.clientTop):E&&(z.x=ba(E))),{x:R.left+I.scrollLeft-z.x,y:R.top+I.scrollTop-z.y,width:R.width,height:R.height}}function gu(g){var d=new Map,f=new Set,y=[];function k(N){f.add(N.name),[].concat(N.requires||[],N.requiresIfExists||[]).forEach(function(T){if(!f.has(T)){var E=d.get(T);E&&k(E)}}),y.push(N)}return g.forEach(function(N){d.set(N.name,N)}),g.forEach(function(N){f.has(N.name)||k(N)}),y}var Mo={placement:"bottom",modifiers:[],strategy:"absolute"};function Eo(){for(var g=arguments.length,d=new Array(g),f=0;f<g;f++)d[f]=arguments[f];return!d.some(function(y){return!(y&&typeof y.getBoundingClientRect=="function")})}function Gi(g){g===void 0&&(g={});var d=g,f=d.defaultModifiers,y=f===void 0?[]:f,k=d.defaultOptions,N=k===void 0?Mo:k;return function(T,E,R){R===void 0&&(R=N);var I,z,L={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mo,N),modifiersData:{},elements:{reference:T,popper:E},attributes:{},styles:{}},X=[],U=!1,K={state:L,setOptions:function(G){var he=typeof G=="function"?G(L.options):G;V(),L.options=Object.assign({},N,L.options,he),L.scrollParents={reference:Qt(T)?Js(T):T.contextElement?Js(T.contextElement):[],popper:Js(E)};var xe,ee,ne=function(Q){var te=gu(Q);return uo.reduce(function(re,ue){return re.concat(te.filter(function(oe){return oe.phase===ue}))},[])}((xe=[].concat(y,L.options.modifiers),ee=xe.reduce(function(Q,te){var re=Q[te.name];return Q[te.name]=re?Object.assign({},re,te,{options:Object.assign({},re.options,te.options),data:Object.assign({},re.data,te.data)}):te,Q},{}),Object.keys(ee).map(function(Q){return ee[Q]})));return L.orderedModifiers=ne.filter(function(Q){return Q.enabled}),L.orderedModifiers.forEach(function(Q){var te=Q.name,re=Q.options,ue=re===void 0?{}:re,oe=Q.effect;if(typeof oe=="function"){var je=oe({state:L,name:te,instance:K,options:ue});X.push(je||function(){})}}),K.update()},forceUpdate:function(){if(!U){var G=L.elements,he=G.reference,xe=G.popper;if(Eo(he,xe)){L.rects={reference:pu(he,Qs(xe),L.options.strategy==="fixed"),popper:fa(xe)},L.reset=!1,L.placement=L.options.placement,L.orderedModifiers.forEach(function(oe){return L.modifiersData[oe.name]=Object.assign({},oe.data)});for(var ee=0;ee<L.orderedModifiers.length;ee++)if(L.reset!==!0){var ne=L.orderedModifiers[ee],Q=ne.fn,te=ne.options,re=te===void 0?{}:te,ue=ne.name;typeof Q=="function"&&(L=Q({state:L,options:re,name:ue,instance:K})||L)}else L.reset=!1,ee=-1}}},update:(I=function(){return new Promise(function(G){K.forceUpdate(),G(L)})},function(){return z||(z=new Promise(function(G){Promise.resolve().then(function(){z=void 0,G(I())})})),z}),destroy:function(){V(),U=!0}};if(!Eo(T,E))return K;function V(){X.forEach(function(G){return G()}),X=[]}return K.setOptions(R).then(function(G){!U&&R.onFirstUpdate&&R.onFirstUpdate(G)}),K}}var xu=Gi(),bu=Gi({defaultModifiers:[ga,_a,pa,ha]}),wa=Gi({defaultModifiers:[ga,_a,pa,ha,To,ko,Ao,bo,So]});const Po=Object.freeze(Object.defineProperty({__proto__:null,afterMain:oo,afterRead:no,afterWrite:ho,applyStyles:ha,arrow:bo,auto:Wi,basePlacements:Ts,beforeMain:ao,beforeRead:so,beforeWrite:lo,bottom:Ke,clippingParents:eo,computeStyles:pa,createPopper:wa,createPopperBase:xu,createPopperLite:bu,detectOverflow:Ds,end:As,eventListeners:ga,flip:ko,hide:So,left:Ie,main:ro,modifierPhases:uo,offset:To,placements:ca,popper:Ms,popperGenerator:Gi,popperOffsets:_a,preventOverflow:Ao,read:io,reference:to,right:Ge,start:Xt,top:Oe,variationPlacements:la,viewport:oa,write:co},Symbol.toStringTag,{value:"Module"})),Ro="dropdown",Jt=".bs.dropdown",ja=".data-api",yu="ArrowUp",Do="ArrowDown",vu=`hide${Jt}`,_u=`hidden${Jt}`,wu=`show${Jt}`,ju=`shown${Jt}`,Lo=`click${Jt}${ja}`,Oo=`keydown${Jt}${ja}`,ku=`keyup${Jt}${ja}`,Ls="show",es='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Nu=`${es}.${Ls}`,qi=".dropdown-menu",Cu=w()?"top-end":"top-start",Su=w()?"top-start":"top-end",Tu=w()?"bottom-end":"bottom-start",Au=w()?"bottom-start":"bottom-end",Mu=w()?"left-start":"right-start",Eu=w()?"right-start":"left-start",Pu={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ru={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class lt extends ot{constructor(d,f){super(d,f),this._popper=null,this._parent=this._element.parentNode,this._menu=W.next(this._element,qi)[0]||W.prev(this._element,qi)[0]||W.findOne(qi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Pu}static get DefaultType(){return Ru}static get NAME(){return Ro}toggle(){return this._isShown()?this.hide():this.show()}show(){if(m(this._element)||this._isShown())return;const d={relatedTarget:this._element};if(!M.trigger(this._element,wu,d).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const f of[].concat(...document.body.children))M.on(f,"mouseover",x);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ls),this._element.classList.add(Ls),M.trigger(this._element,ju,d)}}hide(){if(m(this._element)||!this._isShown())return;const d={relatedTarget:this._element};this._completeHide(d)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(d){if(!M.trigger(this._element,vu,d).defaultPrevented){if("ontouchstart"in document.documentElement)for(const f of[].concat(...document.body.children))M.off(f,"mouseover",x);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ls),this._element.classList.remove(Ls),this._element.setAttribute("aria-expanded","false"),Ee.removeDataAttribute(this._menu,"popper"),M.trigger(this._element,_u,d)}}_getConfig(d){if(typeof(d=super._getConfig(d)).reference=="object"&&!c(d.reference)&&typeof d.reference.getBoundingClientRect!="function")throw new TypeError(`${Ro.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return d}_createPopper(){if(Po===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let d=this._element;this._config.reference==="parent"?d=this._parent:c(this._config.reference)?d=h(this._config.reference):typeof this._config.reference=="object"&&(d=this._config.reference);const f=this._getPopperConfig();this._popper=wa(d,this._menu,f)}_isShown(){return this._menu.classList.contains(Ls)}_getPlacement(){const d=this._parent;if(d.classList.contains("dropend"))return Mu;if(d.classList.contains("dropstart"))return Eu;if(d.classList.contains("dropup-center"))return"top";if(d.classList.contains("dropdown-center"))return"bottom";const f=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return d.classList.contains("dropup")?f?Su:Cu:f?Au:Tu}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(f=>Number.parseInt(f,10)):typeof d=="function"?f=>d(f,this._element):d}_getPopperConfig(){const d={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Ee.setDataAttribute(this._menu,"popper","static"),d.modifiers=[{name:"applyStyles",enabled:!1}]),{...d,...C(this._config.popperConfig,[void 0,d])}}_selectMenuItem({key:d,target:f}){const y=W.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(k=>u(k));y.length&&A(y,f,d===Do,!y.includes(f)).focus()}static jQueryInterface(d){return this.each(function(){const f=lt.getOrCreateInstance(this,d);if(typeof d=="string"){if(f[d]===void 0)throw new TypeError(`No method named "${d}"`);f[d]()}})}static clearMenus(d){if(d.button===2||d.type==="keyup"&&d.key!=="Tab")return;const f=W.find(Nu);for(const y of f){const k=lt.getInstance(y);if(!k||k._config.autoClose===!1)continue;const N=d.composedPath(),T=N.includes(k._menu);if(N.includes(k._element)||k._config.autoClose==="inside"&&!T||k._config.autoClose==="outside"&&T||k._menu.contains(d.target)&&(d.type==="keyup"&&d.key==="Tab"||/input|select|option|textarea|form/i.test(d.target.tagName)))continue;const E={relatedTarget:k._element};d.type==="click"&&(E.clickEvent=d),k._completeHide(E)}}static dataApiKeydownHandler(d){const f=/input|textarea/i.test(d.target.tagName),y=d.key==="Escape",k=[yu,Do].includes(d.key);if(!k&&!y||f&&!y)return;d.preventDefault();const N=this.matches(es)?this:W.prev(this,es)[0]||W.next(this,es)[0]||W.findOne(es,d.delegateTarget.parentNode),T=lt.getOrCreateInstance(N);if(k)return d.stopPropagation(),T.show(),void T._selectMenuItem(d);T._isShown()&&(d.stopPropagation(),T.hide(),N.focus())}}M.on(document,Oo,es,lt.dataApiKeydownHandler),M.on(document,Oo,qi,lt.dataApiKeydownHandler),M.on(document,Lo,lt.clearMenus),M.on(document,ku,lt.clearMenus),M.on(document,Lo,es,function(g){g.preventDefault(),lt.getOrCreateInstance(this).toggle()}),j(lt);const Io="backdrop",Fo="show",zo=`mousedown.bs.${Io}`,Du={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Lu={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class $o extends Ye{constructor(d){super(),this._config=this._getConfig(d),this._isAppended=!1,this._element=null}static get Default(){return Du}static get DefaultType(){return Lu}static get NAME(){return Io}show(d){if(!this._config.isVisible)return void C(d);this._append();const f=this._getElement();this._config.isAnimated&&v(f),f.classList.add(Fo),this._emulateAnimation(()=>{C(d)})}hide(d){this._config.isVisible?(this._getElement().classList.remove(Fo),this._emulateAnimation(()=>{this.dispose(),C(d)})):C(d)}dispose(){this._isAppended&&(M.off(this._element,zo),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const d=document.createElement("div");d.className=this._config.className,this._config.isAnimated&&d.classList.add("fade"),this._element=d}return this._element}_configAfterMerge(d){return d.rootElement=h(d.rootElement),d}_append(){if(this._isAppended)return;const d=this._getElement();this._config.rootElement.append(d),M.on(d,zo,()=>{C(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(d){P(d,this._getElement(),this._config.isAnimated)}}const Xi=".bs.focustrap",Ou=`focusin${Xi}`,Iu=`keydown.tab${Xi}`,Bo="backward",Fu={autofocus:!0,trapElement:null},zu={autofocus:"boolean",trapElement:"element"};class Ho extends Ye{constructor(d){super(),this._config=this._getConfig(d),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Fu}static get DefaultType(){return zu}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),M.off(document,Xi),M.on(document,Ou,d=>this._handleFocusin(d)),M.on(document,Iu,d=>this._handleKeydown(d)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,M.off(document,Xi))}_handleFocusin(d){const{trapElement:f}=this._config;if(d.target===document||d.target===f||f.contains(d.target))return;const y=W.focusableChildren(f);y.length===0?f.focus():this._lastTabNavDirection===Bo?y[y.length-1].focus():y[0].focus()}_handleKeydown(d){d.key==="Tab"&&(this._lastTabNavDirection=d.shiftKey?Bo:"forward")}}const Wo=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Uo=".sticky-top",Qi="padding-right",Vo="margin-right";class ka{constructor(){this._element=document.body}getWidth(){const d=document.documentElement.clientWidth;return Math.abs(window.innerWidth-d)}hide(){const d=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Qi,f=>f+d),this._setElementAttributes(Wo,Qi,f=>f+d),this._setElementAttributes(Uo,Vo,f=>f-d)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Qi),this._resetElementAttributes(Wo,Qi),this._resetElementAttributes(Uo,Vo)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(d,f,y){const k=this.getWidth();this._applyManipulationCallback(d,N=>{if(N!==this._element&&window.innerWidth>N.clientWidth+k)return;this._saveInitialAttribute(N,f);const T=window.getComputedStyle(N).getPropertyValue(f);N.style.setProperty(f,`${y(Number.parseFloat(T))}px`)})}_saveInitialAttribute(d,f){const y=d.style.getPropertyValue(f);y&&Ee.setDataAttribute(d,f,y)}_resetElementAttributes(d,f){this._applyManipulationCallback(d,y=>{const k=Ee.getDataAttribute(y,f);k!==null?(Ee.removeDataAttribute(y,f),y.style.setProperty(f,k)):y.style.removeProperty(f)})}_applyManipulationCallback(d,f){if(c(d))f(d);else for(const y of W.find(d,this._element))f(y)}}const Je=".bs.modal",$u=`hide${Je}`,Bu=`hidePrevented${Je}`,Yo=`hidden${Je}`,Ko=`show${Je}`,Hu=`shown${Je}`,Wu=`resize${Je}`,Uu=`click.dismiss${Je}`,Vu=`mousedown.dismiss${Je}`,Yu=`keydown.dismiss${Je}`,Ku=`click${Je}.data-api`,Go="modal-open",qo="show",Na="modal-static",Gu={backdrop:!0,focus:!0,keyboard:!0},qu={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ts extends ot{constructor(d,f){super(d,f),this._dialog=W.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ka,this._addEventListeners()}static get Default(){return Gu}static get DefaultType(){return qu}static get NAME(){return"modal"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||M.trigger(this._element,Ko,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Go),this._adjustDialog(),this._backdrop.show(()=>this._showElement(d)))}hide(){this._isShown&&!this._isTransitioning&&(M.trigger(this._element,$u).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(qo),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){M.off(window,Je),M.off(this._dialog,Je),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new $o({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ho({trapElement:this._element})}_showElement(d){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const f=W.findOne(".modal-body",this._dialog);f&&(f.scrollTop=0),v(this._element),this._element.classList.add(qo),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,M.trigger(this._element,Hu,{relatedTarget:d})},this._dialog,this._isAnimated())}_addEventListeners(){M.on(this._element,Yu,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),M.on(window,Wu,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),M.on(this._element,Vu,d=>{M.one(this._element,Uu,f=>{this._element===d.target&&this._element===f.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Go),this._resetAdjustments(),this._scrollBar.reset(),M.trigger(this._element,Yo)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(M.trigger(this._element,Bu).defaultPrevented)return;const d=this._element.scrollHeight>document.documentElement.clientHeight,f=this._element.style.overflowY;f==="hidden"||this._element.classList.contains(Na)||(d||(this._element.style.overflowY="hidden"),this._element.classList.add(Na),this._queueCallback(()=>{this._element.classList.remove(Na),this._queueCallback(()=>{this._element.style.overflowY=f},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const d=this._element.scrollHeight>document.documentElement.clientHeight,f=this._scrollBar.getWidth(),y=f>0;if(y&&!d){const k=w()?"paddingLeft":"paddingRight";this._element.style[k]=`${f}px`}if(!y&&d){const k=w()?"paddingRight":"paddingLeft";this._element.style[k]=`${f}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,f){return this.each(function(){const y=ts.getOrCreateInstance(this,d);if(typeof d=="string"){if(y[d]===void 0)throw new TypeError(`No method named "${d}"`);y[d](f)}})}}M.on(document,Ku,'[data-bs-toggle="modal"]',function(g){const d=W.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&g.preventDefault(),M.one(d,Ko,y=>{y.defaultPrevented||M.one(d,Yo,()=>{u(this)&&this.focus()})});const f=W.findOne(".modal.show");f&&ts.getInstance(f).hide(),ts.getOrCreateInstance(d).toggle(this)}),Fi(ts),j(ts);const kt=".bs.offcanvas",Xo=".data-api",Xu=`load${kt}${Xo}`,Qo="show",Zo="showing",Jo="hiding",el=".offcanvas.show",Qu=`show${kt}`,Zu=`shown${kt}`,Ju=`hide${kt}`,tl=`hidePrevented${kt}`,sl=`hidden${kt}`,ef=`resize${kt}`,tf=`click${kt}${Xo}`,sf=`keydown.dismiss${kt}`,nf={backdrop:!0,keyboard:!0,scroll:!1},af={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Nt extends ot{constructor(d,f){super(d,f),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return nf}static get DefaultType(){return af}static get NAME(){return"offcanvas"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||M.trigger(this._element,Qu,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new ka().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Zo),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Qo),this._element.classList.remove(Zo),M.trigger(this._element,Zu,{relatedTarget:d})},this._element,!0))}hide(){this._isShown&&(M.trigger(this._element,Ju).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Jo),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Qo,Jo),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ka().reset(),M.trigger(this._element,sl)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const d=!!this._config.backdrop;return new $o({className:"offcanvas-backdrop",isVisible:d,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:d?()=>{this._config.backdrop!=="static"?this.hide():M.trigger(this._element,tl)}:null})}_initializeFocusTrap(){return new Ho({trapElement:this._element})}_addEventListeners(){M.on(this._element,sf,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():M.trigger(this._element,tl))})}static jQueryInterface(d){return this.each(function(){const f=Nt.getOrCreateInstance(this,d);if(typeof d=="string"){if(f[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);f[d](this)}})}}M.on(document,tf,'[data-bs-toggle="offcanvas"]',function(g){const d=W.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&g.preventDefault(),m(this))return;M.one(d,sl,()=>{u(this)&&this.focus()});const f=W.findOne(el);f&&f!==d&&Nt.getInstance(f).hide(),Nt.getOrCreateInstance(d).toggle(this)}),M.on(window,Xu,()=>{for(const g of W.find(el))Nt.getOrCreateInstance(g).show()}),M.on(window,ef,()=>{for(const g of W.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(g).position!=="fixed"&&Nt.getOrCreateInstance(g).hide()}),Fi(Nt),j(Nt);const il={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},rf=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),of=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,lf=(g,d)=>{const f=g.nodeName.toLowerCase();return d.includes(f)?!rf.has(f)||!!of.test(g.nodeValue):d.filter(y=>y instanceof RegExp).some(y=>y.test(f))},cf={allowList:il,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},df={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},hf={entry:"(string|element|function|null)",selector:"(string|element)"};class uf extends Ye{constructor(d){super(),this._config=this._getConfig(d)}static get Default(){return cf}static get DefaultType(){return df}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(d=>this._resolvePossibleFunction(d)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(d){return this._checkContent(d),this._config.content={...this._config.content,...d},this}toHtml(){const d=document.createElement("div");d.innerHTML=this._maybeSanitize(this._config.template);for(const[k,N]of Object.entries(this._config.content))this._setContent(d,N,k);const f=d.children[0],y=this._resolvePossibleFunction(this._config.extraClass);return y&&f.classList.add(...y.split(" ")),f}_typeCheckConfig(d){super._typeCheckConfig(d),this._checkContent(d.content)}_checkContent(d){for(const[f,y]of Object.entries(d))super._typeCheckConfig({selector:f,entry:y},hf)}_setContent(d,f,y){const k=W.findOne(y,d);k&&((f=this._resolvePossibleFunction(f))?c(f)?this._putElementInTemplate(h(f),k):this._config.html?k.innerHTML=this._maybeSanitize(f):k.textContent=f:k.remove())}_maybeSanitize(d){return this._config.sanitize?function(f,y,k){if(!f.length)return f;if(k&&typeof k=="function")return k(f);const N=new window.DOMParser().parseFromString(f,"text/html"),T=[].concat(...N.body.querySelectorAll("*"));for(const E of T){const R=E.nodeName.toLowerCase();if(!Object.keys(y).includes(R)){E.remove();continue}const I=[].concat(...E.attributes),z=[].concat(y["*"]||[],y[R]||[]);for(const L of I)lf(L,z)||E.removeAttribute(L.nodeName)}return N.body.innerHTML}(d,this._config.allowList,this._config.sanitizeFn):d}_resolvePossibleFunction(d){return C(d,[void 0,this])}_putElementInTemplate(d,f){if(this._config.html)return f.innerHTML="",void f.append(d);f.textContent=d.textContent}}const ff=new Set(["sanitize","allowList","sanitizeFn"]),Ca="fade",Zi="show",mf=".tooltip-inner",nl=".modal",al="hide.bs.modal",ei="hover",Sa="focus",Ta="click",pf={AUTO:"auto",TOP:"top",RIGHT:w()?"left":"right",BOTTOM:"bottom",LEFT:w()?"right":"left"},gf={allowList:il,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},xf={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ss extends ot{constructor(d,f){if(Po===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(d,f),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return gf}static get DefaultType(){return xf}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),M.off(this._element.closest(nl),al,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const d=M.trigger(this._element,this.constructor.eventName("show")),f=(p(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(d.defaultPrevented||!f)return;this._disposePopper();const y=this._getTipElement();this._element.setAttribute("aria-describedby",y.getAttribute("id"));const{container:k}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(k.append(y),M.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(y),y.classList.add(Zi),"ontouchstart"in document.documentElement)for(const N of[].concat(...document.body.children))M.on(N,"mouseover",x);this._queueCallback(()=>{M.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!M.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Zi),"ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))M.off(d,"mouseover",x);this._activeTrigger[Ta]=!1,this._activeTrigger[Sa]=!1,this._activeTrigger[ei]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),M.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(d){const f=this._getTemplateFactory(d).toHtml();if(!f)return null;f.classList.remove(Ca,Zi),f.classList.add(`bs-${this.constructor.NAME}-auto`);const y=(k=>{do k+=Math.floor(1e6*Math.random());while(document.getElementById(k));return k})(this.constructor.NAME).toString();return f.setAttribute("id",y),this._isAnimated()&&f.classList.add(Ca),f}setContent(d){this._newContent=d,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(d){return this._templateFactory?this._templateFactory.changeContent(d):this._templateFactory=new uf({...this._config,content:d,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[mf]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(d){return this.constructor.getOrCreateInstance(d.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Ca)}_isShown(){return this.tip&&this.tip.classList.contains(Zi)}_createPopper(d){const f=C(this._config.placement,[this,d,this._element]),y=pf[f.toUpperCase()];return wa(this._element,d,this._getPopperConfig(y))}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(f=>Number.parseInt(f,10)):typeof d=="function"?f=>d(f,this._element):d}_resolvePossibleFunction(d){return C(d,[this._element,this._element])}_getPopperConfig(d){const f={placement:d,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:y=>{this._getTipElement().setAttribute("data-popper-placement",y.state.placement)}}]};return{...f,...C(this._config.popperConfig,[void 0,f])}}_setListeners(){const d=this._config.trigger.split(" ");for(const f of d)if(f==="click")M.on(this._element,this.constructor.eventName("click"),this._config.selector,y=>{const k=this._initializeOnDelegatedTarget(y);k._activeTrigger[Ta]=!(k._isShown()&&k._activeTrigger[Ta]),k.toggle()});else if(f!=="manual"){const y=f===ei?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),k=f===ei?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");M.on(this._element,y,this._config.selector,N=>{const T=this._initializeOnDelegatedTarget(N);T._activeTrigger[N.type==="focusin"?Sa:ei]=!0,T._enter()}),M.on(this._element,k,this._config.selector,N=>{const T=this._initializeOnDelegatedTarget(N);T._activeTrigger[N.type==="focusout"?Sa:ei]=T._element.contains(N.relatedTarget),T._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},M.on(this._element.closest(nl),al,this._hideModalHandler)}_fixTitle(){const d=this._element.getAttribute("title");d&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",d),this._element.setAttribute("data-bs-original-title",d),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(d,f){clearTimeout(this._timeout),this._timeout=setTimeout(d,f)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(d){const f=Ee.getDataAttributes(this._element);for(const y of Object.keys(f))ff.has(y)&&delete f[y];return d={...f,...typeof d=="object"&&d?d:{}},d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d.container=d.container===!1?document.body:h(d.container),typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),typeof d.title=="number"&&(d.title=d.title.toString()),typeof d.content=="number"&&(d.content=d.content.toString()),d}_getDelegateConfig(){const d={};for(const[f,y]of Object.entries(this._config))this.constructor.Default[f]!==y&&(d[f]=y);return d.selector=!1,d.trigger="manual",d}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(d){return this.each(function(){const f=ss.getOrCreateInstance(this,d);if(typeof d=="string"){if(f[d]===void 0)throw new TypeError(`No method named "${d}"`);f[d]()}})}}j(ss);const bf=".popover-header",yf=".popover-body",vf={...ss.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},_f={...ss.DefaultType,content:"(null|string|element|function)"};class Ji extends ss{static get Default(){return vf}static get DefaultType(){return _f}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[bf]:this._getTitle(),[yf]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(d){return this.each(function(){const f=Ji.getOrCreateInstance(this,d);if(typeof d=="string"){if(f[d]===void 0)throw new TypeError(`No method named "${d}"`);f[d]()}})}}j(Ji);const Aa=".bs.scrollspy",wf=`activate${Aa}`,rl=`click${Aa}`,jf=`load${Aa}.data-api`,Os="active",Ma="[href]",ol=".nav-link",kf=`${ol}, .nav-item > ${ol}, .list-group-item`,Nf={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Cf={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ti extends ot{constructor(d,f){super(d,f),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Nf}static get DefaultType(){return Cf}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const d of this._observableSections.values())this._observer.observe(d)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(d){return d.target=h(d.target)||document.body,d.rootMargin=d.offset?`${d.offset}px 0px -30%`:d.rootMargin,typeof d.threshold=="string"&&(d.threshold=d.threshold.split(",").map(f=>Number.parseFloat(f))),d}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(M.off(this._config.target,rl),M.on(this._config.target,rl,Ma,d=>{const f=this._observableSections.get(d.target.hash);if(f){d.preventDefault();const y=this._rootElement||window,k=f.offsetTop-this._element.offsetTop;if(y.scrollTo)return void y.scrollTo({top:k,behavior:"smooth"});y.scrollTop=k}}))}_getNewObserver(){const d={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(f=>this._observerCallback(f),d)}_observerCallback(d){const f=T=>this._targetLinks.get(`#${T.target.id}`),y=T=>{this._previousScrollData.visibleEntryTop=T.target.offsetTop,this._process(f(T))},k=(this._rootElement||document.documentElement).scrollTop,N=k>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=k;for(const T of d){if(!T.isIntersecting){this._activeTarget=null,this._clearActiveClass(f(T));continue}const E=T.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(N&&E){if(y(T),!k)return}else N||E||y(T)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const d=W.find(Ma,this._config.target);for(const f of d){if(!f.hash||m(f))continue;const y=W.findOne(decodeURI(f.hash),this._element);u(y)&&(this._targetLinks.set(decodeURI(f.hash),f),this._observableSections.set(f.hash,y))}}_process(d){this._activeTarget!==d&&(this._clearActiveClass(this._config.target),this._activeTarget=d,d.classList.add(Os),this._activateParents(d),M.trigger(this._element,wf,{relatedTarget:d}))}_activateParents(d){if(d.classList.contains("dropdown-item"))W.findOne(".dropdown-toggle",d.closest(".dropdown")).classList.add(Os);else for(const f of W.parents(d,".nav, .list-group"))for(const y of W.prev(f,kf))y.classList.add(Os)}_clearActiveClass(d){d.classList.remove(Os);const f=W.find(`${Ma}.${Os}`,d);for(const y of f)y.classList.remove(Os)}static jQueryInterface(d){return this.each(function(){const f=ti.getOrCreateInstance(this,d);if(typeof d=="string"){if(f[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);f[d]()}})}}M.on(window,jf,()=>{for(const g of W.find('[data-bs-spy="scroll"]'))ti.getOrCreateInstance(g)}),j(ti);const is=".bs.tab",Sf=`hide${is}`,Tf=`hidden${is}`,Af=`show${is}`,Mf=`shown${is}`,Ef=`click${is}`,Pf=`keydown${is}`,Rf=`load${is}`,Df="ArrowLeft",ll="ArrowRight",Lf="ArrowUp",cl="ArrowDown",Ea="Home",dl="End",ns="active",hl="fade",Pa="show",ul=".dropdown-toggle",Ra=`:not(${ul})`,fl='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Da=`.nav-link${Ra}, .list-group-item${Ra}, [role="tab"]${Ra}, ${fl}`,Of=`.${ns}[data-bs-toggle="tab"], .${ns}[data-bs-toggle="pill"], .${ns}[data-bs-toggle="list"]`;class as extends ot{constructor(d){super(d),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),M.on(this._element,Pf,f=>this._keydown(f)))}static get NAME(){return"tab"}show(){const d=this._element;if(this._elemIsActive(d))return;const f=this._getActiveElem(),y=f?M.trigger(f,Sf,{relatedTarget:d}):null;M.trigger(d,Af,{relatedTarget:f}).defaultPrevented||y&&y.defaultPrevented||(this._deactivate(f,d),this._activate(d,f))}_activate(d,f){d&&(d.classList.add(ns),this._activate(W.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.removeAttribute("tabindex"),d.setAttribute("aria-selected",!0),this._toggleDropDown(d,!0),M.trigger(d,Mf,{relatedTarget:f})):d.classList.add(Pa)},d,d.classList.contains(hl)))}_deactivate(d,f){d&&(d.classList.remove(ns),d.blur(),this._deactivate(W.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.setAttribute("aria-selected",!1),d.setAttribute("tabindex","-1"),this._toggleDropDown(d,!1),M.trigger(d,Tf,{relatedTarget:f})):d.classList.remove(Pa)},d,d.classList.contains(hl)))}_keydown(d){if(![Df,ll,Lf,cl,Ea,dl].includes(d.key))return;d.stopPropagation(),d.preventDefault();const f=this._getChildren().filter(k=>!m(k));let y;if([Ea,dl].includes(d.key))y=f[d.key===Ea?0:f.length-1];else{const k=[ll,cl].includes(d.key);y=A(f,d.target,k,!0)}y&&(y.focus({preventScroll:!0}),as.getOrCreateInstance(y).show())}_getChildren(){return W.find(Da,this._parent)}_getActiveElem(){return this._getChildren().find(d=>this._elemIsActive(d))||null}_setInitialAttributes(d,f){this._setAttributeIfNotExists(d,"role","tablist");for(const y of f)this._setInitialAttributesOnChild(y)}_setInitialAttributesOnChild(d){d=this._getInnerElement(d);const f=this._elemIsActive(d),y=this._getOuterElement(d);d.setAttribute("aria-selected",f),y!==d&&this._setAttributeIfNotExists(y,"role","presentation"),f||d.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(d,"role","tab"),this._setInitialAttributesOnTargetPanel(d)}_setInitialAttributesOnTargetPanel(d){const f=W.getElementFromSelector(d);f&&(this._setAttributeIfNotExists(f,"role","tabpanel"),d.id&&this._setAttributeIfNotExists(f,"aria-labelledby",`${d.id}`))}_toggleDropDown(d,f){const y=this._getOuterElement(d);if(!y.classList.contains("dropdown"))return;const k=(N,T)=>{const E=W.findOne(N,y);E&&E.classList.toggle(T,f)};k(ul,ns),k(".dropdown-menu",Pa),y.setAttribute("aria-expanded",f)}_setAttributeIfNotExists(d,f,y){d.hasAttribute(f)||d.setAttribute(f,y)}_elemIsActive(d){return d.classList.contains(ns)}_getInnerElement(d){return d.matches(Da)?d:W.findOne(Da,d)}_getOuterElement(d){return d.closest(".nav-item, .list-group-item")||d}static jQueryInterface(d){return this.each(function(){const f=as.getOrCreateInstance(this);if(typeof d=="string"){if(f[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);f[d]()}})}}M.on(document,Ef,fl,function(g){["A","AREA"].includes(this.tagName)&&g.preventDefault(),m(this)||as.getOrCreateInstance(this).show()}),M.on(window,Rf,()=>{for(const g of W.find(Of))as.getOrCreateInstance(g)}),j(as);const Bt=".bs.toast",If=`mouseover${Bt}`,Ff=`mouseout${Bt}`,zf=`focusin${Bt}`,$f=`focusout${Bt}`,Bf=`hide${Bt}`,Hf=`hidden${Bt}`,Wf=`show${Bt}`,Uf=`shown${Bt}`,ml="hide",en="show",tn="showing",Vf={animation:"boolean",autohide:"boolean",delay:"number"},Yf={animation:!0,autohide:!0,delay:5e3};class si extends ot{constructor(d,f){super(d,f),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Yf}static get DefaultType(){return Vf}static get NAME(){return"toast"}show(){M.trigger(this._element,Wf).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ml),v(this._element),this._element.classList.add(en,tn),this._queueCallback(()=>{this._element.classList.remove(tn),M.trigger(this._element,Uf),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(M.trigger(this._element,Bf).defaultPrevented||(this._element.classList.add(tn),this._queueCallback(()=>{this._element.classList.add(ml),this._element.classList.remove(tn,en),M.trigger(this._element,Hf)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(en),super.dispose()}isShown(){return this._element.classList.contains(en)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(d,f){switch(d.type){case"mouseover":case"mouseout":this._hasMouseInteraction=f;break;case"focusin":case"focusout":this._hasKeyboardInteraction=f}if(f)return void this._clearTimeout();const y=d.relatedTarget;this._element===y||this._element.contains(y)||this._maybeScheduleHide()}_setListeners(){M.on(this._element,If,d=>this._onInteraction(d,!0)),M.on(this._element,Ff,d=>this._onInteraction(d,!1)),M.on(this._element,zf,d=>this._onInteraction(d,!0)),M.on(this._element,$f,d=>this._onInteraction(d,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(d){return this.each(function(){const f=si.getOrCreateInstance(this,d);if(typeof d=="string"){if(f[d]===void 0)throw new TypeError(`No method named "${d}"`);f[d](this)}})}}return Fi(si),j(si),{Alert:Ks,Button:Gs,Carousel:Ns,Collapse:Ss,Dropdown:lt,Modal:ts,Offcanvas:Nt,Popover:Ji,ScrollSpy:ti,Tab:as,Toast:si,Tooltip:ss}})})(N_);console.log("[SPA] Starting React application...");const br=document.getElementById("spa-root");console.log("[SPA] Container found:",br);if(br){console.log("[SPA] Creating React root...");const s=ad(br);console.log("[SPA] Rendering App component..."),s.render(o.jsx(k_,{})),console.log("[SPA] React app rendered successfully")}else{console.error("[SPA] Mount container #spa-root not found!");const s=document.createElement("div");s.id="spa-root",s.innerHTML='<p style="color: red; padding: 20px;">SPA container not found - created fallback</p>',document.body.appendChild(s)}
